function generateUUIDV4(){let e=Array.from({length:32},(()=>(16*Math.random()|0).toString(16)));return e[12]=4,e[16]=(3&parseInt(e[16],16)|8).toString(16),e.join("")}function toggleCompatibilityInfo(){const e=$("#compatibilitySupport"),t=$("#homeMainMenu");"none"==e.css("display")?(e.css("display","flex"),t.css("display","none")):(e.css("display","none"),t.css("display","flex")),MSLGlobals.Audio.play("select")}function gotoUrlBrowserGate(e){if(1==MSLGlobals.BrowserAck||1==Cookies.get("MessageBrowser"))MSLAppManager.gotoURL(e);else{const t=$("#MessageBrowser").clone();t.attr("url",e),$(t.find("#MessageBrowserUserAck")[0].nextElementSibling).attr("for","MessageBrowserUserAck_C"),t.find("#MessageBrowserUserAck").attr("id","MessageBrowserUserAck_C"),$(t.find("#MessageBrowserOwnerAck")[0].nextElementSibling).attr("for","MessageBrowserOwnerAck_C"),t.find("#MessageBrowserOwnerAck").attr("id","MessageBrowserOwnerAck_C"),MSLGlobals.isOwner||t.find("#MessageBrowserOwnerAck_C").parent().remove(),$(document.body).append(t)}}function browserGateChoiceHandler(e){if(e.find("#MessageBrowserUserAck_C")[0].checked&&setBooleanCookie("MessageBrowser"),MSLGlobals.isOwner&&e.find("#MessageBrowserOwnerAck_C")[0].checked)return MSLGlobals.BrowserAck=1,MSLAppSettings.SetBrowserAcknowledged(1),e.remove(),void setTimeout((function(){MSLAppManager.gotoURL(e.attr("url"))}),300);e.remove(),MSLAppManager.gotoURL(e.attr("url"))}function setBooleanCookie(e){Cookies.set(e,1,{expires:90})}function MSLGate(){if(!MSLGlobals.isOwner&&MSLGlobals.PrivateMode){const e=$("#PrivateModeLockScreen"),t=$("#PrivateModeLockScreenCodeContainer"),n=$("#PrivateModeLockScreenCodePart1"),i=$("#PrivateModeLockScreenCodePart2"),a=$("#PrivateModeLockScreenCodePart3"),o=$("#PrivateModeLockScreenCodePart4"),r=$("#PrivateModeLockScreenInput"),s=$("#PrivateModeLockScreenWelcome"),l=$("#PrivateModeLockScreenPad > div"),c=$("#PrivateModeLockScreenWelcome > h2");let u=!1,d=0,p=0;const h=function(){u=!1,c.text("Try again in 45 seconds");let t=setInterval((function(){const n=Date.now()-p;n>45e3?(clearInterval(t),c.text("Click here to access"),e.on("click",g)):c.text("Try again in "+(45-(Math.ceil(n/1e3)-1))+" seconds")}),1e3);s.stop(!0,!0),r.stop(!0,!0).fadeOut(300,(function(){e.children("div").stop(!0,!0).animate({height:"88px"},{duration:300,easing:"linear",always:function(){e.children("div").css("height","88px")}}),s.css("display","block").stop(!0,!0).animate({blur:0,opacity:1},{duration:300,easing:"linear",step:function(){s.css("filter","blur("+this.blur+"px)")},always:function(){s.css({opacity:"1.0",filter:"blur(0px)"})}})}))},m=function(){e.off("click"),u=!0,r.stop(!0,!0),s.stop(!0,!0).animate({blur:20,opacity:0},{duration:300,easing:"linear",step:function(){s.css("filter","blur("+this.blur+"px)")},always:function(){s.css({opacity:"0.0",filter:"blur(0px)",display:"none"})}}),e.children("div").stop(!0,!0).animate({height:"80%"},{duration:300,easing:"linear",always:function(){e.children("div").css("height","80%"),r.fadeIn(300)}})},g=function(){u||m()},f=function(e){let r=[n.attr("val"),i.attr("val"),a.attr("val"),o.attr("val")].join("");switch(r.length){case 0:n.text("*"),n.attr("val",e);break;case 1:i.text("*"),i.attr("val",e);break;case 2:a.text("*"),a.attr("val",e);break;case 3:o.text("*"),o.attr("val",e),t.addClass("processing"),r=[n.attr("val"),i.attr("val"),a.attr("val"),o.attr("val")].join(""),$.get({url:"json/query.php",data:{uuid:MSLGlobals.uuid,k:"CheckPIN",v:parseInt(r)},success:function(e){try{if(0==(e=JSON.parse(e)).error&&e.data)return void StartMSL()}catch(e){}t.removeClass("processing"),n.html("&nbsp;").attr("val",""),i.html("&nbsp;").attr("val",""),a.html("&nbsp;").attr("val",""),o.html("&nbsp;").attr("val",""),++d>=3&&(p=Date.now(),d=0,h())},error:function(e){t.removeClass("processing"),n.html("&nbsp;").attr("val",""),i.html("&nbsp;").attr("val",""),a.html("&nbsp;").attr("val",""),o.html("&nbsp;").attr("val",""),++d>=3&&(p=Date.now(),d=0,h())}})}};e.on("click",g),l.on("click",(function(){const e=$(this);f(e.text())})),e.show(0)}else StartMSL()}Number.prototype.clamp=function(e,t){return Math.min(Math.max(this,e),t)},JSON.tryParse=function(e,t){try{return JSON.parse(e,t)}catch(e){return null}};var ActionLimiter=function(e,t){var n=void 0===n?3:n,i=(t=void 0===t?30:t,new Array);function a(){return Math.round((new Date).getTime()/1e3)}return{add:function(){const e=function(){const e=a();return i=i.filter((n=>e-n<=t)),e}();return!(i.length>=n)&&(i.push(e),!0)},getCurrentTimestamp:a,getTimeEarliestExpire:function(){let e=0;for(let t=0;t<i.length;++t)(0==e||i[t]<e)&&(e=i[t]);return e+t}}};function ActionMessage(e,t,n){var i=this,a=null,o=1008,r=$(document.createElement("div"));r.addClass("actionmessage");var s=$(document.createElement("div"));s.addClass("pointer"),r.append(s);var l=$(document.createElement("div"));l.addClass("content"),r.append(l),$(document.body).append(r),r.on("click",(function(){i.Hide()})),l.on("click",(function(){i.Hide()})),this.Show=function(i){if((i=void 0!==i?i:null)&&i.length){l.html(i);var c={x:e.offset().left,y:e.offset().top+e.height()+4},u=r.width(),d=c.x-32;d+u>o&&(d-=d+u-o),r.css({top:c.y,left:d,display:"block"}),s.css("left",c.x-d),void 0!==t&&n>0&&(a=setInterval(this.Update,n))}else this.Hide()},this.Update=function(){0==t(l)&&this.Hide()},this.Hide=function(){r.css("display","none"),null!=a&&(clearInterval(a),a=null)}}var MSLGlobals={sync:null,isOwner:!1,uuid:""};const OPCODE_PING=1,OPCODE_PONG=2,OPCODE_REGISTER=3,OPCODE_REGISTERED=4,OPCODE_LOAD=5,OPCODE_OPEN=6,OPCODE_SETLOCK=7,OPCODE_PASSTHROUGH=19,OPCODE_SETTINGS_CHANGE=20,OPCODE_ADULT_BACK=30,OPCODE_ADULT_PAGE=31,OPCODE_ADULT_SEARCH=32,OPCODE_ADULT_CATEGORY=33,OPCODE_ALTAI_SELECT=40,OPCODE_ALTAI_SEARCH=41,OPCODE_ALTAI_VIEW=46,OPCODE_ALTAI_PAGE=48,OPCODE_HHAVEN_SECTION=50,OPCODE_HHAVEN_SELECT=51,OPCODE_HHAVEN_VARVAL=52,OPCODE_HHAVEN_SEARCH=53,OPCODE_HHAVEN_PAGE=54,OPCODE_KARAOKE_BACK=60,OPCODE_KARAOKE_SELECT=61,OPCODE_KARAOKE_SEARCH=62,OPCODE_TWITCH_BACK=70,OPCODE_TWITCH_PAGE=71,OPCODE_TWITCH_SEARCH=72,OPCODE_YOUTUBE_BACK=80,OPCODE_YOUTUBE_PAGE=81,OPCODE_YOUTUBE_SEARCH=82,OPCODE_YOUTUBE_CATEGORY=83,OPCODE_YOUTUBE_CHANNEL_PAGE=84,OPCODE_YOUTUBE_CHANNEL_BACK=85,OPCODE_YOUTUBE_CHANNEL_SEARCH=86,OPCODE_YOUTUBE_NEXT=87,OPCODE_YOUTUBE_PREV=88,OPCODE_YOUTUBE_REPLAY=89,OPCODE_YOUTUBE_LOOP=90,OPCODE_RADIO_BACK=120,OPCODE_RADIO_SELECT=121,OPCODE_RADIO_SEARCH=122;function syncMessageHandler(e){switch(e.c){case 4:MSLAppManager.registered(e.appState);break;case 5:MSLAppManager.load(e.appName,e.data,!1);break;case 6:MSLAppManager.open(e.appName,!1);break;case 7:MSLAppManager.setLock(e.value);break;case 19:MSLAppManager.passedThroughData(e);break;case 62:MSLAppKaraoke.search(e.query,!1);break;case 61:MSLAppKaraoke.select(e.value,!1);break;case 122:MSLAppRadio.search(e.query,void 0===e.type?null:e.type,!1);break;case 121:MSLAppRadio.select(e.value,!1);break;case 120:MSLAppRadio.back(!1);break;case 41:MSLAppAltai.search(e.query,!1);break;case 40:MSLAppAltai.select(e.value,!1);break;case 48:MSLAppAltaiIndex.page(e.value,!1);break;case 46:MSLAppAltaiView.loadImage(e.value,!1);break;case 81:MSLAppYoutube.page(e.value,!1);break;case 82:MSLAppYoutube.search(e.query,void 0===e.type?1:e.type,!1);break;case 83:MSLAppYoutube.category(e.category,!1);break;case 80:MSLAppYoutube.back(!1);break;case 84:MSLAppYoutubeChannel.page(e.value,!1);break;case 86:MSLAppYoutubeChannel.search(e.query,!1);break;case 85:MSLAppYoutubeChannel.back(!1);break;case 87:MSLAppYoutubeWatch.onNext(!1);break;case 88:MSLAppYoutubeWatch.onPrev(!1);break;case 89:MSLAppYoutubeWatch.onReplay(!1);break;case 90:MSLAppYoutubeWatch.onLoop(!1);break;case 72:MSLAppTwitch.search(e.query,!1);break;case 71:MSLAppTwitch.page(e.value,!1);break;case 31:MSLAppAdult.page(e.value,!1);break;case 32:MSLAppAdult.search(e.query,!1);break;case 33:MSLAppAdult.category(e.category,!1);break;case 30:MSLAppAdult.back(!1);break;case 53:MSLAppHHaven.search(e.query,!1);break;case 50:MSLAppHHaven.categoryButtonCallback("categoryList"==e.section,!1);break;case 52:MSLAppHHaven.tagSelectionToggle(e.id,e.val,!1);break;case 51:MSLAppHHaven.select(e.value,!1);break;case 54:MSLAppHHaven.page(e.value,!1);break;case 20:MSLAppSettings.SettingsMenuChange(e.setting,e.value,!1)}}function clock(){var e=new Date,t=e.getHours(),n=e.getMinutes(),i=t<12?"AM":"PM";if(n=(n<10?"0":"")+n,t=0==(t=t>12?t-12:t)?12:t,0!=MSLGlobals.DisplayTimeFormat){var a=new Intl.DateTimeFormat("en-us",{weekday:"long",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",fractionalSecondDigits:3,hour12:!0,timeZone:"America/Los_Angeles"}).formatToParts(e);for(let e=0;e<a.length;++e)"hour"==a[e].type?t=a[e].value:"minute"==a[e].type?n=a[e].value:"dayPeriod"==a[e].type&&(i=a[e].value)}var o=t+":"+n+" "+i;$("time").html()!=o&&$("time").html(o),setTimeout(clock,1e3)}async function asyncLoadImagePromise(e,t=0){return new Promise(((n,i)=>{setTimeout((()=>{const a=new Image;let o=null;a.addEventListener("load",(function(){o&&clearTimeout(o),n(a.getAttribute("src"))})),a.addEventListener("error",(function(){o&&clearTimeout(o),i()})),t&&(o=setTimeout((()=>{i()}),t)),a.src=e}),1)}))}async function asyncIsImage(e,t=0){let n=!1;return await asyncLoadImagePromise(e.toString(),t).then((()=>{n=!0})).catch((()=>{n=!1})),n}class MSLVersion{constructor(e,t,n){this.major=parseInt(e),this.minor=parseInt(t),this.build=parseInt(n)}Get(){return String(this.major)+String(this.minor).padStart(2,"0")+String(this.build).padStart(3,"0")}GetMajor(){return this.major}GetMinor(){return this.minor}GetBuild(){return this.build}IsAtLeast(e,t=0,n=0){return this.major>=e&&this.minor>=t&&this.build>=n}IsAtMost(e,t=0,n=0){return this.major<=e&&this.minor<=t&&this.build<=n}toString(){return this.Get()}}function MSLAudio(e){var t={};e=void 0===e||e,this.add=function(e,n,i){return void 0===t[e]&&(null==i&&(i=1),t[e]={source:n,audio:new Audio(n),volume:i},t[e].audio.volume=i,t[e].audio.addEventListener("ended",(function(){this.currentTime=0})),!0)},this.play=function(n){if(!e||void 0===t[n])return!1;if(t[n].audio.paused)t[n].audio.play();else{var i=new Audio(t[n].source);i.volume=t[n].volume,i.play(),i=null}return!0},this.disable=function(){e=!1},this.enable=function(){e=!0}}function Tooltip(e,t){var n=this,i=1008,a=$(document.createElement("div"));a.addClass("tooltip");var o=$(document.createElement("div"));o.addClass("pointer"),a.append(o);var r=$(document.createElement("div"));r.addClass("content"),a.append(r),$(document.body).append(a),e.on("mouseenter",(function(){n.Show(t())})),e.on("mouseleave",(function(){n.Show(!1)})),this.Show=function(t){if((t=void 0!==t?t:null)&&t.length){r.html(t);var n={x:e.offset().left+e.width()/4,y:e.offset().top+e.height()+8},s=a.width(),l=n.x-32;l+s>i&&(l-=l+s-i),a.css({top:n.y,left:l,display:"block"}),o.css("left",n.x-l)}else a.css("display","none")}}class DropdownMenu{static#e=new Array;static HideAll(){DropdownMenu.#e.forEach((e=>{e.show(!1)}))}$target=null;$menu=null;$pointer=null;constructor(e,t){DropdownMenu.#e.push(this),e instanceof HTMLElement?this.$target=$(e):"string"==typeof e?("#"!=e.charAt(0)&&(e="#".$target),this.$target=$(e)):this.$target=e,this.$menu=$(document.createElement("div")),this.$menu.addClass("dropdown"),this.$pointer=$(document.createElement("div")),this.$pointer.addClass("pointer"),this.$menu.append(this.$pointer);const n=$(document.createElement("div"));n.addClass("content");const i=$(document.createElement("header"));n.append(i);const a=$(document.createElement("main"));for(let e=0;e<t.length;++e){let n=$(document.createElement("div"));if(void 0!==t[e].itemClass&&n.addClass(t[e].itemClass),void 0!==t[e].icon){let i=$(document.createElement("div"));i.addClass("icon"),i.css("background-image","url('"+t[e].icon+"')"),n.append(i)}void 0===t[e].label&&(t[e].label="Option #"+(e+1));let i=$(document.createElement("div"));i.addClass("label"),i.text(t[e].label),n.append(i),void 0!==t[e].clickAction&&(n.addClass("clickable"),n.on("click",(()=>{MSLGlobals.Audio.play("select"),this.show(!1),t[e].clickAction()}))),n.on("mouseenter",(()=>{MSLGlobals.Audio.play("hover")})),a.append(n)}n.append(a);const o=$(document.createElement("footer"));n.append(o),this.$menu.append(n),$(document.body).append(this.$menu),this.$menu.hide(0),this.$target.on("click",this.show.bind(this)),this.$target.on("mouseenter",(()=>{this.show(!0)}))}mousemove(e){const t=this.$menu.offset(),n=this.$target.offset(),i=e.pageY>=t.top&&e.pageX<=t.left+this.$menu.width()+4&&e.pageY<=t.top+this.$menu.height()+4&&e.pageX>=t.left-4;e.pageY>=n.top-4&&e.pageX<=n.left+this.$target.width()+2&&e.pageX>=n.left-2&&e.pageY<=t.top||i||this.show(!1)}show(e){let t=this.$menu.is(":hidden");if("boolean"==typeof e&&(t=e),!t)return $(document).off("mousemove",this.mousemove),void this.$menu.hide(0);const n=$(document.body).width(),i=this.$menu.width(),a=this.$target.offset(),o=a.left+this.$target.width()/2;this.$menu.css("top",a.top+this.$target.height());let r=o-i/2;r.clamp(16,n-16-i),this.$menu.css("left",r),this.$pointer.css("left",o-r-9),this.$menu.show(0),$(document).on("mousemove",this.mousemove.bind(this))}}function RailMenuTMCentered(e,t,n,i,a){var o=a-i,r=e.m_$parent,s=e.m_collection,l=e.m_filtered,c=e.m_shown,u=e.settings;function d(){var e=Math.floor(u.numToDisplay/2);if(a<=e){if(i<=e)return o=0,!1;o=e-i}var t=l[l.length-1]-e;if(i>t){if(a>t)return o=0,!1;o=a-t}return!0}function p(){var e=Math.floor(u.numToDisplay/2);if(i<=e){if(i+o-e<=0)return o=0,!1;o=i+o-e}return!0}"horizontal"==u.layout?o<0?(function(){if(d()){1==e.oldDirection&&r.children().stop(!0,!0);for(var n=-1;n>=o&&!(t+n<0);n--)c.unshift(l[t+n]),s[c[0]].$DOM.css("margin-left",-1*u.itemSize),r.prepend(s[c[0]].$DOM),s[c[0]].$DOM.animate({"margin-left":0},{duration:u.transitionSpeed,queue:!1,complete:function(){r.children().last().detach()}}),c.pop()}}(),e.oldDirection=-1):(function(){if(p()){-1==e.oldDirection&&r.children().stop(!0,!0);for(var t=1;t<=o&&!(n+t>=l.length);t++)r.append(s[l[n+t]].$DOM),c.push(l[n+t]),s[c.shift()].$DOM.animate({"margin-left":-1*u.itemSize},{duration:u.transitionSpeed,queue:!1,complete:function(){$(this).detach()}})}}(),e.oldDirection=1):o<0?(function(){if(d()){1==e.oldDirection&&r.children().stop(!0,!0);for(var n=-1;n>=o&&!(t+n<0);n--)c.unshift(l[t+n]),s[c[0]].$DOM.css("margin-top",-1*u.itemSize),r.prepend(s[c[0]].$DOM),s[c[0]].$DOM.animate({"margin-top":0},{duration:u.transitionSpeed,queue:!1,complete:function(){r.children().last().detach(),r.children().css("margin-top","0")}}),c.pop()}}(),e.oldDirection=-1):(function(){if(p()){-1==e.oldDirection&&r.children().stop(!0,!0);for(var t=1;t<=o&&!(n+t>=l.length);t++)r.append(s[l[n+t]].$DOM),c.push(l[n+t]),s[c.shift()].$DOM.animate({"margin-top":-1*u.itemSize},{duration:u.transitionSpeed,queue:!1,complete:function(){$(this).detach(),r.children().css("margin-top","0")}})}}(),e.oldDirection=1)}function RailMenu(e,t){var n=this,i=1;function a(e,t){for(var n in e)if(e.hasOwnProperty(n)){if("protected"==n)continue;"object"==typeof e[n]?a(e[n],t[n]):t[n]=e[n]}}function o(e){var t=n.m_filtered.indexOf(parseInt(e));return t>=0?t:null}function r(e){return e>=n.m_filtered.length?null:n.m_filtered[e]}this.m_$parent=e,this.m_collection=new Array,this.m_filtered=new Array,this.m_shown=new Array,this.filters={search:"",sort:"",category:"",order:"ASC"},this.oldDirection=0,this.settings={numToDisplay:9,layout:e.hasClass("horizontal")?"horizontal":"vertical",itemSize:null,transition:"RailMenuTMCentered",transitionSpeed:75,attributes:new Array,onClick:null,onSelect:null,onSearch:null,onSort:null,onPresent:null},e.bind("mousewheel DOMMouseScroll",(function(e){e.originalEvent.wheelDelta>0||e.originalEvent.detail<0?n.select(r(o(i)-1),!0,!1):n.select(r(o(i)+1),!0,!1)})),this.createParamsString=function(){return"q="+encodeURIComponent(this.filters.search)+"c="+encodeURIComponent(this.filters.category)+"&s="+encodeURIComponent(this.filters.sort)+"&o="+encodeURIComponent(this.filters.order)+"&sel="+i},this.clear=function(){n.m_shown=new Array,n.m_filtered=new Array,n.m_collection=new Array},this.itemCount=function(){return n.m_collection.length},this.filteredItemCount=function(){return n.m_filtered.length},this.addItem=function(e){for(var t={$DOM:e},i=0;i<n.settings.attributes.length;i++)void 0!==e.attr(n.settings.attributes[i])&&(t[n.settings.attributes[i]]=e.attr(n.settings.attributes[i]));var a=n.m_collection.length;n.m_collection.push(t),n.m_filtered.push(a),e.attr("id",a)},this.loadJSON=function(e,t){"string"==typeof e&&(e=JSON.parse(e));var i=n.m_collection.length;for(var a in e)if(e.hasOwnProperty(a)){for(var o={$DOM:t(e[a])},r=0;r<n.settings.attributes.length;r++)void 0!==e[a][n.settings.attributes[r]]&&(o[n.settings.attributes[r]]=e[a][n.settings.attributes[r]]);n.m_collection.push(o),n.m_filtered.push(i),o.$DOM.attr("id",i++)}},this.loadDOM=function(e){e.children().each((function(e){for(var t={$DOM:$(this)},i=0;i<n.settings.attributes.length;i++)void 0!==t.$DOM.attr(n.settings.attributes[i])&&(t[n.settings.attributes[i]]=t.$DOM.attr(n.settings.attributes[i]));n.m_collection.push(t),n.m_filtered.push(e),$(this).attr("id",e)}))},this.search=function(e,t,n=""){if(e=void 0!==e?e.toLowerCase():"",n=void 0!==n&&null!=n?n.toLowerCase():"",t=void 0===t||t,e==this.filters.search&&this.filters.category==n)return!1;this.filters.search=e,this.filters.category=n,this.m_filtered=new Array;for(var i=0;i<this.m_collection.length;i++)if(this.filters.search.length>1||this.filters.category.length>1){var a=!1,o=!1;if(this.filters.search.length>1)for(var r=0;r<this.settings.attributes.length;r++)if(this.m_collection[i].hasOwnProperty(this.settings.attributes[r])&&-1!=this.m_collection[i][this.settings.attributes[r]].toLowerCase().indexOf(this.filters.search)){a=!0;break}if(this.filters.category.length>1)for(r=0;r<this.settings.attributes.length;r++)if(this.m_collection[i].hasOwnProperty(this.settings.attributes[r])&&-1!=this.m_collection[i][this.settings.attributes[r]].toLowerCase().indexOf(this.filters.category)){o=!0;break}(this.filters.search.length>1&&this.filters.category.length>1&&a&&o||this.filters.search.length>1&&0==this.filters.category.length&&a||this.filters.category.length>1&&0==this.filters.search.length&&o)&&this.m_filtered.push(i)}else this.m_filtered.push(i);return t&&"function"==typeof this.settings.onSearch&&this.settings.onSearch(),!0},this.sort=function(e,t,i){return t=void 0!==t&&"DESC"==t?t:"ASC",((e=void 0!==e?e:"")!=this.filters.sort||t!=this.filters.order)&&(this.filters.sort=e,this.filters.order=t,this.filters.sort.length>1&&this.m_collection[this.m_filtered[0]].hasOwnProperty(this.filters.sort)&&this.m_filtered.sort((function(e,t){return n.m_collection[e][n.filters.sort].charCodeAt(0)<n.m_collection[t][n.filters.sort].charCodeAt(0)?"ASC"==n.filters.order?-1:1:n.m_collection[e][n.filters.sort].charCodeAt(0)>n.m_collection[t][n.filters.sort].charCodeAt(0)?"ASC"==n.filters.order?1:-1:0})),i&&"function"==typeof this.settings.onSort&&this.settings.onSort(),!0)},this.present=function(e){if(e=void 0!==e?e:0,this.m_filtered.length){var t=Math.floor((this.settings.numToDisplay-1)/2),n=Math.ceil((this.settings.numToDisplay-1)/2),a=o(e),r=a-t,s=a+n;r<0&&(s+=Math.abs(r),r=0),s>=this.m_filtered.length&&(s=this.m_filtered.length-1),this.m_$parent.empty(),this.m_shown=new Array;for(var l=r;l<=s;l++)this.m_$parent.append(this.m_collection[this.m_filtered[l]].$DOM),this.m_shown.push(this.m_filtered[l]);this.settings.itemSize="horizontal"==this.settings.layout?this.m_collection[this.m_filtered[r]].$DOM.width():this.m_collection[this.m_filtered[r]].$DOM.height(),this.m_$parent.children().removeClass().removeAttr("style"),o(i=e)||(i=this.m_filtered[0]),this.m_collection[i].$DOM.addClass("selected");for(l=0;l<this.m_shown.length;l++)if(this.m_shown[l]!=i){var c=this.m_shown[l]-a;c=c<0?"rel_m"+Math.abs(c):"rel_p"+c,this.m_collection[this.m_shown[l]].$DOM.addClass(c)}"function"==typeof this.settings.onPresent&&this.settings.onPresent(this.m_collection[i])}},this.select=function(e,t,n){if(t=void 0===t||t,n=void 0===n||n,!(e<0||e>=this.m_collection.length||null==e))if(e!=i){t&&"function"==typeof this.settings.onSelect&&this.settings.onSelect(this.m_collection[e],n);var a=o(e),r=o(i),s=o(this.m_shown[0]),l=o(this.m_shown[this.m_shown.length-1]);window[this.settings.transition](this,s,l,r,a),this.m_$parent.children().removeClass(),i=e,this.m_collection[i].$DOM.addClass("selected");for(var c=0;c<this.m_shown.length;c++)if(this.m_shown[c]!=i){var u=o(this.m_shown[c])-a;u=u<0?"rel_m"+Math.abs(u):"rel_p"+u,this.m_collection[this.m_shown[c]].$DOM.addClass(u)}}else t&&"function"==typeof this.settings.onClick&&this.settings.onClick(this.m_collection[i],n)},a(t,n.settings),n.loadDOM(e),e.click((function(e){var t=e.target;do{if("LI"==t.tagName)return n.select($(t).attr("id")),!1;t=t.parentNode}while(null!=t.parentNode&&void 0!==t.parentNode)}))}function GridMenu(e,t,n,i){var a=n*i,o=0,r=0,s=new Array;this.hasAny=function(){return s.length>0},this.nextPage=function(){this.gotoPage(o+1)},this.prevPage=function(){this.gotoPage(o-1)},this.gotoPage=function(e){e<0||e>r||(MSLGlobals.Audio.play("select"),o=e,this.render())},this.getCollectionLength=function(){if(0==$(".MSLAppBookmarkSearchCtrl").val().length)return s.length;for(var e=0,t=0;t<s.length;t++)this.matchesSearchTerm(s[t])&&e++;return e},this.matchesSearchTerm=function(e){if(0==$(".MSLAppBookmarkSearchCtrl").val().length)return!0;var t=e.children(".text").first().children("h5").first().text(),n=e.children(".text").first().children("p").first().text();return-1!=t.indexOf($(".MSLAppBookmarkSearchCtrl").val())||-1!=n.indexOf($(".MSLAppBookmarkSearchCtrl").val())},this.render=function(){var n=this;this.clearMenu(),r=Math.floor((this.getCollectionLength()-1)/a);for(var i=o*a;i<s.length&&i<o*a+a;i++)this.matchesSearchTerm(s[i])&&e.append(s[i]);if(r>0)for(i=0;i<=r;i++)$bullet=$(document.createElement("div")),i==o?$bullet.addClass("selected"):($bullet.attr("goto",i),$bullet.on("click",(function(){n.gotoPage($(this).attr("goto"))}))),t.append($bullet)},this.addItem=function(e){s.push(e)},this.clearMenu=function(){e.empty(),t.empty()},this.clearCollection=function(){s=new Array,o=0,r=0}}function SimpleGalleryPages(e,t,n,i,a){var o=this,r=1,s=0,l=0,c=null;this.checkPageControlAvailability=function(){r==s?$("#"+e+" #pageControlNext").removeClass("active"):$("#"+e+" #pageControlNext").addClass("active"),1==r?$("#"+e+" #pageControlPrev").removeClass("active"):$("#"+e+" #pageControlPrev").addClass("active")},this.goToPage=function(t,i){(t=void 0!==t?t:1)<1&&(t=1),t>s&&(t=s),(i=void 0===i||i)&&MSLGlobals.sync&&MSLGlobals.sync.send({c:n,value:t}),r=t,o.checkPageControlAvailability(),$("#"+e+" .page").css("display","none"),$("#"+e+" .page-"+(t-1)).fadeIn()},this.nextPage=function(){++r>s?r--:o.goToPage(r)},this.prevPage=function(){--r<1?r++:o.goToPage(r)},this.add=function(e){var n=Math.floor(l/(i*a)),r=l%i;l%(i*a)==0&&s++,e.addClass("page"),e.addClass("page-"+n),n>0&&e.css("display","none"),r==i-1&&e.addClass("lastInRow"),null==c&&(c=$("#"+t)),c.append(e),o.checkPageControlAvailability(),l++},this.clear=function(){r=1,s=0,l=0,null!=c&&c.empty()}}class UndockedScrollbar{constructor(e,t){if(this.dContent=window.jQuery&&e instanceof jQuery?e[0]:e,this.dScroll=window.jQuery&&t instanceof jQuery?t[0]:t,!this.dContent)throw new Error("Specified content element is undefined.");if(!this.dScroll)throw new Error("Specified scroll element is undefined.");this.dTrack=this.dScroll.getElementsByClassName("track")[0],this.dThumb=this.dScroll.getElementsByClassName("thumb")[0],this.dragInfo=null,this.dContent.addEventListener("scroll",(()=>{this.dragInfo||this.MoveByContent()})),window.addEventListener("resize",(()=>{this.MoveByContent()})),this.dScroll.addEventListener("mousedown",(e=>{this.dragInfo={lastMouseY:e.clientY,hasMoved:!1}})),window.addEventListener("mouseup",(e=>{if(null!=this.dragInfo&&!this.dragInfo.hasMoved){const t=parseFloat(this.dThumb.style.top),n=t-(e.clientY-(this.dTrack.getBoundingClientRect().top+this.dTrack.ownerDocument.defaultView.pageYOffset)),i=parseFloat(getComputedStyle(this.dTrack).height),a=parseFloat(getComputedStyle(this.dThumb).height),o=i*(parseFloat(getComputedStyle(this.dContent).height)/this.dContent.scrollHeight);n+a<0?this.MoveByScroll(this.Clamp(t+o,0,i-a)):n>0&&this.MoveByScroll(this.Clamp(t-o,0,i-a))}this.dragInfo=null})),window.addEventListener("mousemove",(e=>{if(null==this.dragInfo)return;const t=e.clientY-this.dragInfo.lastMouseY;this.dragInfo.lastMouseY!=e.clientY&&(this.dragInfo.lastMouseY=e.clientY,this.dragInfo.hasMoved=!0);const n=parseFloat(this.dThumb.style.top),i=parseFloat(getComputedStyle(this.dTrack).height),a=parseFloat(getComputedStyle(this.dThumb).height);this.MoveByScroll(this.Clamp(n+t,0,i-a))}))}UpdateVisibility(){this.MoveByContent()}MoveByContent(){if(!(this.dContent?.childElementCount>0))return;const e=getComputedStyle(this.dContent),t=parseFloat(e.height),n=t/(this.dContent.scrollHeight-parseInt(e.paddingTop)-parseInt(e.paddingBottom));if(isNaN(n)||n>=1)return this.dScroll.classList.add("inactive"),void this.dContent.classList.add("contentFits");this.dScroll.classList.remove("inactive"),this.dContent.classList.remove("contentFits"),this.dThumb.style.height=t*n+"px",this.dThumb.style.top=this.dContent.scrollTop/(this.dContent.scrollHeight-t)*(parseFloat(getComputedStyle(this.dTrack).height)-parseFloat(getComputedStyle(this.dThumb).height))+"px",this.AfterScroll()}MoveByScroll(e){this.dThumb.style.top=e+"px",this.dContent.scrollTo(0,parseFloat(this.dThumb.style.top)*(this.dContent.scrollHeight-parseFloat(getComputedStyle(this.dContent).height))/(parseFloat(getComputedStyle(this.dTrack).height)-parseFloat(getComputedStyle(this.dThumb).height))),this.AfterScroll()}AfterScroll(){0==this.dThumb.offsetTop?this.dThumb.classList.add("top"):this.dThumb.classList.remove("top"),this.dThumb.offsetTop+this.dThumb.offsetHeight>=this.dTrack.offsetHeight?this.dThumb.classList.add("bot"):this.dThumb.classList.remove("bot")}Reset(){this.dContent.scrollTo(0,0)}Clamp(e,t,n){return Math.min(Math.max(e,t),n)}}class VisibilityManager{constructor(e,t=!1,n={}){if(this.$context=e,t)for(var i in this.$context.show(0),n)n[i]||this.$context.filter("#"+i).hide(0);else for(var i in this.$context.hide(0),n)n[i]&&this.$context.filter("#"+i).show(0)}SetAll(e=!0,t=0){e?this.$context.finish().show(t):this.$context.finish().hide(t)}SetEverythingExceptByID(e,t=!0,n=0){t?this.$context.filter(":not(#"+e+")").finish().show(n):this.$context.filter(":not(#"+e+")").finish().hide(n)}SetEverythingExceptNth(e,t=!0,n=0){t?this.$context.filter((t=>t!=e)).finish().show(n):this.$context.filter((t=>t!=e)).finish().hide(n)}SetByID(e,t=!0,n=0){t?this.$context.filter("#"+e).finish().show(n):this.$context.filter("#"+e).finish().hide(n)}SetByNth(e,t=!0,n=0){t?this.$context.eq(e).finish().show(n):this.$context.eq(e).finish().hide(n)}SetOneHideRestByID(e,t=0,n=0,i=!1){if(i){const i=this;$.when(this.$context.finish().hide(n)).done((function(){i.$context.filter("#"+e).finish().show(t)}))}else this.$context.finish().hide(n),this.$context.filter("#"+e).finish().show(t)}SetOneHideRestByNth(e,t=0,n=0,i=!1){if(i){const i=this;$.when(this.$context.finish().hide(n)).done((function(){i.$context.eq(e).finish().show(t)}))}else this.$context.finish().hide(n),this.$context.eq(e).finish().show(t)}GetContextLength(){return this.$context.length}}class TabManager{constructor(e,t,n,i=null){const a=this;this.$context=e,this.pages=new VisibilityManager(t,!1,{[n]:!0}),this.callback=i,this.$context.each((function(){const e=$(this);e.attr("for")==n?a.Switch(e):e.removeClass("active")})),this.$context.on("click",(function(){const e=$(this),t=e.attr("for");void 0!==t&&""!=t&&a.$context.filter(".active").attr("for")!=t&&a.Switch(e)}))}Switch(e,t=!1){if("string"==typeof e&&(e=this.GetTabById(e)),this.pages.SetOneHideRestByID(e.attr("for"),0,0,!0),this.$context.removeClass("active"),e.addClass("active"),this.callback){const n=new Array;this.$context.each((function(){n.push($(this).attr("for"))})),this.callback(e.attr("for"),n,t)}}GetTabById(e){for(let t=0;t<this.$context.length;++t)if(this.$context[t].attributes.for.value==e)return $(this.$context[t]);return null}}var MSLSyncClient=function(e,t,n){var i=this;this.socket,this.url=e,this.objectUUID=t,this.callback=n,this.reconnecting=!1,this.connected=!1,this.pingTimer=null,this.pingTime=null,this.latency=0,this.connect=function(){i.connected&&(i.socket.close(),connected=!1),i.socket=new WebSocket(i.url),i.reconnecting=!1,i.socket.onopen=function(e){i.open(e)},i.socket.onclose=function(e){i.close(e)},i.socket.onmessage=function(e){i.recv(e)},i.socket.onerror=function(e){i.error(e)}},this.reconnect=function(){if(!this.reconnecting){this.reconnecting=!0,this.connected=!1,setTimeout(this.connect,5e3)}},this.send=function(e){this.connected&&this.socket.send(JSON.stringify(e))},this.ping=function(){i.pingTimer||(i.pingTimer=setInterval(i.ping,25e3)),i.connected&&!i.pingTime&&(i.pingTime=Math.round(1e3*window.performance.now()),i.send({c:1}))},this.connect(),this.open=function(e){$("#statusIcons > .sync").removeClass().addClass("sync").addClass("ok"),this.connected=!0,"object"==typeof i.callback&&"function"==typeof i.callback.onopen&&i.callback.onopen(e),"SYNC_STATUS_CHECK"!=i.objectUUID&&(this.send({c:3,objectUUID:this.objectUUID,defaultApp:MSLGlobals.DefaultApp}),setTimeout(i.ping,1e3))},this.close=function(e){$("#statusIcons > .sync").removeClass().addClass("sync").addClass("disconnected"),this.connected=!1,"object"==typeof i.callback&&"function"==typeof i.callback.onclose&&i.callback.onclose(e),this.reconnect()},this.recv=function(e){var t=JSON.parse(e.data);if(void 0===t.opcode)switch(t.c){case 4:t.opcode="registered";break;case 2:t.opcode="pong";break;case 5:t.opcode="load";break;case 6:t.opcode="open";break;case 7:t.opcode="setLock";break;case 60:t.opcode="karaoke.back";break;case 62:t.opcode="karaoke.search";break;case 61:t.opcode="karaoke.select";break;case 120:t.opcode="radio.back";break;case 122:t.opcode="radio.search";break;case 121:t.opcode="radio.select";break;case 41:t.opcode="altai.search";break;case 40:t.opcode="altai.select";break;case 48:t.opcode="altaiIndex.page";break;case 46:t.opcode="altaiView.view";break;case 81:t.opcode="youtube.page";break;case 82:t.opcode="youtube.search";break;case 83:t.opcode="youtube.category";break;case 80:t.opcode="youtube.back";break;case 84:t.opcode="youtubeChannel.page";break;case 86:t.opcode="youtubeChannel.search";break;case 85:t.opcode="youtubeChannel.back";break;case 87:t.opcode="youtubeWatch.onNext";break;case 88:t.opcode="youtubeWatch.onPrev";break;case 89:t.opcode="youtubeWatch.onReplay";break;case 90:t.opcode="youtubeWatch.onLoop";break;case 70:t.opcode="twitch.back";break;case 71:t.opcode="twitch.page";break;case 72:t.opcode="twitch.search";break;case 31:t.opcode="adult.page";break;case 32:t.opcode="adult.search";break;case 33:t.opcode="adult.category";break;case 30:t.opcode="adult.back";break;case 53:t.opcode="hhaven.search";break;case 50:t.opcode="hhaven.section";break;case 52:t.opcode="hhaven.varval";break;case 51:t.opcode="hhaven.select";break;case 54:t.opcode="hhaven.page";break;case 20:t.opcode="settings.change"}else if(void 0===t.c)switch(t.opcode){case"registered":t.c=4;break;case"pong":t.c=2;break;case"load":t.c=5;break;case"open":t.c=6;break;case"setLock":t.c=7;break;case"karaoke.back":t.c=60;break;case"karaoke.search":t.c=62;break;case"karaoke.select":t.c=61;break;case"radio.back":t.c=120;break;case"radio.search":t.c=122;break;case"radio.select":t.c=121;break;case"altai.search":t.c=41;break;case"altai.select":t.c=40;break;case"altaiIndex.page":t.c=48;break;case"altaiView.view":t.c=46;break;case"youtube.page":t.c=81;break;case"youtube.search":t.c=82;break;case"youtube.category":t.c=83;break;case"youtube.back":t.c=80;break;case"youtubeChannel.page":t.c=84;break;case"youtubeChannel.search":t.c=86;break;case"youtubeChannel.back":t.c=85;break;case"youtubeWatch.onNext":t.c=87;break;case"youtubeWatch.onPrev":t.c=88;break;case"youtubeWatch.onReplay":t.c=89;break;case"youtubeWatch.onLoop":t.c=90;break;case"twitch.back":t.c=70;break;case"twitch.page":t.c=71;break;case"twitch.search":t.c=72;break;case"adult.page":t.c=31;break;case"adult.search":t.c=32;break;case"adult.category":t.c=33;break;case"adult.back":t.c=30;break;case"hhaven.search":t.c=53;break;case"hhaven.section":t.c=50;break;case"hhaven.varval":t.c=52;break;case"hhaven.select":t.c=51;break;case"hhaven.page":t.c=54;break;case"settings.change":t.c=20}if(i.pingTime&&2==t.c){var n=Math.round(1e3*window.performance.now());return this.latency=Math.floor((n-i.pingTime)/2/1e3),i.pingTime=0,void(this.latency>75?$("#statusSyncIcon").css("background-image","url('../images/icon-sync-slow.png')"):$("#statusSyncIcon").css("background-image","url('../images/icon-sync-ok.png')"))}"object"==typeof i.callback&&"function"==typeof i.callback.onmessage?i.callback.onmessage(t):"function"==typeof i.callback&&i.callback(t)},this.error=function(e){$("#statusIcons > .sync").removeClass().addClass("sync").addClass("disconnected"),this.connected=!1,"object"==typeof i.callback&&"function"==typeof i.callback.onerror&&i.callback.onerror(e),this.reconnect()}};function MSLHistory(e){var t=new Array;if(void 0===n)function n(e,t){return JSON.stringify(e)==JSON.stringify(t)}this.add=function(e){if(t.length&&n(t[t.length-1],e))return!1;t.push(e),this.checkAvailability()},this.back=function(){return t.length<=1?null:(t.pop(),this.checkAvailability(),t[t.length-1])},this.clear=function(){t=new Array},this.checkAvailability=function(){var n=e.find("header > div.navBack").first();t.length>1?(n.removeClass("disabled"),n.css("cursor","pointer")):(n.addClass("disabled"),n.css("cursor","auto"))}}function MSLPaginator(e,t){var n=this,i=0,a=1,o=0;this.settings={$controls:null,pageContainerType:"div",pageContainerClass:null,resultsPerPage:8,rows:2,firstAddSpace:0,syncID:null,onPageChange:null},function e(t,n){for(var i in t)if(t.hasOwnProperty(i)){if("protected"==i)continue;"object"!=typeof t[i]||t[i]instanceof jQuery?n[i]=t[i]:e(t[i],n[i])}}(t,n.settings);var r=null,s=Math.floor(this.settings.resultsPerPage/this.settings.rows);function l(){n.settings.$controls&&(a==i?n.settings.$controls.find("#pageControlNext").removeClass("active"):n.settings.$controls.find("#pageControlNext").addClass("active"),1==a?n.settings.$controls.find("#pageControlPrev").removeClass("active"):n.settings.$controls.find("#pageControlPrev").addClass("active"),n.settings.$controls.find("#currentPageNum").text(a),n.settings.$controls.find("#totalPageNum").text(i))}this.settings.$controls&&(this.settings.$controls.find(".previousPage").on("click",(function(){--a<1?a++:n.page(a)})),this.settings.$controls.find(".nextPage").on("click",(function(){++a>i?a--:n.page(a)}))),this.clear=function(){i=0,o=0,e.empty()},this.add=function(t){var n=Math.floor(o/this.settings.resultsPerPage),a=o%s==s-1;o%this.settings.resultsPerPage==0&&(i++,(r=$(document.createElement(this.settings.pageContainerType))).attr("id","page-"+n),r.addClass("page"),this.settings.pageContainerClass&&r.addClass(this.settings.pageContainerClass),n>0&&r.css("display","none"),e.append(r)),a&&t.addClass("lastInRow"),0==o&&this.settings.firstAddSpace?(t.addClass("special"),o+=this.settings.firstAddSpace):o++,r.append(t),l()},this.page=function(t,n){t=void 0!==t?t:1,n=void 0===n||n,MSLGlobals.Audio.play("select"),t<1&&(t=1),t>i&&(t=i),this.settings.syncID&&n&&MSLGlobals.sync&&MSLGlobals.sync.send({c:this.settings.syncID,value:t}),a=t,l(),e.children(".page").stop(!0,!0).css("display","none"),e.children("#page-"+(t-1)).fadeIn(),this.settings.onPageChange&&this.settings.onPageChange(e.children("#page-"+(t-1)))},this.search=function(t){var n=(t=(t=void 0!==t?t.toLowerCase():"").split("|")).length,s=new Array;e.children(".page").children().each((function(){var e=$(this);e.removeClass("hidden"),s.push(e),e.detach()}));var c=s.length;if(e.children(".page").remove(),n>1||t[0].length)for(var u=0;u<c;u++){var d="undefined"!=s[u].attr("search-data")?s[u].attr("search-data"):"";if(!d.length)return!1;d=d.toLowerCase();for(var p=0;p<n;p++)if(-1==d.indexOf(t[p])){s[u].addClass("hidden");break}}o=c,a=1,i=0,r=null;var h=new Array,m=0;for(u=0;u<c;u++){if(!s[u].hasClass("hidden")){var g=Math.floor(m/this.settings.resultsPerPage);if(m%this.settings.resultsPerPage==0){if(i++,(r=$(document.createElement(this.settings.pageContainerType))).attr("id","page-"+g),r.addClass("page"),this.settings.pageContainerClass&&r.addClass(this.settings.pageContainerClass),g>0&&r.css("display","none"),h.length){for(var f=h.length,v=0;v<f;v++)r.append(h[v]);h=new Array}e.append(r)}m++}r?r.append(s[u]):h.push(s[u])}if(h.length){(r=$(document.createElement(this.settings.pageContainerType))).attr("id","page-0"),r.addClass("page"),r.css("display","none"),this.settings.pageContainerClass&&r.addClass(this.settings.pageContainerClass);for(f=h.length,v=0;v<f;v++)r.append(h[v]);h=new Array,e.append(r)}l()},this.getContainer=function(){return e},this.pageByProperty=function(t,i){e.find("section").each((function(){var e=$(this);if(void 0===e.attr(t))return!1;if(e.attr(t)!=i)return!0;var a=parseInt(e.parent().attr("id").split("-")[1])+1;return n.page(a),!1}))},this.getCurrentPage=function(){return e.children("#page-"+(a-1))},this.getCurrentPageByLastProperty=function(t){var n=e.children("#page-"+(a-1)).first().children().last();return void 0===n.attr(t)?"undefined":n.attr(t)}}var MSLAppManager=function(){var e=new Array,t=new Array,n=null;function i(e,t,i){if(e=void 0!==e?e:null,t="object"==typeof t&&null!=t?t:{},i=void 0===i||i,void 0!==DropdownMenu&&DropdownMenu.HideAll(),!MSLGlobals.isOwner&&MSLGlobals.isLocked&&i)MSLGlobals.Audio.play("denied");else{if(1==i&&0!=MSLGlobals.DefaultApp&&0==MSLGlobals.isOwner){var a=-1;switch(e){case"youtube":case"youtubeWatch":case"youtubeChannel":a=1;break;case"radio":case"radioListen":a=2;break;case"altai":case"altaiIndex":case"altaiView":a=3;break;case"karaoke":case"karaokeWatch":a=4;break;case"plutotv":case"plutotvWatch":a=7}if(-1==a||a!=MSLGlobals.DefaultApp)return void MSLGlobals.Audio.play("denied")}i&&MSLGlobals.sync&&MSLGlobals.sync.send({c:5,appName:e,data:t});var r=o(e)||o(null);r&&(n&&n.close(),n==r?(MSLGlobals.Audio.play("back"),r.load(t,!0)):(MSLGlobals.Audio.play(null==e?"back":"start"),n=r,r.load(t)))}}function a(e,t){if(e=void 0!==e?e:0,1!=(t=void 0!==t&&t)||-1!=e){MSLGlobals.isLocked;MSLGlobals.isLocked=!!e,MSLGlobals.isLocked?($(".ownerLock").removeClass("lock"),$(".ownerLock").addClass("unlock"),$(".overlayLock").removeClass("unlocked"),$(".overlayLock").addClass("locked"),MSLGlobals.Audio.play("lock")):($(".ownerLock").removeClass("unlock"),$(".ownerLock").addClass("lock"),$(".overlayLock").removeClass("locked"),$(".overlayLock").addClass("unlocked"),MSLGlobals.Audio.play("unlock"))}}function o(n){for(var i=e.length;i--;)if(e[i]==n)return t[i];return null}return $(document).ready((function(){$(window).mousemove((function(e){null!=n&&void 0!==n.onMouseMove&&n.onMouseMove(e.pageX,e.pageY)}))})),$(document).ready((function(){$(".ownerLock").on("click",(function(){MSLAppManager.toggleLock()}))})),{load:i,open:function(e,t){if(e=void 0!==e?e:null,t=void 0===t||t,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&t)MSLGlobals.Audio.play("denied");else{MSLGlobals.Audio.play("back"),t&&MSLGlobals.sync&&MSLGlobals.sync.send({c:6,appName:e});var i=o(e);i&&(n&&n.close(),n=i,i.open())}},register:function(n,i){e.push(n),t.push(i),$(document).ready((function(){i.init()}))},passedThroughData:function(e){n&&n.passedThroughData&&n.passedThroughData(e)},toggleLock:function(){if(MSLGlobals.isOwner){$(".ownerLock");var e=!MSLGlobals.isLocked;$.post("json/ownerSet.php",{uuid:MSLGlobals.uuid,setting:"Lock",value:e}),e?(MSLGlobals.isLocked=!0,$(".ownerLock").removeClass("lock"),$(".ownerLock").addClass("unlock"),$(".overlayLock").removeClass("unlocked"),$(".overlayLock").addClass("locked"),MSLGlobals.Audio.play("lock"),MSLGlobals.endpoint.length>0&&$.post("json/SendToSecondLife.php",{endpoint:MSLGlobals.endpoint,data:"SetLock|1"})):(MSLGlobals.isLocked=!1,$(".ownerLock").removeClass("unlock"),$(".ownerLock").addClass("lock"),$(".overlayLock").removeClass("locked"),$(".overlayLock").addClass("unlocked"),MSLGlobals.Audio.play("unlock"),MSLGlobals.endpoint.length>0&&$.post("json/SendToSecondLife.php",{endpoint:MSLGlobals.endpoint,data:"SetLock|0"})),MSLGlobals.sync&&MSLGlobals.sync.send({c:7,value:e?1:0})}},setLock:a,gotoURL:function(e){MSLGlobals.isOwner||!MSLGlobals.isLocked?window.location=e:MSLGlobals.Audio.play("denied")},getHandler:o,registered:function(e){o(null).preload(e.home),o("karaoke").preload(e.karaoke),o("youtube").preload(e.youtube),o("twitch").preload(e.twitch),o("adult").preload(e.adult),o("hhaven").preload(e.hhaven),o("radio").preload(e.radio),o("altai").preload(e.altai),o("altaiIndex").preload(e.altaiIndex),o("altaiView").preload(e.altaiView),o("games").preload(e.games),o("help").preload(e.help),o("plutotv").preload(e.plutotv),a(e.isLocked,!0),i(e.currentApp,e.currentData,!1)}}}(),MSLAppHome=function(){var e,t="#00e4ff",n="overlay",i="";function a(){$("#underlay > #videoBackground").css("backgroundColor",t),$("#underlay > #videoBackground").css("mix-blend-mode",n),i.length>=16?$("#underlay > #videoBackground").css("backgroundImage","url('"+i+"')"):$("#underlay > #videoBackground").css("backgroundImage",""),$("#underlay > #videoBackground").css("opacity",1),$("#underlay > video").css("filter","brightness(1.0)"),$("#underlay > video").css("-webkit-filter","brightness(1.0)")}function o(){$("body > section").css("display","none"),$("section#MSLAppHome").fadeIn(),MSLAppManager.getHandler("radio").unload()}function r(t,n){e=!0,a(),o()}return{init:function(){e=!1,$("#homeMainMenuBars > div:not(.disabled)").on("mouseenter",(function(e){MSLGlobals.Audio.play("hover")})),$("#homeMainMenuTiles > div.clickable").on("mouseenter",(function(e){MSLGlobals.Audio.play("hover")})),$("#homeMainMenuTiles > div").on("mouseenter",(function(e){var t=$(this).children("video").get(0);void 0!==t&&t.play()})),$("#homeMainMenuTiles > div").on("mouseleave",(function(e){var t=$(this).children("video").get(0);void 0!==t&&t.pause()}))},preload:function(e){},load:r,open:function(){e||r(),a(),o()},close:function(){$("section#MSLAppHome").css("display","none")},setBackgroundColour:function(e){t=e},setBackgroundBlend:function(e){n=e},setCustomBackground:function(e){i=null!==e&&e.length>=16?e:""}}}();MSLAppManager.register(null,MSLAppHome);var MSLAppKaraoke=function(){var e,t,n,i,a=null,o=null;function r(){$("#underlay > #videoBackground").css("backgroundColor","#ca517c"),$("#underlay > #videoBackground").css("mix-blend-mode","color")}function s(){$("body > section").css("display","none"),$("section#MSLAppKaraoke").fadeIn()}function l(e){void 0!==e.selected&&(i=e.selected),void 0!==e.search&&void 0!==t&&(t.search(e.search),$("input.MSLAppKaraokeSearchCtrl").val(e.search),t.filteredItemCount()?o.SetOneHideRestByID("karaokeIndex"):o.SetOneHideRestByID("karaokeNoResults"))}function c(e,o){e=void 0!==e?e:{},(o=void 0!==o&&o)&&(e.search=void 0!==e.search?e.search:""),n=!0,r(),l(e),a.add(""),t&&t.present(i),i=0,s()}return{init:function(){n=!1,i=0,a=new MSLHistory($("section#MSLAppKaraoke")),o=new VisibilityManager($("#karaokeView > div"),!1,{karaokeIndex:!0}),$("input.MSLAppKaraokeSearchCtrl").keypress((function(e){if(13==e.which)return MSLGlobals.Audio.play("button"),MSLAppKaraoke.search($("input.MSLAppKaraokeSearchCtrl").val()),!1})),$("button.MSLAppKaraokeSearchCtrl").click((function(e){return MSLGlobals.Audio.play("button"),MSLAppKaraoke.search($("input.MSLAppKaraokeSearchCtrl").val()),!1})),$.ajax({method:"GET",url:"json/karaoke.php"}).done((function(n,i,a){if(200==a.status){if(0==(n=JSON.parse(n)).error){for(var o=0;o<n.data.length;o++)$li=$(document.createElement("li")),$li.attr("artist",n.data[o].a),$li.attr("song",n.data[o].t),$li.attr("videoid",n.data[o].id),$li.attr("url",n.data[o].src),$li.append($(document.createElement("div")).addClass("albumart").css("background-image","url('"+n.data[o].img+"')")),$li.append($(document.createElement("div")).addClass("duration").addClass("unselectable").text(`${Math.floor(n.data[o].len/60)}:${(n.data[o].len%60).toString().padStart(2,"0")}`)),$li.append($(document.createElement("div")).addClass("track").text(n.data[o].t)),$li.append($(document.createElement("div")).addClass("artist").text(n.data[o].a)),$("#MSLAppKaraoke #songs").append($li);e=new RailMenu($("#MSLAppKaraoke #selector"),{}),t=new RailMenu($("#MSLAppKaraoke #songs"),{attributes:["Artist","Song","VideoID","URL"],activeAttribute:"Song"}),e.settings.onSelect=function(e,n){for(var i=e.$DOM.text().charAt(0).toLowerCase(),a=0;a<t.m_filtered.length;a++){var o=t.m_collection[t.m_filtered[a]][t.settings.activeAttribute].charAt(0).toLowerCase();if(i==o||"#"==i&&parseInt(o)>=0&&parseInt(o)<=9){t.select(t.m_filtered[a],!1,!1),n&&MSLGlobals.sync&&MSLGlobals.sync.send({c:61,value:t.m_filtered[a]});break}}};var r=function(n,i){var a=n[t.settings.activeAttribute].charAt(0).toLowerCase();parseInt(a)>=0&&parseInt(a)<=9&&(a="#");for(var o=0;o<e.m_filtered.length;o++){if(a==e.m_collection[e.m_filtered[o]].$DOM.text().charAt(0).toLowerCase()){e.select(e.m_filtered[o],!1);break}}};t.settings.onPresent=r,t.settings.onSelect=function(e,t){return r(e),t&&MSLGlobals.sync&&MSLGlobals.sync.send({c:61,value:e.$DOM.attr("id")}),!0},t.settings.onClick=function(e,t){MSLAppManager.load("karaokeWatch",{url:e.URL},t)},e.present()}}else console.error("API call for Karaoke data returned HTTP "+a.status)})).fail((function(e){console.error("API call for Karaoke failed with HTTP "+e.status)}))},preload:l,load:c,open:function(){n||c(),r(),s()},close:function(){$("section#MSLAppKaraoke").css("display","none")},back:function(e){if(e=void 0===e||e,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&e)MSLGlobals.Audio.play("denied");else{var n=a.back();null!==n&&(MSLGlobals.Audio.play("back"),e&&MSLGlobals.sync&&MSLGlobals.sync.send({c:60}),t.search(n),t.present(),t.filteredItemCount()?o.SetOneHideRestByID("karaokeIndex"):o.SetOneHideRestByID("karaokeNoResults"),$("input.MSLAppKaraokeSearchCtrl").val(n||""))}},search:function(e,n){n=void 0===n||n,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&n?MSLGlobals.Audio.play("denied"):(n&&MSLGlobals.sync&&MSLGlobals.sync.send({c:62,query:e}),a.add(e),t.search(e),t.present(),t.filteredItemCount()?o.SetOneHideRestByID("karaokeIndex"):o.SetOneHideRestByID("karaokeNoResults"),$("input.MSLAppKaraokeSearchCtrl").val(e))},select:function(e,n){n=void 0===n||n,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&n?MSLGlobals.Audio.play("denied"):t.select(e,!0,n)}}}();MSLAppManager.register("karaoke",MSLAppKaraoke,!0);var MSLAppKaraokeWatch=function(){var e,t,n,i,a;function o(){$("#underlay > #videoBackground").css("backgroundColor","#ca517c")}function r(){$("body > section").css("display","none"),$("section#MSLAppKaraokeWatch").fadeIn()}function s(e){void 0!==e.url&&(n=e.url)}function l(i,a){i=void 0!==i?i:{},a=void 0!==a&&a,t=!0,o(),s(i),e&&e.destroy(),e.init(),e.load("https://gcore.msl.qxy.io/videos/apps/karaoke/"+n+".webm"),r()}return{init:function(){t=!1,n=null,e=new MSLVideoPlayer($("#plyr-karaoke-container"),{mslSync:!0,controlDefinition:'{ "controls": ["play", "current-time", "progress", "mute", "volume"] }'}),i=$("section#MSLAppKaraokeWatch > main > div.fullscreenOverlay"),a=i.children().first(),$(window).blur((function(){i.css("opacity",0)})),$(window).on("mouseout",(function(){i.css("opacity",0)}))},preload:s,load:l,open:function(){t||l(),o(),r()},close:function(){e&&e.destroy(),$("section#MSLAppKaraokeWatch").css("display","none")},onMouseMove:function(e,t){var n=Math.abs(e-512)-a.width()/2,o=Math.abs(t-288)-a.height()/2;n<=0&&o<=0?i.css("opacity",1):(n=1-n.clamp(0,40)/40,o=1-o.clamp(0,40)/40,i.css("opacity",Math.min(n,o)))},passedThroughData:function(t){e.fromMslSync(t)}}}();MSLAppManager.register("karaokeWatch",MSLAppKaraokeWatch,!0);var MSLAppRadio=function(){var e,t,n,i=null,a=["All","Pop","Decades","Rock","Metal","Alternative","International","Electronic","Inspirational","New Age","Jazz","Blues","Classical","Country","Folk","Reggae","Rap","R&B and Urban","Easy Listening","Latin","Soundtracks","Public Radio","Talk","Misc"],o=null,r=null,s={Pop:"https://i.imgur.com/Elaz6cd.png",Decades:"https://i.imgur.com/0dXzsUS.png",Rock:"https://i.imgur.com/q3T665r.png",Metal:"https://i.imgur.com/tMwNRQ2.png",Alternative:"https://i.imgur.com/0OiXWvA.png",International:"https://i.imgur.com/rj8miQi.png",Electronic:"https://i.imgur.com/Da4kbLB.png",Inspirational:"https://i.imgur.com/xtSTbte.png",NewAge:"https://i.imgur.com/wfZJz4U.png",Jazz:"https://i.imgur.com/Q1FHxhT.png",Blues:"https://i.imgur.com/sc5d7xv.png",Classical:"https://i.imgur.com/BPXfOT6.png",Country:"https://i.imgur.com/96Rlhqb.png",Folk:"https://i.imgur.com/tzDf7a5.png",Reggae:"https://i.imgur.com/HIvoDgc.png",Rap:"https://i.imgur.com/LYN3b5A.png",EasyListening:"https://i.imgur.com/v05rh6s.png",Latin:"https://i.imgur.com/IW9VsH9.png",Soundtracks:"https://i.imgur.com/1VGct2f.png",PublicRadio:"https://i.imgur.com/803GYVZ.png",Talk:"https://i.imgur.com/03xAmRm.png",Misc:"https://i.imgur.com/qGTHVfr.png",RNBandUrban:"https://i.imgur.com/T2CmXWX.png"};function l(e){return(e=(e=e.replace(" ","").replace(" ","").replace(" ","")).replace("&","N").replace("&","N").replace("&","N"))in s?s[e]:""}function c(){$("#underlay > #videoBackground").css("backgroundColor","#0094ff"),$("#underlay > #videoBackground").css("mix-blend-mode","color")}function u(){$("body > section").css("display","none"),$("section#MSLAppRadio").fadeIn()}function d(a,r){a=void 0!==a?a:{},(r=void 0!==r&&r)?(o=null,MSLAppRadio.search("")):i.add({q:"",g:"HOME"}),t=!0,c(),n&&e&&(e.present(n),n=0),u()}return{init:function(){t=!1,n=0,i=new MSLHistory($("section#MSLAppRadio")),r=new VisibilityManager($("#radioStationView > div"),!1,{radioGenreList:!0}),$("input.MSLAppRadioSearchCtrl").keypress((function(e){if(13==e.which)return MSLGlobals.Audio.play("button"),MSLAppRadio.search($("input.MSLAppRadioSearchCtrl").val(),o),!1})),$("button.MSLAppRadioSearchCtrl").click((function(e){return MSLGlobals.Audio.play("button"),MSLAppRadio.search($("input.MSLAppRadioSearchCtrl").val(),o),!1})),$(".MSLAppRadioSortCtrl").click((function(e){return MSLGlobals.Audio.play("button"),r.SetOneHideRestByID("radioGenreList"),i.add({q:"",g:"HOME"}),!1}));const s=document.getElementById("radioGenreList");a.forEach((e=>{const t=document.createElement("div"),n=document.createElement("div"),i=document.createElement("h5");i.innerHTML=e,n.classList.add("text"),n.append(i),t.append(n);const a=document.createElement("div");a.classList.add("background"),a.style.backgroundImage="url('"+l(e)+"')",t.append(a),t.addEventListener("click",(function(){MSLGlobals.Audio.play("button"),"All"==e?($(".MSLAppRadioSortCtrl").text("Genres").css("background-image","none"),o=null):($(".MSLAppRadioSortCtrl").text(e).css("background-image","url('"+l(e)+"')"),o=e),MSLAppRadio.search($("input.MSLAppRadioSearchCtrl").val(),o)})),s.append(t)})),$.ajax({method:"GET",url:"json/radioStations.php"}).done((function(t){t=JSON.parse(t);for(var n=0;n<t.data.length;n++)$li=$(document.createElement("li")),$li.attr("station",t.data[n].n),$li.attr("genre",t.data[n].g),$li.attr("subgenre",t.data[n].s?"":t.data[n].s),$li.attr("stationid",t.data[n].id),$li.attr("listeners",t.data[n].l),$li.append($(document.createElement("div")).addClass("listeners").addClass("unselectable").text(t.data[n].l)),$li.append($(document.createElement("div")).addClass("station").text(t.data[n].n)),t.data[n].s?$li.append($(document.createElement("div")).addClass("genre").text(t.data[n].g+", "+t.data[n].s)):$li.append($(document.createElement("div")).addClass("genre").text(t.data[n].g)),$("#MSLAppRadio #songs").append($li);(e=new RailMenu($("#MSLAppRadio #songs"),{attributes:["Station","Genre","Listeners","StationID"],activeAttribute:"Listeners"})).settings.onSelect=function(e,t){if(MSLGlobals.isOwner||!MSLGlobals.isLocked||!t)return t&&MSLGlobals.sync&&MSLGlobals.sync.send({c:121,value:e.$DOM.attr("id")}),!0;MSLGlobals.Audio.play("denied")},e.settings.onClick=function(e,t){!MSLGlobals.isOwner&&MSLGlobals.isLocked&&t?MSLGlobals.Audio.play("denied"):MSLAppManager.load("radioListen",{ID:e.StationID},t)},e.present()}))},preload:function(t){void 0!==t.selected&&(n=t.selected);let i="search"in t?t.search:"",a="type"in t?t.type:null,o=setInterval((function(){void 0!==e&&(MSLAppRadio.search(i,a,!1),clearInterval(o))}),200)},load:d,open:function(){t||d(),c(),u()},close:function(){$("section#MSLAppRadio").css("display","none")},back:function(t){if(t=void 0===t||t,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&t)return void MSLGlobals.Audio.play("denied");var n=i.back();if(null===n)return;MSLGlobals.Audio.play("back"),t&&MSLGlobals.sync&&MSLGlobals.sync.send({c:120});let a=null,s=null;"object"==typeof n&&null!==n?("q"in n&&(a=n.q),"g"in n&&(s=n.g)):a=n.toString(),"HOME"==s?($("input.MSLAppRadioSearchCtrl").val(""),$(".MSLAppRadioSortCtrl").text("Genres").css("background-image","none"),o=null,r.SetOneHideRestByID("radioGenreList")):(r.SetOneHideRestByID("radioStationList"),e.search(a,!0,s),e.present(),$("input.MSLAppRadioSearchCtrl").val(a||""),$(".MSLAppRadioSortCtrl").text(s||"Genres").css("background-image",s?"url('"+l(s)+"')":"none"))},unload:function(){$("input.MSLAppRadioSearchCtrl").val(""),$(".MSLAppRadioSortCtrl").text("Genres").css("background-image","none"),o=null,i.clear(),r.SetOneHideRestByID("radioGenreList")},search:function(t,n,s){if(s=void 0===s||s,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&s)return void MSLGlobals.Audio.play("denied");if(/^((https|http)?:\/\/)(([0-9]{1,3}\.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+\.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z]\.[a-z]{2,6})(:[0-9]{1,4})?((\/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+\/?)$/i.test(t)&&t.length<=255)return $("input.MSLAppRadioSearchCtrl").val(""),void MSLAppManager.load("radioListen",{stream:t},s&&MSLGlobals.sync);if(s&&MSLGlobals.sync&&MSLGlobals.sync.send({c:122,query:t,type:n}),"HOME"==n)MSLGlobals.Audio.play("back"),$("input.MSLAppRadioSearchCtrl").val(""),$(".MSLAppRadioSortCtrl").text("Genres").css("background-image","none"),o=null,i.add({q:"",g:"HOME"}),r.SetOneHideRestByID("radioGenreList");else{let s=a.indexOf(n);o=-1!=s?a[s]:null,i.add({q:t,g:n}),e.search(t,!0,n),e.present(),e.filteredItemCount()?r.SetOneHideRestByID("radioStationList"):r.SetOneHideRestByID("radioStationListNoResults"),$("input.MSLAppRadioSearchCtrl").val(t),$(".MSLAppRadioSortCtrl").text(o||"Genres").css("background-image",o?"url('"+l(o)+"')":"none")}},select:function(t,n){n=void 0===n||n,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&n?MSLGlobals.Audio.play("denied"):e.select(t,!0,n)}}}();MSLAppManager.register("radio",MSLAppRadio,!0);var MSLAppRadioListen=function(){var e,t,n,i,a,o,r,s,l,c,u,d,p,h=null;function m(){s=$("#underlay > video"),l=$("#underlay > video > source"),c=$("#underlay > div#videoBackground"),u=$("body").css("background-image"),d=l.attr("src"),p=s.attr("poster"),$("body").css("background-image","url('../images/bg-wavestream.png')"),s.attr("poster","../images/bg-wavestream.png"),l.attr("src","../images/bg-wavestream.webm"),s[0].load(),s[0].play(),c.hide(),o=$("#MSLAppRadioListen > main > .infoContainer"),r=$("#MSLAppRadioListen > footer > .sliderContainer"),g(".default")}function g(e){o.children(":not("+e+")").attr("hidden",!0),o.children(e).attr("hidden",!1),".default"==e?(s.css("filter","brightness(1.0)"),r.attr("hidden",!1)):(r.attr("hidden",!0),s.css("filter","brightness(0.25)"))}function f(){$("body > section").css("display","none"),$("section#MSLAppRadioListen").fadeIn(),MSLAppRadioListen.displayUI(!0)}function v(o,r){r=void 0!==r&&r,t=void 0!==(o=void 0!==o?o:{}).ID?o.ID:null,a=void 0!==o.stream?o.stream:null,n=!0,m();const s=function(t){g(".default"),e.jPlayer("destroy");let n=Cookies.get("appRadioVolume");void 0===n&&(n=50);var a=Math.log(1),o=(Math.log(100)-a)/99;e.jPlayer({ready:function(){$(this).jPlayer("setMedia",{title:t.name,mp3:t.url}).jPlayer("play")},swfPath:"js",supplied:"mp3",solution:MSLGlobals.HasFlash?"flash":"html",volume:Math.exp(a+o*(n-1))/100,error:function(e){if("e_url"!=e.jPlayer.error.type||t.caught)console.error("jPlayer error:",e.jPlayer.error),g(".error");else{const e=new Promise(((e,n)=>{$.ajax({method:"GET",url:"json/radioStationUrl.php?url="+encodeURIComponent(t.url)}).done((function(i,a,o){200==o.status&&0==(i=JSON.parse(i)).error&&(t.caught=!0,t.url=i.data,s(t),e()),n()})).fail((function(){n()}))}));e.catch((()=>{console.error("URL could not be resolved to a streaming URL."),g(".error")}))}}}),$("#MSLAppRadioListen .slider").slider({range:"min",value:n,min:0,max:100,slide:function(t,n){var i=0;n.value&&(i=Math.exp(a+o*(n.value-1))),e.jPlayer("volume",i/100),Cookies.set("appRadioVolume",n.value,{expires:90})}}),$("#MSLAppRadioListen #station").text(t.name),MSLAppRadioListen.applySongInfo(t.artist,t.album,t.song,t.albumArt),i=setInterval(MSLAppRadioListen.getSongInfo,15e3)};t?$.ajax({method:"GET",url:"json/radioStationInfo.php?id="+encodeURIComponent(t),cache:!1}).done((function(e,t){"success"!=t?s(new Array):0==(e=JSON.parse(e)).error?s(e.data):s(new Array)})):a&&s({name:"Custom Radio Stream",url:a,artist:"",album:"",song:"",albumArt:null}),f()}return{init:function(){n=!1,t=null,a=null,e=$("#MSLAppRadioListen #radioplayer"),h=setTimeout((function(){MSLAppRadioListen.displayUI(!1)}),3e3),$("body").on("mousemove",(function(e){MSLAppRadioListen.displayUI(!0),clearTimeout(h),h=setTimeout((function(){MSLAppRadioListen.displayUI(!1)}),3e3)}))},preload:function(e){void 0!==e.ID&&(t=e.ID),void 0!==e.stream&&(a=e.stream)},load:v,open:function(){n||v(),m(),f()},close:function(){e&&e.jPlayer("destroy"),i&&clearInterval(i),$("section#MSLAppRadioListen").css("display","none"),c.show(),$("body").css("background-image",u),s.attr("poster",p),l.attr("src",d),s.css("filter","brightness(1.0)"),s[0].load(),s[0].play()},applySongInfo:function(e,t,n,i){e=null!=e&&void 0!==e&&e.length?e:"",t=null!=t&&void 0!==t&&t.length?t:"",n=null!=n&&void 0!==n&&n.length?n:"",i=null!=i&&void 0!==i&&n.length?i:null,n.length>=32&&(n=n.substr(0,31)+"..."),$("#MSLAppRadioListen #artist").text(e),$("#MSLAppRadioListen #album").text(t),$("#MSLAppRadioListen #song").text(n),i?$("#MSLAppRadioListen #art").css("background-image","url('"+i+"')"):$("#MSLAppRadioListen #art").css("background-image","url('../images/apps/altai/radio_missing.png')")},getSongInfo:function(){t&&$.ajax({method:"GET",url:"json/radioStationInfo.php?id="+encodeURIComponent(t),cache:!1}).done((function(e,t){const n=JSON.tryParse(e);"success"==t&&n&&0==n.error?MSLAppRadioListen.applySongInfo(n.data.artist,n.data.album,n.data.song,n.data.albumArt):MSLAppRadioListen.applySongInfo(null,null,null,null)}))},setVolume:function(t){e.jPlayer("volume",t),$("#MSLAppRadioListen .slider").slider({value:100*t})},displayUI:function(e){e?$("#MSLAppRadioListen .uiOnMouseActivity").finish().css("display","block"):$("#MSLAppRadioListen .uiOnMouseActivity").fadeOut(800)}}}();MSLAppManager.register("radioListen",MSLAppRadioListen,!0);var MSLAppAltai=function(){var e,t,n,i,a=null;function o(){$("#underlay > #videoBackground").css("backgroundColor","#744321"),$("#underlay > #videoBackground").css("mix-blend-mode","color")}function r(e,t){if(t=void 0===t||t,MSLGlobals.isOwner||!MSLGlobals.isLocked||!t)return i.children().hide(),"ALBUM_ADD_STEP_1"==e?(i.children(".albumAddStep1").show(),$("#MSLAppAltaiInAlbumURL").val(""),void $("#MSLAppAltaiInAlbumURLError").text(MSLGlobals.isOwner?"":"Sorry, only TV owners may add an album.")):"ALBUM_ADD_STEP_2"==e?(i.children(".albumAddStep2").show(),$("#MSLAppAltaiInAlbumName").val(""),$("#MSLAppAltaiAddAlbumPreview").empty(),void $("#MSLAppAltaiInAlbumNameError").empty()):"ALBUM_DELETE"==e?(i.children(".albumDelete").show(),void $("#MSLAppAltaiAlbumDeleteError").removeClass("ok").text("")):"ALBUM_REFRESH"==e?(i.children(".albumRefresh").show(),void $("#MSLAppAltaiAlbumRefreshError").removeClass("ok").text("")):void(n.itemCount()?i.children(".albumList").show():i.children(".albumListEmpty").show());MSLGlobals.Audio.play("denied")}function s(){$("body > section").css("display","none"),$("section#MSLAppAltai").fadeIn(),$("#MSLAppAltai > header > div.navBack").addClass("disabled"),r(null,!1)}function l(e){void 0!==e.selected&&(t=e.selected),void 0!==e.search&&(n.search(e.search),$("input.MSLAppAltaiSearchCtrl").val(e.search))}function c(i,a){i=void 0!==i?i:{},a=void 0!==a&&a,e=!0,o(),l(i),function(e){e=void 0!==e?e:0,n.clear(),$.ajax({method:"GET",url:"json/altaiFetchAlbums.php?uuid="+MSLGlobals.uuid}).done((function(t){if(0==(t=JSON.parse(t)).error){for(var i=0;i<t.data.length;i++){var a=$(document.createElement("li"));a.attr("albumid",t.data[i].id),a.attr("albumname",t.data[i].name);var o=$(document.createElement("div"));if(o.addClass("options"),MSLGlobals.isOwner){var s=$(document.createElement("div"));s.addClass("refresh"),s.attr("albumid",t.data[i].id),s.attr("onclick","$('#MSLAppAltaiRefreshAlbumID').val( $(this).attr( 'albumid' ) ); MSLAppAltai.showPage( 'ALBUM_REFRESH', false ); event.stopPropagation(); return false;"),o.append(s);var l=$(document.createElement("div"));l.addClass("delete"),l.attr("albumid",t.data[i].id),l.attr("onclick","$('#MSLAppAltaiDeleteAlbumID').val( $(this).attr( 'albumid' ) ); MSLAppAltai.showPage( 'ALBUM_DELETE', false ); event.stopPropagation(); return false;"),o.append(l)}if(t.data[i].pictureCount>0){var c=$(document.createElement("div"));c.addClass("pictureCount"),c.text(t.data[i].pictureCount),o.append(c)}if(t.data[i].videoCount>0){var u=$(document.createElement("div"));u.addClass("videoCount"),u.text(t.data[i].videoCount),o.append(u)}if(t.data[i].songCount>0){var d=$(document.createElement("div"));d.addClass("songCount"),d.text(t.data[i].songCount),o.append(d)}a.append(o);var p=$(document.createElement("div"));p.addClass("album"),p.text(t.data[i].name),a.append(p);var h=$(document.createElement("div"));h.addClass("service"),h.text(t.data[i].service),a.append(h),n.addItem(a)}n.present(e),r(null,!1)}}))}(t),t=0,s()}return{init:function(){e=!1,t=0,a=new MSLHistory($("section#MSLAppAltai")),i=$("#MSLAppAltai > main"),$(".MSLAppAltaiAddAlbum").click((function(e){MSLAppAltai.showPage("ALBUM_ADD_STEP_1",!1)})),$("#MSLAppAltaiInAlbumURL").on("input propertychange paste",(function(e){var t,n=document.createElement("a"),i=$(this).val();if("http"!=i.substr(0,4)&&(i="http://"+i),n.href=i,"imgur.com"==n.hostname)return-1!=(r=(t=n.pathname.split("/")).indexOf("a"))&&void 0!==t[r+1]&&t[r+1].length>=1?void $("#MSLAppAltaiInAlbumURLError").addClass("ok").text("Imgur recognized, press SUBMIT to add this album."):void $("#MSLAppAltaiInAlbumURLError").removeClass("ok").text("Imgur recognized, but wrong album URL format. ( Example: http://imgur.com/a/9GmL3 )");if("www.flickr.com"==n.hostname)return(t=n.pathname.split("/").filter(Boolean)).length>=4&&!isNaN(t[t.length-1])?void $("#MSLAppAltaiInAlbumURLError").addClass("ok").text("Flickr recognized, press SUBMIT to add this album."):void $("#MSLAppAltaiInAlbumURLError").removeClass("ok").text("Flickr recognized, but wrong album URL format. ( Example: https://www.flickr.com/photos/flickr/galleries/72157675668930140 )");if("drive.google.com"==n.hostname){var a=!1,o=n.search.substr(1);o=o.split("&");for(var r=0;r<o.length;r++){if("id"==o[0].split("=")[0]){a=!0;break}}a||(a=-1!=n.pathname.indexOf("drive/folders/")),a?$("#MSLAppAltaiInAlbumURLError").addClass("ok").text("Google Drive recognized, press SUBMIT to add this album."):$("#MSLAppAltaiInAlbumURLError").removeClass("ok").text("Google Drive recognized, but wrong album URL format. ( Example: https://drive.google.com/open?id=0BaREOsNGVRYBbeA7d2tSqFhTRms )")}else if("www.dropbox.com"==n.hostname){(a=i.indexOf("dl=0")>=0)?$("#MSLAppAltaiInAlbumURLError").addClass("ok").text("DropBox recognized, press SUBMIT to add this album. This may take a couple of seconds."):$("#MSLAppAltaiInAlbumURLError").removeClass("ok").text("DropBox recognized, but wrong album URL format. ( Example: https://www.dropbox.com/sh/0BaREOsNGVRYBbe/AAD-GPCB_VRYBbeA7d2tSqFhT?dl=0 )")}})),$("#MSLAppAltai #cancel").click((function(e){MSLAppAltai.showPage(null,!1)})),$("#MSLAppAltai .albumAddStep1 #submit").click((function(e){$("#MSLAppAltaiInAlbumURLError").addClass("ok").text("Getting album images."),$.ajax({method:"POST",url:"json/altaiCreateNewAlbum.php",data:{uuid:MSLGlobals.uuid,url:encodeURIComponent($("#MSLAppAltaiInAlbumURL").val())}}).done((function(e){if(0==(e=JSON.parse(e)).error){$("#MSLAppAltaiInAlbumURLError").removeClass("ok").text(""),$("#MSLAppAltaiInAlbumID").val(e.data.album);var t,n,i=$("#MSLAppAltaiAddAlbumPreview"),a=e.data.images.length;for(t=0;t<a&&t<4;t++)(n=$(document.createElement("div"))).css("background-image","url('"+e.data.images[t]+"')"),i.append(n);if(t<a){var o=$(document.createElement("div"));o.addClass("overlay"),o.text("+"+(a-t)),n.append(o)}MSLAppAltai.showPage("ALBUM_ADD_STEP_2",!1)}else{var r="Unknown error ("+e.error+")";switch(e.error){case 401:r="Only the owner may add images";break;case 406:r="Album does not exist"}$("#MSLAppAltaiInAlbumURLError").removeClass("ok").text(r)}}))})),$("#MSLAppAltai .albumAddStep2 #submit").click((function(e){$("#MSLAppAltaiInAlbumNameError").addClass("ok").text("Saving album."),$.ajax({method:"POST",url:"json/altaiEditAlbumName.php",data:{uuid:MSLGlobals.uuid,album:$("#MSLAppAltaiInAlbumID").val(),name:encodeURIComponent($("#MSLAppAltaiInAlbumName").val())}}).done((function(e){0==(e=JSON.parse(e)).error?($("#MSLAppAltaiInAlbumNameError").addClass("ok").text("Album has been added!"),MSLAppManager.load("altai")):$("#MSLAppAltaiInAlbumNameError").removeClass("ok").text("Couldn't save album: did you enter a valid name?")}))})),$("#MSLAppAltai .albumDelete #submit").click((function(e){$("#MSLAppAltaiAlbumDeleteError").addClass("ok").text("Deleting album."),$.ajax({method:"POST",url:"json/altaiDeleteAlbum.php",data:{uuid:MSLGlobals.uuid,album:$("#MSLAppAltaiDeleteAlbumID").val()}}).done((function(e){0==(e=JSON.parse(e)).error?($("#MSLAppAltaiAlbumDeleteError").addClass("ok").text("Album has been deleted."),MSLAppManager.load("altai")):$("#MSLAppAltaiAlbumDeleteError").removeClass("ok").text("An error occured while attempting to delete the album.")}))})),$("#MSLAppAltai .albumRefresh #submit").click((function(e){$("#MSLAppAltaiAlbumRefreshError").addClass("ok").text("Refreshing album."),$.ajax({method:"POST",url:"json/altaiRefreshAlbum.php",data:{uuid:MSLGlobals.uuid,album:$("#MSLAppAltaiRefreshAlbumID").val()}}).done((function(e){0==(e=JSON.parse(e)).error?($("#MSLAppAltaiAlbumRefreshError").addClass("ok").text("Album has been refreshed."),MSLAppManager.load("altai")):$("#MSLAppAltaiAlbumRefreshError").removeClass("ok").text("An error occured while attempting to refresh the album.")}))})),(n=new RailMenu($("#MSLAppAltai #albums"),{attributes:["albumid","albumname"]})).settings.onSelect=function(e,t){return t&&MSLGlobals.sync&&MSLGlobals.sync.send({c:40,value:e.$DOM.attr("id")}),!0},n.settings.onClick=function(e,t){MSLAppManager.load("altaiIndex",{ID:e.albumid,Name:e.albumname},t)},$("input.MSLAppAltaiSearchCtrl").keypress((function(e){if(13==e.which)return MSLAppAltai.search($("input.MSLAppAltaiSearchCtrl").val()),!1})),$("button.MSLAppAltaiSearchCtrl").click((function(e){return MSLAppAltai.search($("input.MSLAppAltaiSearchCtrl").val()),!1}))},preload:l,load:c,open:function(){e||c(),o(),s()},close:function(){$("section#MSLAppAltai").css("display","none")},showPage:r,back:function(){},search:function(e,t){t=void 0===t||t,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&t?MSLGlobals.Audio.play("denied"):(t&&MSLGlobals.sync&&MSLGlobals.sync.send({c:41,query:e}),a.add(e),n.search(e),n.present(),$("input.MSLAppAltaiSearchCtrl").val(e))},select:function(e,t){t=void 0===t||t,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&t?MSLGlobals.Audio.play("denied"):n.select(e,!0,t)}}}();MSLAppManager.register("altai",MSLAppAltai,!0);var MSLAppAltaiIndex=function(){var e=!1,t=new SimpleGalleryPages("MSLAppAltaiIndex","AltaiAlbumContent",48,4,3),n=null,i="";function a(){$("#underlay > #videoBackground").css("backgroundColor","#744321")}function o(){$("#MSLAppAltaiIndexTitle").text(i),$("body > section").css("display","none"),$("section#MSLAppAltaiIndex").fadeIn()}function r(e){void 0!==e.ID&&(n=e.ID),void 0!==e.albumID&&(n=e.albumID),void 0!==e.Name&&(i=e.Name)}function s(i,s){i=void 0!==i?i:{},s=void 0!==s&&s,e=!0,a(),r(i),function(e){t.clear(),$.ajax({method:"GET",url:"json/altaiShowAlbum.php?uuid="+MSLGlobals.uuid+"&album="+e,cache:!0}).done((function(n,i,a){if(200==a.status&&0==(n=JSON.parse(n)).error){for(var o=0;o<n.data.mediaList.length;o++)new Promise(((i,a)=>{const r={isVideo:-1!=n.data.mediaList[o].mimeType.indexOf("video"),isAudio:-1!=n.data.mediaList[o].mimeType.indexOf("audio"),isImage:-1!=n.data.mediaList[o].mimeType.indexOf("image"),domContainer:document.createElement("div"),fallbackThumb:null,data:{...n.data.mediaList[o]}};if(r.isVideo?r.fallbackThumb="url('/images/thumb-video.png')":r.isAudio?r.fallbackThumb="url('/images/thumb-audio.png')":r.isImage&&(r.fallbackThumb="url('/images/thumb-image.png')"),r.domContainer.className="picture",r.domContainer.setAttribute("index",o),r.domContainer.addEventListener("click",(function(){MSLAppManager.load("altaiView",{albumID:parseInt(e),index:parseInt($(this).attr("index")),autoplay:!1})})),r.domContainer.addEventListener("mouseenter",(()=>{MSLGlobals.Audio.play("hover")})),t.add($(r.domContainer)),n.data.mediaList[o].thumbnail&&"/"!=n.data.mediaList[o].thumbnail.charAt(0)){const e=new Image;return e.addEventListener("load",(()=>{i(r)})),e.addEventListener("error",(()=>{a(r)})),void(e.src=n.data.mediaList[o].thumbnail)}if(r.isImage){const e=new Image;return e.addEventListener("load",(()=>{i(r)})),e.addEventListener("error",(()=>{a(r)})),r.data.thumbnail=n.data.mediaList[o].source,void(e.src=n.data.mediaList[o].source)}a(r)})).then((e=>{if(e.domContainer.style.backgroundImage="url('"+e.data.thumbnail+"')",e.domContainer.style.backgroundColor="#000",e.isVideo){const t=document.createElement("div");t.className="video",e.domContainer.appendChild(t)}})).catch((e=>{const t=document.createElement("p");t.innerText=e.data.name.length<42?e.data.name:e.data.name.substr(0,42)+" ...",e.domContainer.appendChild(t),e.fallbackThumb?e.domContainer.style.backgroundImage=e.fallbackThumb:(e.domContainer.style.backgroundColor="#000",e.domContainer.style.color="#fff")}));t.goToPage(1)}}))}(n),o()}return{init:function(){$("#MSLAppAltaiIndex #pageControlPrev").click((function(){t.prevPage()})),$("#MSLAppAltaiIndex #pageControlNext").click((function(){t.nextPage()})),$("#MSLAppAltaiIndex .MSLAppAltaiPlaySlideshow").click((function(){MSLAppManager.load("altaiView",{albumID:parseInt(n),index:0,autoplay:!0})}))},preload:r,load:s,open:function(){e||s(),a(),o()},close:function(){$("section#MSLAppAltaiIndex").css("display","none")},back:function(){},page:t.goToPage}}();MSLAppManager.register("altaiIndex",MSLAppAltaiIndex,!0);class SongInfo{constructor(e,t){let n=t.indexOf(".",-4);if(this.$ctx=e,this.ticker=null,this.artist=null,this.song=null,this.dj=null,this.infoCount=1,-1!=n?(this.fullName=t.substr(0,n),this.ext=t.substr(n,1)):(this.fullName=t,this.ext=null),n=this.fullName.indexOf(" - "),-1!=n?(this.artist=this.fullName.substr(0,n),this.song=this.fullName.substr(n+3),this.infoCount=2):(n=this.fullName.indexOf("-"),-1!=n&&(this.artist=this.fullName.substr(0,n),this.song=this.fullName.substr(n+1),this.infoCount=2)),null!=this.song&&(n=this.song.indexOf("("),-1!=n)){let e=this.song.indexOf(")",n);-1!=e&&(this.dj=this.song.substr(n+1,e-(n+1)),this.song=this.song.substr(0,n),this.infoCount=3)}}Render(){const e=$(document.createElement("p")),t=$(document.createElement("p")),n=$(document.createElement("p"));switch(this.infoCount){case 1:e.addClass("fullname"),e.text(this.fullName),this.$ctx.append(e);break;case 2:e.addClass("artist"),t.addClass("song"),e.text(this.artist),t.text(this.song),this.$ctx.append(e),this.$ctx.append(t);break;case 3:e.addClass("artist"),t.addClass("song"),n.addClass("dj"),e.text(this.artist),t.text(this.song),n.text(this.dj),this.$ctx.append(e),this.$ctx.append(t),this.$ctx.append(n)}}}var MSLAppAltaiView=function(){var e,t,n,i,a,o,r,s,l=!1,c=null,u=0,d=!1,p=new Array,h=0,m=null,g=null,f=null;function v(e){(e=function(e){return e<0?p.length-2-e:e%p.length}(e),-1==p[e].mimeType.indexOf("video")&&-1==p[e].mimeType.indexOf("audio"))&&((new Image).src=p[e].url)}function b(e,t){const n=$("#AltaiError"),i=$("#AltaiPlayer");n.find("h1").first().text(e),n.find("p").first().text(t),i.hide(0),n.show(1)}function y(e,t,i){$("#altaiSongInfo").stop(!0,!0).remove(),$("#AltaiError").hide(),$("#AltaiPlayer").show();var a=e<h?-1:e>h?1:0;if(t=void 0===t||t,i=void 0!==i?i:300,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&t)MSLGlobals.Audio.play("denied");else if(!(isNaN(e)||e>=p.length)){h=e,t&&MSLGlobals.sync&&MSLGlobals.sync.send({c:46,value:e}),f&&(f.destroy(),f=null);var o=$(document.createElement("div"));m.append(o);var r=-1!=p[e].mimeType.indexOf("video"),s=-1!=p[e].mimeType.indexOf("audio"),l=!r&&!s;if("video/avi"!=p[e].mimeType)if("video/x-ms-asf"!=p[e].mimeType)if("audio/x-ms-wma"!=p[e].mimeType){if(r||s){n[0].play();const t=document.createElement("div");t.id="videoPlayerAltai",t.className="MSLVideoPlayer",o.append(t);p[e].url;let i="video",a=p[e].mimeType;switch(p[e].mimeType){case"video/mpeg":i="video","m4v",{m4v:p[e].url},a="video/mp4";break;case"video/webm":"webmv",{webmv:p[e].url};break;case"video/ogg":"ogv",{ogv:p[e].url};break;case"audio/mpeg":i="audio","mp3",{mp3:p[e].url};break;case"audio/m4a":i="audio","m4a",{m4a:p[e].url};break;case"audio/wav":i="audio","wav",{wav:p[e].url};break;case"audio/flac":i="audio","flac",{flac:p[e].url}}d&&clearInterval(g),(f=new MSLVideoPlayer($(t),{mslSync:!0,preload:"auto",controlDefinition:'{ "controls": ["play", "progress", "current-time", "duration", "mute", "volume"] }',callbacks:{onNext:()=>{$("#altaiSongInfo").stop(!0,!0).fadeOut(500),d&&(g=setInterval((function(){y(h+1,!1,800)}),9e3)),y(h+1,!1,800)},onPrev:()=>{$("#altaiSongInfo").stop(!0,!0).fadeOut(500),d&&(g=setInterval((function(){y(h+1,!1,800)}),9e3)),y(h-1,!1,800)}}})).init(),f.player.hasPlayed=!1,f.loadDefault(p[e].url,i,a),p.length>1&&f.injectPlaylistControls(),f.player.on("ready",(()=>{$("#altaiSongInfo").stop(!0,!0).remove()})),f.player.on("playing",(()=>{if(!f.player.hasPlayed&&($("#MSLAppAltaiView #messageLoading").css("display","none"),s)){var t=$(document.createElement("div"));t.attr("id","altaiSongInfo"),t.css("display","block"),t.hide();new SongInfo(t,p[e].name).Render(),$("#MSLAppAltaiView > main").append(t),t.stop(!0,!0).fadeIn(2500)}})),f.player.on("ended",(()=>{$("#altaiSongInfo").stop(!0,!0).fadeOut(500),d&&(g=setInterval((function(){y(h+1,!1,800)}),9e3),y(h+1,!1,800))})),f.player.on("error",(e=>{b("Media could not be played","Your download quota on the host may have been exceeded."),$("#AltaiPlayerControls").show(),n[0].play(),n.show()})),$("#AltaiPlayerControls").hide()}else o.css("background-image","url('"+p[e].url+"')"),$("#AltaiPlayerControls").show();switch(r||l?(n[0].pause(),n.hide()):(n[0].play(),n.show()),o.fadeIn(i,(function(){m.children().length>1&&m.children().first().remove()})),a){case-1:v(e-1);break;case 1:v(e+1);break;case 0:v(e-1),v(e+1)}}else b("AUDIO FORMAT NOT SUPPORTED","This file type (.wma) is not supported by SecondLife media. Compatible options are mp3, ogg and webm.");else b("VIDEO FORMAT NOT SUPPORTED","This file type (.wmv) is not supported by SecondLife media. Compatible options are mp4, webm and ogg.");else b("VIDEO FORMAT NOT SUPPORTED","This file type (.avi) is not supported by SecondLife media. Compatible options are mp4, webm and ogg.")}}function S(){y(h+1,!0)}function w(){y(h-1,!0)}function L(){$("#underlay > #videoBackground").css("background-color","#000000"),n=$("#underlay > video"),i=$("#underlay > video > source"),a=$("#underlay > div#videoBackground"),o=$("body").css("background-image"),r=i.attr("src"),s=n.attr("poster"),$("body").css("background-image","url('../images/bg-wavestream.png')"),n.attr("poster","../images/bg-wavestream.png"),i.attr("src","../images/bg-wavestream.webm"),n[0].load(),n[0].play(),a.hide()}function M(){$("body > section").css("display","none"),$("section#MSLAppAltaiView").fadeIn()}function k(e){void 0!==e.albumID&&(c=parseInt(e.albumID)),void 0!==e.index&&(u=parseInt(e.index)),void 0!==e.autoplay&&(d=!!+e.autoplay)}function A(e,t){e=void 0!==e?e:{},t=void 0!==t&&t,l=!0,L(),k(e),p=new Array,$.ajax({method:"GET",url:"json/altaiShowAlbum.php?uuid="+MSLGlobals.uuid+"&album="+c,cache:!0}).done((function(e){if(0==(e=JSON.parse(e)).error)for(var t=0;t<e.data.mediaList.length;t++)p.push({url:e.data.mediaList[t].source,mimeType:e.data.mediaList[t].mimeType,name:e.data.mediaList[t].name});MSLAppAltaiView.loadImage(u,!1)})),d&&(clearInterval(g),g=setInterval((function(){y(h+1,!1,800)}),9e3)),M()}return{init:function(){m=$("#AltaiPlayer"),$("#AltaiPlayerControls .prev").click((function(){w()})),$("#AltaiPlayerControls .next").click((function(){S()})),e=$("section#MSLAppAltaiView > main > div.fullscreenOverlay"),t=e.children().first(),$(window).blur((function(){e.css("opacity",0)})),$(window).on("mouseout",(function(){e.css("opacity",0)}))},preload:k,load:A,open:function(){l||A(),L(),M()},close:function(){$("section#MSLAppAltaiView").css("display","none"),a.show(),$("body").css("background-image",o),n.attr("poster",s),i.attr("src",r),n[0].load(),n[0].play(),n.show(),f&&(f.destroy(),f=null),g&&(clearInterval(g),g=null),m.children().remove()},nextImage:S,prevImage:w,onMouseMove:function(n,i){var a=Math.abs(n-512)-t.width()/2,o=Math.abs(i-288)-t.height()/2;a<=0&&o<=0?e.css("opacity",1):(a=1-a.clamp(0,40)/40,o=1-o.clamp(0,40)/40,e.css("opacity",Math.min(a,o)))},back:function(){},loadImage:y,passedThroughData:function(e){f.fromMslSync(e)}}}();MSLAppManager.register("altaiView",MSLAppAltaiView,!0);var MSLAppYoutube=function(){var e,t,n,i=new ActionLimiter(3,30),a=null,o=new Array,r=new Array,s="",l=0,c=3,u=0;new Array;function d(e,t,i,a){e=void 0===e?"":e,t=void 0===t?0:parseInt(t),a=void 0===a?0:a,s=e,l=t,c=i=void 0===i?1:i,function(){if(o.length){var e=o[o.length-1];if(e.search==s&&e.category==l)return}o.push({search:s,category:l}),h()}(),-1!=t?($("#MSLAppYoutubeSearchTypeCtrl").attr("value",i),$.ajax({method:"GET",url:"json/youtubeSearch.php?q="+encodeURIComponent(e)+"&c="+t+"&t="+i+"&uuid="+MSLGlobals.uuid}).done((function(e){var t=JSON.parse(e),i=t.data.results,o=t.data.favorites;(A=$("section#MSLAppYoutube > main > div.videoResults")).empty();var s,l=i.length;o.length;n=1,u=0;for(var c=0;c<l;c++){var d=Math.floor(c/8),h=c%4;c%8==0&&(u++,(s=$(document.createElement("div"))).attr("id","page-"+d),s.addClass("page"),d>0&&s.css("display","none"),A.append(s));var m=$(document.createElement("div")),g=$(document.createElement("div")),f=$(document.createElement("div")),v=$(document.createElement("div")),b=$(document.createElement("p")),y=$(document.createElement("p")),S=$(document.createElement("p"));if(v.append(y),v.append(S),f.append(b),m.append(g),m.append(f),m.append(v),m.addClass("youtubeVideoResult"),m.addClass("videoResult"),f.addClass("title"),v.addClass("statistics"),g.css("background-image","url("+i[c].thumbnail+")"),g.addClass("thumbnail"),y.text(i[c].channel),S.text(i[c].published),i[c].title=i[c].title.replace(/(&#39;)/g,"'"),i[c].title.length>95){i[c].title=i[c].title.substr(0,88);var w=i[c].title.lastIndexOf(" ");i[c].title=-1!=w?i[c].title.substr(0,w)+" [...]":i[c].title+" [...]"}if(b.text(i[c].title),"playlist"==i[c].type){var L=$(document.createElement("div"));if(L.addClass("thumbnailTextOverlay"),L.text("Playlist"),m.on("mouseenter",(function(e){MSLGlobals.Audio.play("hover")})),g.append(L),MSLGlobals.isOwner)(k=$(document.createElement("div"))).addClass("fav"),null!=o.find((function(e){return e==i[c].id}))&&k.addClass("on"),(M=$(document.createElement("div"))).addClass("icon"),k.bind("click",{videoID:i[c].id,thumbnail:i[c].thumbnail,title:i[c].title,channel:i[c].channel,published:i[c].publishedRaw},(function(e){return $this=$(this),$.post("json/youtubeFavourite.php",{uuid:MSLGlobals.uuid,playlistID:e.data.videoID,thumbnail:e.data.thumbnail,title:e.data.title,channel:e.data.channel,published:e.data.published},(function(e,t){0==(e=JSON.parse(e)).error&&(e.data?$this.addClass("on"):$this.removeClass("on"))})),e.stopPropagation(),!1})),M.append(k),g.append(M);m.attr("onclick","MSLAppManager.load( 'youtubeWatch', {playlistID: '"+i[c].id+"'});")}else{var M;if(m.bind("click",{videoID:i[c].id},(function(e){MSLAppManager.load("youtubeWatch",{videoID:e.data.videoID})})),m.on("mouseenter",(function(e){MSLGlobals.Audio.play("hover")})),MSLGlobals.isOwner)(k=$(document.createElement("div"))).addClass("fav"),null!=o.find((function(e){return e==i[c].id}))&&k.addClass("on"),(M=$(document.createElement("div"))).addClass("icon"),k.bind("click",{videoID:i[c].id,thumbnail:i[c].thumbnail,title:i[c].title,channel:i[c].channel,published:i[c].publishedRaw},(function(e){return $this=$(this),$.post("json/youtubeFavourite.php",{uuid:MSLGlobals.uuid,videoID:e.data.videoID,thumbnail:e.data.thumbnail,title:e.data.title,channel:e.data.channel,published:e.data.published},(function(e,t){0==(e=JSON.parse(e)).error&&(e.data?$this.addClass("on"):$this.removeClass("on"))})),e.stopPropagation(),!1})),M.append(k),g.append(M)}3==h&&m.addClass("lastInRow"),s.append(m),p(),$("#MSLAppYoutube #currentPageNum").text(n),$("#MSLAppYoutube #totalPageNum").text(u)}var k,A=$("section#MSLAppYoutube > main > ul.categoryResults"),C=r.length;(k=$(document.createElement("li"))).addClass("fav"),k.text("My Favorites"),k.click((function(){MSLAppYoutube.category(-1)})),A.empty(),A.append(k),$cat=$(document.createElement("li")),$cat.text("All"),$cat.attr("onclick","MSLAppYoutube.category(0)"),A.append($cat);for(c=0;c<C;c++)$cat=$(document.createElement("li")),0!=r[c].id&&($cat.text(r[c].title),$cat.attr("onclick","MSLAppYoutube.category("+r[c].id+")"),A.append($cat));MSLAppYoutube.page(a)})).fail((e=>{var t=$("section#MSLAppYoutube > main > div.videoResults");t.empty(),"quotaExceeded"==e.responseText?($error=$(document.createElement("div")),$error.addClass("errorMessage"),$error.html("<p>YouTube's API is currently overloaded, please try again later.</p><p>You may still enter a video's URL in the search bar above to watch through this applet. Alternatively, you may use the Web Browser from the main menu to manually head over to YouTube's website.</p>"),t.append($error)):($error=$(document.createElement("div")),$error.addClass("errorMessage"),$error.html("<p>An error occurred while using YouTube's API. Please try again later.</p><p>You may still enter a video's URL in the search bar above to watch through this applet. Alternatively, you may use the Web Browser from the main menu to manually head over to YouTube's website.</p>"),t.append($error))}))):function(e,t,i){e=void 0===e?"":e,t=void 0===t?0:parseInt(t),i=void 0===i?0:i,$.ajax({method:"GET",url:"json/youtubeSearchFavs.php?uuid="+MSLGlobals.uuid+"&q="+encodeURIComponent(e),cache:!1}).done((function(t){if(0==(t=JSON.parse(t)).error){var i,a=t.data,o=a.length;(T=$("section#MSLAppYoutube > main > div.videoResults")).empty(),n=1,u=0;for(var s=0;s<o+1;s++){var l=Math.floor(s/8),c=s%4;if(s%8==0&&(u++,(i=$(document.createElement("div"))).attr("id","page-"+l),i.addClass("page"),l>0&&i.css("display","none"),T.append(i)),0!=s){w=$(document.createElement("div"));var d=$(document.createElement("div")),h=$(document.createElement("div")),m=$(document.createElement("div")),g=$(document.createElement("p")),f=$(document.createElement("p")),v=$(document.createElement("p"));if(m.append(f),m.append(v),h.append(g),w.append(d),w.append(h),w.append(m),w.addClass("youtubeVideoResult"),w.addClass("videoResult"),h.addClass("title"),m.addClass("statistics"),d.css("background-image","url("+a[s-1].thumbnail+")"),d.addClass("thumbnail"),f.text(a[s-1].channel),v.text(a[s-1].published),a[s-1].title=a[s-1].title.replace(/(&#39;)/g,"'"),a[s-1].title.length>95){a[s-1].title=a[s-1].title.substr(0,88);var b=a[s-1].title.lastIndexOf(" ");a[s-1].title=-1!=b?a[s-1].title.substr(0,b)+" [...]":a[s-1].title+" [...]"}if(g.text(a[s-1].title),a[s-1].id.length>30){var y=$(document.createElement("div"));y.addClass("thumbnailTextOverlay"),y.text("Playlist"),w.on("mouseenter",(function(e){MSLGlobals.Audio.play("hover")})),d.append(y),w.attr("onclick","MSLAppManager.load( 'youtubeWatch', {playlistID: '"+a[s-1].id+"'});")}else w.bind("click",{videoID:a[s-1].id},(function(e){MSLAppManager.load("youtubeWatch",{videoID:e.data.videoID})}));if(MSLGlobals.isOwner){(x=$(document.createElement("div"))).addClass("fav").addClass("on");var S=$(document.createElement("div"));S.addClass("icon"),x.bind("click",{videoID:a[s-1].id},(function(e){return $this=$(this),e.data.videoID.length<30?$.post("json/youtubeFavourite.php",{uuid:MSLGlobals.uuid,videoID:e.data.videoID,forceRemove:!0},(function(e,t){0==(e=JSON.parse(e)).error&&(e.data?$this.addClass("on"):$this.removeClass("on"))})):$.post("json/youtubeFavourite.php",{uuid:MSLGlobals.uuid,playlistID:e.data.videoID,forceRemove:!0},(function(e,t){0==(e=JSON.parse(e)).error&&(e.data?$this.addClass("on"):$this.removeClass("on"))})),e.stopPropagation(),!1})),S.append(x),d.append(S)}3==c&&w.addClass("lastInRow"),i.append(w),p(),$("#MSLAppYoutube #currentPageNum").text(n),$("#MSLAppYoutube #totalPageNum").text(u)}else{var w=$(document.createElement("div")),L=$(document.createElement("h1")),M=$(document.createElement("div")),k=$(document.createElement("div")),A=$(document.createElement("p")),C=$(document.createElement("p"));w.addClass("playall").addClass("videoResult"),M.addClass("image"),k.addClass("stats"),C.addClass("small");var j=e.length?e:"Favorites";L.text("Play all"),A.html("&quot;"+j+"&quot;");let t=0;for(var E=0;E<o;E++)a[E].id.length<30&&++t;C.text(t+" Videos"),w.bind("click",{videoList:a,videoListLength:o},(function(e){for(var t=new Array,n=0;n<o;n++)a[n].id.length<30&&t.push(a[n].id);t=t.join(","),MSLAppManager.load("youtubeWatch",{videoID:t})})),k.append(A),k.append(C),w.append(L),w.append(M),w.append(k),i.append(w)}}var x,T=$("section#MSLAppYoutube > main > ul.categoryResults"),I=r.length;for((x=$(document.createElement("li"))).addClass("fav"),x.text("My Favorites"),x.click((function(){MSLAppYoutube.category(-1)})),T.empty(),T.append(x),$cat=$(document.createElement("li")),$cat.text("All"),$cat.attr("onclick","MSLAppYoutube.category(0)"),T.append($cat),s=0;s<I;s++)$cat=$(document.createElement("li")),0!=r[s].id&&($cat.text(r[s].title),$cat.attr("onclick","MSLAppYoutube.category("+r[s].id+")"),T.append($cat));MSLAppYoutube.page(0)}}))}(e,t,a)}function p(){n==u?$("#MSLAppYoutube #pageControlNext").removeClass("active"):$("#MSLAppYoutube #pageControlNext").addClass("active"),1==n?$("#MSLAppYoutube #pageControlPrev").removeClass("active"):$("#MSLAppYoutube #pageControlPrev").addClass("active")}function h(){var e=$("#MSLAppYoutube > header > div.navBack");o.length>1?(e.removeClass("disabled"),e.css("cursor","pointer")):(e.addClass("disabled"),e.css("cursor","auto"))}function m(e,t){(e=void 0!==e?e:1)<1&&(e=1),e>u&&(e=u),(t=void 0===t||t)&&MSLGlobals.sync&&MSLGlobals.sync.send({c:81,value:e}),n=e,p(),$("#MSLAppYoutube .page").css("display","none"),$("#MSLAppYoutube #page-"+(e-1)).fadeIn(),$("#MSLAppYoutube #currentPageNum").text(e)}function g(){$("#underlay > #videoBackground").css("backgroundColor","#960000"),$("#underlay > #videoBackground").css("mix-blend-mode","color")}function f(){$("body > section").css("display","none"),$("section#MSLAppYoutube").fadeIn()}function v(e){void 0!==e.page&&(t=e.page),void 0!==e.search&&(s=e.search),void 0!==e.category&&(l=e.category),void 0!==e.history&&(o=e.history)}function b(n,i){n=void 0!==n?n:{},(i=void 0!==i&&i)&&(n.search=void 0!==n.search?n.search:"",n.category=void 0!==n.category?n.category:0,n.type=void 0!==n.type?n.type:1),e=!0,g(),v(n);var a=void 0!==n.search&&n.search,o=void 0!==n.category&&n.category,r=void 0!==n.type?n.type:1;0==u?(d(a=!1!==a?a:s,o=!1!==o?o:l,r,t),t=null):!1===a&&!1===o||(d(a=!1!==a?a:"",o=!1!==o?o:0,r,t),t=null),$("#MSLAppYoutubeSearchInputCtrl").val(s),y(l),h(),f()}function y(e){if(-1!=(e=+e||0))if(0!=e){for(var t=r.length;t--;)if(r[t].id==e){$("#MSLAppYoutube > header > div.categories").text(r[t].title);break}}else $("#MSLAppYoutube > header > div.categories").text("Favorites & Categories");else $("#MSLAppYoutube > header > div.categories").text("Favorites")}function S(){MSLGlobals.Audio.play("button"),$("section#MSLAppYoutube > header > div.navButton").css("opacity","1").css("pointer-events",""),$("section#MSLAppYoutube > header > div.appLogo").css("opacity","1").css("pointer-events",""),$("section#MSLAppYoutube > header > div.search").css("opacity","1").css("pointer-events",""),$("section#MSLAppYoutube > main > div.videoResults").css("display","block"),$("section#MSLAppYoutube > footer > div.pageControls").css("display","block"),$("section#MSLAppYoutube > main > ul.categoryResults").css("display","none")}return{init:function(){e=!1,t=null,a=new ActionMessage($("#MSLAppYoutubeSearchInputCtrl"),(function(e){const t=i.getCurrentTimestamp(),n=i.getTimeEarliestExpire()-t;n<0?a.Hide():n>1?e.find("#ttl").text(n+" seconds"):e.find("#ttl").text("1 second")}),1e3),$.ajax({method:"GET",url:"data/youtubeCategories.json"}).done((function(e){for(var t=e.length,n=0;n<t;n++)r.push(e[n]);r.push({id:0,title:"None"})})),$("#MSLAppYoutube #pageControlPrev").click((function(){MSLGlobals.isOwner||!MSLGlobals.isLocked?--n<1?n++:(MSLGlobals.Audio.play("select"),m(n)):MSLGlobals.Audio.play("denied")})),$("#MSLAppYoutube #pageControlNext").click((function(){MSLGlobals.isOwner||!MSLGlobals.isLocked?++n>u?n--:(MSLGlobals.Audio.play("select"),m(n)):MSLGlobals.Audio.play("denied")})),$("#MSLAppYoutubeSearchInputCtrl").keypress((function(e){if(13==e.which)return MSLGlobals.Audio.play("button"),MSLAppYoutube.search($("#MSLAppYoutubeSearchInputCtrl").val(),$("#MSLAppYoutubeSearchTypeCtrl").attr("value")),!1})),$("#MSLAppYoutubeSearchButtonCtrl").click((function(e){return MSLGlobals.Audio.play("button"),MSLAppYoutube.search($("#MSLAppYoutubeSearchInputCtrl").val(),$("#MSLAppYoutubeSearchTypeCtrl").attr("value")),!1})),$("#MSLAppYoutubeSearchTypeCtrl").click((function(e){const t=$(this);1==t.attr("value")?t.attr("value","2"):t.attr("value","1")}))},preload:v,load:b,open:function(){e||b(),g(),f()},close:function(){a.Hide(),$("section#MSLAppYoutube").css("display","none")},page:m,back:function(e){if(e=void 0===e||e,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&e)MSLGlobals.Audio.play("denied");else if(!(o.length<=1)){MSLGlobals.Audio.play("back"),e&&MSLGlobals.sync&&MSLGlobals.sync.send({c:80}),o.pop();var t=o.pop();d(t.search,t.category,t.type),$("#MSLAppYoutubeSearchInputCtrl").val(s),$("#MSLAppYoutubeSearchTypeCtrl").val(c),y(l),h()}},search:function(e,t,n){if(t=void 0!==t?t:1,n=void 0===n||n,e=(e=void 0!==e?e:"").trim(),!MSLGlobals.isOwner&&MSLGlobals.isLocked&&n)MSLGlobals.Audio.play("denied");else{var o=null,r=document.createElement("a");if(r.href=e,"youtube"==r.hostname.substr(0,7)||"www.youtube"==r.hostname.substr(0,11))for(var s=r.search.substr(1).split("&"),c=0;c<s.length;c++){var u=s[c].split("=");if("v"==u[0])o={videoID:u[1]};else if("list"==u[0]){o={playlistID:u[1]};break}}o?(MSLAppManager.load("youtubeWatch",o),$("#MSLAppYoutubeSearchInputCtrl").val(""),$("#MSLAppYoutubeSearchTypeCtrl").attr("value",1)):i.add()?(n&&MSLGlobals.sync&&MSLGlobals.sync.send({c:82,query:e,type:t}),d(e,l,t),$("#MSLAppYoutubeSearchInputCtrl").val(e),$("#MSLAppYoutubeSearchTypeCtrl").attr("value",t)):a.Show('You have attempted too many searches in a short period of time! <strong>Please wait <span id="ttl">30 seconds</span></strong> before attempting your next search.'),S()}},category:function(e,t){e=void 0!==e?e:0,t=void 0===t||t,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&t?MSLGlobals.Audio.play("denied"):(t&&MSLGlobals.sync&&MSLGlobals.sync.send({c:83,category:e}),-1==e&&($("#MSLAppYoutubeSearchInputCtrl").val(""),s=""),d(s,e,1),$("#MSLAppYoutube > main > ul.categoryResults").hide(),S(),y(e))},categoryButtonCallback:function(){"none"==$("section#MSLAppYoutube > main > ul.categoryResults").css("display")?S():(MSLGlobals.Audio.play("button"),$("section#MSLAppYoutube > header > div.navButton").css("opacity",".4").css("pointer-events","none"),$("section#MSLAppYoutube > header > div.appLogo").css("opacity",".4").css("pointer-events","none"),$("section#MSLAppYoutube > header > div.search").css("opacity",".4").css("pointer-events","none"),$("section#MSLAppYoutube > main > div.videoResults").css("display","none"),$("section#MSLAppYoutube > footer > div.pageControls").css("display","none"),$("section#MSLAppYoutube > main > ul.categoryResults").css("display","flex"))}}}();MSLAppManager.register("youtube",MSLAppYoutube,!0);var MSLAppYoutubeChannel=function(){var e,t,n,i,a,o=new Array,r="",s=0;function l(e,t){t=void 0===t?0:t,r=e=void 0===e?"":e,function(){if(o.length&&o[o.length-1].search==r)return;o.push({search:r}),u()}(),$.ajax({method:"GET",url:"json/youtubeChannelSearch.php?q="+encodeURIComponent(e)+"&id="+encodeURIComponent(i),cache:!1}).done((function(e,o,r){var l=$("section#MSLAppYoutubeChannel > main > div.videoResults");if(l.empty(),200==r.status)if(0==(e=JSON.parse(e)).error){e.data.details.id,a=e.data.details.title;var u=$("section#MSLAppYoutubeChannel > header > div.categories");if(u.text(a),a.length>20?u.css("font-size","16px"):u.css("font-size",""),void 0!==e.data.videos&&0!=e.data.videos.length){var d,p=e.data.videos,h=p.length;n=1,s=0;for(var m=0;m<h;m++){var g=Math.floor(m/8),f=m%4;m%8==0&&(s++,(d=$(document.createElement("div"))).attr("id","page-"+g),d.addClass("page"),g>0&&d.css("display","none"),l.append(d));var v=$(document.createElement("div")),b=$(document.createElement("div")),y=$(document.createElement("div")),S=$(document.createElement("div")),w=$(document.createElement("p")),L=$(document.createElement("p")),M=$(document.createElement("p"));if(S.append(L),S.append(M),y.append(w),v.append(b),v.append(y),v.append(S),v.addClass("youtubeVideoResult"),v.addClass("videoResult"),y.addClass("title"),S.addClass("statistics"),b.css("background-image","url("+p[m].thumbnail+")"),b.addClass("thumbnail"),L.text(p[m].channel),M.text(p[m].published),p[m].title=p[m].title.replace(/(&#39;)/g,"'"),p[m].title.length>95){p[m].title=p[m].title.substr(0,88);var k=p[m].title.lastIndexOf(" ");p[m].title=-1!=k?p[m].title.substr(0,k)+" [...]":p[m].title+" [...]"}if(w.text(p[m].title),"playlist"==p[m].type){var A=$(document.createElement("div"));A.addClass("thumbnailTextOverlay"),A.text("Playlist"),b.append(A),v.attr("onclick","MSLAppManager.load( 'youtubeWatch', {playlistID: '"+p[m].id+"', backOverride: 'youtubeChannel', overrideVar: 'videoID', overrideVal: '"+i+"'});")}else v.bind("click",{videoID:p[m].id},(function(e){MSLAppManager.load("youtubeWatch",{videoID:e.data.videoID,backOverride:"youtubeChannel",overrideVar:"videoID",overrideVal:i})}));if(v.on("mouseenter",(function(e){MSLGlobals.Audio.play("hover")})),MSLGlobals.isOwner){var C=$(document.createElement("div"));C.addClass("fav");var j=$(document.createElement("div"));j.addClass("icon"),C.bind("click",{videoID:p[m].id,thumbnail:p[m].thumbnail,title:p[m].title,channel:p[m].channel,published:p[m].publishedRaw},(function(e){return $this=$(this),$.post("json/youtubeFavourite.php",{uuid:MSLGlobals.uuid,videoID:e.data.videoID,thumbnail:e.data.thumbnail,title:e.data.title,channel:e.data.channel,published:e.data.published},(function(e,t){0==(e=JSON.parse(e)).error&&(e.data?$this.addClass("on"):$this.removeClass("on"))})),e.stopPropagation(),!1})),j.append(C),b.append(j)}3==f&&v.addClass("lastInRow"),d.append(v),c(),$("#MSLAppYoutubeChannel #currentPageNum").text(n),$("#MSLAppYoutubeChannel #totalPageNum").text(s)}MSLAppYoutubeChannel.page(t)}else console.info("Channel has no videos.")}else console.error("Failed to retrieve channel data. JSON Payload error: "+e.error);else console.info("Channel has no videos with given search criteria.")}))}function c(){n==s?$("#MSLAppYoutubeChannel #pageControlNext").removeClass("active"):$("#MSLAppYoutubeChannel #pageControlNext").addClass("active"),1==n?$("#MSLAppYoutubeChannel #pageControlPrev").removeClass("active"):$("#MSLAppYoutubeChannel #pageControlPrev").addClass("active")}function u(){var e=$("#MSLAppYoutubeChannel > header > div.navBack");o.length>1?(e.removeClass("disabled"),e.css("cursor","pointer")):(e.addClass("disabled"),e.css("cursor","auto"))}function d(e,t){(e=void 0!==e?e:1)<1&&(e=1),e>s&&(e=s),(t=void 0===t||t)&&MSLGlobals.sync&&MSLGlobals.sync.send({c:84,value:e}),n=e,c(),$("#MSLAppYoutubeChannel .page").css("display","none"),$("#MSLAppYoutubeChannel #page-"+(e-1)).fadeIn(),$("#MSLAppYoutubeChannel #currentPageNum").text(e)}function p(){$("#underlay > #videoBackground").css("backgroundColor","#960000"),$("#underlay > #videoBackground").css("mix-blend-mode","color")}function h(){$("body > section").css("display","none"),$("section#MSLAppYoutubeChannel").fadeIn()}function m(e){void 0!==e.page&&(t=e.page),void 0!==e.search&&(r=e.search),void 0!==e.history&&(o=e.history)}function g(n,a){n=void 0!==n?n:{},(a=void 0!==a&&a)&&(n.search=void 0!==n.search?n.search:""),e=!0,p(),m(n);var o=void 0!==n.search&&n.search;void 0!==n.videoID&&(i!=n.videoID&&(s=0),i=n.videoID),0==s?(l(o=!1!==o?o:r,t),t=null):!1!==o&&(l(o=!1!==o?o:"",t),t=null),$("input.MSLAppYoutubeSearchCtrl").val(r),u(),h()}return{init:function(){e=!1,t=null,$("#MSLAppYoutubeChannel #pageControlPrev").click((function(){MSLGlobals.isOwner||!MSLGlobals.isLocked?--n<1?n++:(MSLGlobals.Audio.play("select"),d(n)):MSLGlobals.Audio.play("denied")})),$("#MSLAppYoutubeChannel #pageControlNext").click((function(){MSLGlobals.isOwner||!MSLGlobals.isLocked?++n>s?n--:(MSLGlobals.Audio.play("select"),d(n)):MSLGlobals.Audio.play("denied")})),$("input.MSLAppYoutubeChannelSearchCtrl").keypress((function(e){if(13==e.which)return MSLGlobals.Audio.play("button"),MSLAppYoutubeChannel.search($("input.MSLAppYoutubeChannelSearchCtrl").val()),!1})),$("button.MSLAppYoutubeChannelSearchCtrl").click((function(e){return MSLGlobals.Audio.play("button"),MSLAppYoutubeChannel.search($("input.MSLAppYoutubeChannelSearchCtrl").val()),!1}))},preload:m,load:g,open:function(){e||g(),p(),h()},close:function(){$("section#MSLAppYoutubeChannel").css("display","none")},page:d,back:function(e){e=void 0===e||e,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&e?MSLGlobals.Audio.play("denied"):o.length<=1||(MSLGlobals.Audio.play("back"),e&&MSLGlobals.sync&&MSLGlobals.sync.send({c:85}),o.pop(),l(o.pop().search),$("input.MSLAppYoutubeChannelSearchCtrl").val(r),u())},search:function(e,t){e=void 0!==e?e:"",t=void 0===t||t,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&t?MSLGlobals.Audio.play("denied"):(t&&MSLGlobals.sync&&MSLGlobals.sync.send({c:86,query:e}),l(e),$("input.MSLAppYoutubeChannelSearchCtrl").val(e))}}}();MSLAppManager.register("youtubeChannel",MSLAppYoutubeChannel,!0);var MSLAppYoutubeWatch=function(){var e,t,n,i,a,o,r,s,l,c,u=null,d=null,p=null;function h(){$("#underlay > #videoBackground").css("backgroundColor","#960000")}function m(){$("body > section").css("display","none"),$("section#MSLAppYoutubeWatch").fadeIn(),$("meta[name='referrer'").attr("content","always"),$("#underlay > video")[0].pause()}function g(e){void 0!==e.videoID&&(t=e.videoID),void 0!==e.playlistID&&(n=e.playlistID),void 0!==e.infiniteLoopSingleVideo&&(o=e.infiniteLoopSingleVideo)}function f(l,f){f=void 0!==f&&f,void 0!==(l=void 0!==l?l:{}).backOverride?(u=l.backOverride,d=l.overrideVar,p=l.overrideVal):(u=null,d=null,p=null),i=!0,h(),m(),$("#MSLAppYoutubeWatch .loop").removeClass("on");var v=n;if(t=null,n=null,g(l),v&&t&&e&&(e.destroy(),e=null),e)t?(isPlaylist=-1!=t.indexOf(","),isPlaylist?(e.loadPlaylist({playlist:t}),$("div.videoOnlyCtrl").css("display","none"),$("div.qm > div.playlistOnlyCtrl").css("display","block")):(e.loadVideoById(t,0,"hd720"),$("div.qm > div.videoOnlyCtrl").css("display","block"),$("div.qm > div.playlistOnlyCtrl").css("display","none"))):n&&(e.loadPlaylist({list:n,listType:"playlist"}),$("div.videoOnlyCtrl").css("display","none"),$("div.qm > div.playlistOnlyCtrl").css("display","block"));else{var b={width:MSLGlobals.useClassic?"958":"1024",height:"576",suggestedQuality:"hd720",playerVars:{iv_load_policy:3,fs:0,showinfo:0,controls:1,disablekb:0,rel:0,enablejsapi:1,origin:"https://"+MSLGlobals.Domain},events:{onReady:function(e){!function(e){a.firstVideo=void 0!==e&&e,a.unstarted=!1,a.ended=!1,a.playing=!1,a.paused=!1,a.buffering=!1,a.cued=!1,a.qualityChanged=!1,a.bypassCallback=!1}(!0),e.target.playVideo()},onStateChange:function(t){if(t.data==YT.PlayerState.BUFFERING&&($("#youtubePlayerWarning").css("display","none"),$("#ytVideoDirectLink").attr("href","#")),c.css("display","none"),a.firstVideo&&t.data==YT.PlayerState.PLAYING)return e.getPlaylistIndex(),void(a.firstVideo=!1);switch(t.data){case YT.PlayerState.UNSTARTED:a.unstarted=!0;break;case YT.PlayerState.ENDED:a.ended=!0;break;case YT.PlayerState.PLAYING:a.playing=!0;break;case YT.PlayerState.PAUSED:a.paused=!0;break;case YT.PlayerState.BUFFERING:a.buffering=!0;break;case YT.PlayerState.CUED:a.cued=!0}t.data==YT.PlayerState.ENDED&&o&&r?e.playVideo():t.data==YT.PlayerState.ENDED&&(c.css("display","block"),s.css("opacity",1))},onPlaybackQualityChange:function(e){a.qualityChanged=!0},onError:function(e){101!=e.data&&150!=e.data||($("#youtubePlayerWarning").css("display","block"),$("#youtubePlayerTitle").text(e.target.playerInfo.videoData.title),e.target.playerInfo.videoData.video_id.length>11?$("#ytVideoDirectLink").attr("href","https://www.youtube.com/watch?list="+e.target.playerInfo.videoData.video_id):$("#ytVideoDirectLink").attr("href","https://www.youtube.com/watch?v="+e.target.playerInfo.videoData.video_id))}}};if(t)if(isPlaylist=-1!=t.indexOf(","),isPlaylist){var y=t.split(",");b.videoId=y.shift(),b.playerVars.playlist=y.join(","),r=!1,$("div.videoOnlyCtrl").css("display","none"),$("div.qm > div.playlistOnlyCtrl").css("display","block")}else b.videoId=t,r=!0,$("div.videoOnlyCtrl").css("display","block"),$("div.qm > div.playlistOnlyCtrl").css("display","none");else n&&(b.playerVars.listType="playlist",b.playerVars.list=n,r=!1,$("div.videoOnlyCtrl").css("display","none"),$("div.qm > div.playlistOnlyCtrl").css("display","block"));var S=$("#MSLAppYoutubeWatch div.qm"),w=new Array;S.children().each((function(){"none"!=$(this).css("display")&&w.push($(this))})),5==w.length||6==w.length?S.addClass("col3"):S.removeClass("col3"),$("#youtubePlayerLoading").show(0),callbackWhenYoutubeIsReady((function(){$("#youtubePlayerLoading").hide(0),e=new YT.Player("youtubeplayer",b),$("#youtubeplayer").attr("src",$("#youtubeplayer").attr("src").replace("&origin="+encodeURIComponent("https://"+MSLGlobals.Domain),""))}))}}return{init:function(){i=!1,t=null,n=null,-1,o=!1,r=!0,a={firstVideo:!0,unstarted:!1,ended:!1,playing:!1,paused:!1,buffering:!1,cued:!1,qualityChanged:!1,bypassCallback:!1},s=$("section#MSLAppYoutubeWatch > main > div.fullscreenOverlay"),l=s.children().first(),c=$("section#MSLAppYoutubeWatch > main > div.hideRelatedVideos"),$("section#MSLAppYoutubeWatch > main > div.preventPlayerHoverPopups").on("mouseout",(function(){s.css("opacity",0)})),$(window).blur((function(){s.css("opacity",0)})),$(window).on("mouseout",(function(){s.css("opacity",0)}))},preload:g,load:f,open:function(){i||f(),h(),m()},close:function(){e&&e.stopVideo();let t=$("#MSLAppYoutubeWatch div.qm > div.favorite");t.length&&t.removeClass("on"),$("#underlay > video")[0].play(),$("meta[name='referrer'").attr("content","no-referrer"),$("section#MSLAppYoutubeWatch").css("display","none")},back:function(){if(null==u)MSLAppManager.load("youtube");else{var e={};e[d]=p,MSLAppManager.load(u,e)}},openExternal:function(){if(MSLGlobals.isOwner||!MSLGlobals.isLocked){var t=e.getVideoData().video_id;window.location="https://www.youtube.com/watch?v="+t}else MSLGlobals.Audio.play("denied")},openChannel:function(){MSLGlobals.isOwner||!MSLGlobals.isLocked?MSLAppManager.load("youtubeChannel",{videoID:e.getVideoData().video_id}):MSLGlobals.Audio.play("denied")},favorite:function(t){$.post("json/youtubeFavourite.php",{uuid:MSLGlobals.uuid,videoID:e.getVideoData().video_id,thumbnail:null,title:null,channel:null,published:null},(function(e,n){0==(e=JSON.parse(e)).error&&(e.data?$(t).addClass("on"):$(t).removeClass("on"))}))},onMouseMove:function(e,t){if("block"==c.css("display"))return s.css("opacity",1),!0;var n=Math.abs(e-512)-l.width()/2,i=Math.abs(t-288)-l.height()/2;n<=0&&i<=0?s.css("opacity",1):(n=1-n.clamp(0,40)/40,i=1-i.clamp(0,40)/40,s.css("opacity",Math.min(n,i)))},onNext:function(t){t=void 0===t||t,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&t?MSLGlobals.Audio.play("denied"):(t&&MSLGlobals.sync&&MSLGlobals.sync.send({c:87}),e&&(a.bypassCallback=!0,e.nextVideo()))},onPrev:function(t){t=void 0===t||t,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&t?MSLGlobals.Audio.play("denied"):(t&&MSLGlobals.sync&&MSLGlobals.sync.send({c:88}),e&&(a.bypassCallback=!0,e.previousVideo()))},onReplay:function(t){t=void 0===t||t,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&t?MSLGlobals.Audio.play("denied"):(t&&MSLGlobals.sync&&MSLGlobals.sync.send({c:89}),e&&(a.bypassCallback=!0,e.pauseVideo(),e.seekTo(0,!0),e.playVideo()))},onLoop:function(e){if(e=void 0===e||e,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&e)MSLGlobals.Audio.play("denied");else{var t=$("#MSLAppYoutubeWatch .loop");e&&MSLGlobals.sync&&MSLGlobals.sync.send({c:90}),o?(t.removeClass("on"),o=!1):(t.addClass("on"),o=!0)}}}}();MSLAppManager.register("youtubeWatch",MSLAppYoutubeWatch,!0);const MSLAppPlutotvData=[{id:"62fa81ccd1a7e90007c1ada0",name:"AMC en espaol"},{id:"64dab1f835425100080e1e7b",name:"Acapulco Shore"},{id:"60c25ec6da6d6600074233a8",name:"Acapulco Shore"},{id:"5e84db2db3851800077c871e",name:"Amantes del romance"},{id:"5e84f54a82f05300080e6746",name:"America's Test Kitchen"},{id:"5812b7d3249444e05d09cc49",name:"Anime All Day"},{id:"615b8ec39e878900073f419a",name:"Antiques Road Trip"},{id:"5ce44810b421747ae467b7cd",name:"Antiques Roadshow UK"},{id:"65a6d7a833ea860008339657",name:"BET Her"},{id:"65a19669cbd0d60008443d5f",name:"BET Pluto TV"},{id:"5ca670f6593a5d78f0e85aed",name:"BET Pluto TV"},{id:"60faffc3fbbc120007fc4376",name:"Baby Shark TV"},{id:"60a3d889a5b3690008dc7fe8",name:"Bar Rescue"},{id:"5d815eb889bca2ce7b746fdd",name:"Baywatch"},{id:"60493283ffc52f000710edae",name:"Bebecito Bum y sus amigos"},{id:"5ebc8688f3697d00072f7cf8",name:"Bellator MMA"},{id:"60f760bbdf090700075d7bfe",name:"Best of Dr. Phil"},{id:"61858ac0491af10007f8ce4f",name:"Best of The Drew Barrymore Show"},{id:"5f7796e470510900070d4e3d",name:"Beverly Hillbillies"},{id:"5f4d83e0a382c00007bc02e7",name:"Beverly Hills 90210"},{id:"6661f11a41af6400080e90d8",name:"Big Brother"},{id:"65a19543b9adc400084c3292",name:"Black Cinema"},{id:"65a196046e4f6a0008be0b6d",name:"Black Classics"},{id:"5d51e2bceca5b4b2c0e06c50",name:"Black Ink Crew"},{id:"65a19599b228b700088df95c",name:"Black Throwbacks"},{id:"663946c1b18d700008d9c168",name:"Black Visionaries"},{id:"66439ee041af640008ccaa98",name:"Black Visionaries"},{id:"61b3b8c645b45d0007a9bb8d",name:"Blue Bloods"},{id:"60f870184865da00074210ee",name:"British Comedy"},{id:"5b68a18823ecb93393cba2f1",name:"British Drama"},{id:"668c5cb4f01dbe0008dd4082",name:"CBS en espaol"},{id:"5dcc42446750e200093b15e2",name:"CMT Pluto TV"},{id:"5e1f7e089f23700009d66303",name:"COPS"},{id:"5efbd29e4aa26700076c0d06",name:"CSI"},{id:"604928d54a4f730007ff76bc",name:"CSI en Espaol"},{id:"62f54c11b3af68000702c304",name:"CSI: Miami"},{id:"632b5950b515b000079e6b81",name:"CSI: Miami en espaol"},{id:"62f54c6439183b000769fb8f",name:"CSI: NY"},{id:"632b606e12a67b0007c9e371",name:"CSI: NY en espaol"},{id:"60d393e5579a420007ee553c",name:"Casos de la Dra. Polo"},{id:"599375885ceaac3cabccbed7",name:"Cats 24/7"},{id:"627d355aa95efd00077afcc7",name:"Cheaters"},{id:"66ba495ffe11e5000881f049",name:"Cheers + Frasier"},{id:"64b9671cdac71b0008f371df",name:"Cine Clsico"},{id:"5cf968040ab7d8f181e6a68b",name:"Cine Premiere"},{id:"5f5136317aedfb0007016f93",name:"Cine XOXO"},{id:"5d8d164d92e97a5e107638d2",name:"Cine adrenalina"},{id:"5cf96b1c4f1ca3f0629f4bf0",name:"Cine en espaol"},{id:"5d8d180092e97a5e107638d3",name:"Cine terror"},{id:"5f513564e4622a0007c578c0",name:"Cine jaja!!"},{id:"61f33318210549000806a530",name:"Classic Movie Westerns"},{id:"561c5b0dada51f8004c4d855",name:"Classic Movies Channel"},{id:"61325c4f982acd000723287e",name:"Classic TV Crime Drama"},{id:"5f15e3cccf49290007053c67",name:"Classic TV Drama"},{id:"5c37d6712de254456f7ec340",name:"Cold Case Files by A&E"},{id:"5f99e24636d67d0007a94e6d",name:"Comedy Central Animation"},{id:"5ca671f215a62078d2ec0abf",name:"Comedy Central Pluto TV"},{id:"5cf96dad1652631e36d43320",name:"Comedy Central en espaol"},{id:"634ee8f95aa9870007248333",name:"Confess by Nosey"},{id:"61b3e21d56fee300087e4cba",name:"Corazn turco"},{id:"65653817c917a5000844bc30",name:"Criminal Minds"},{id:"5e94cd036cc69d0007e8a1ba",name:"Crmenes imperfectos"},{id:"5d40855b3fb0855028c99b6f",name:"DCC: Making the Team"},{id:"651f239d9c7aeb0008286823",name:"Dating Disasters"},{id:"5e9debf8c881310007d7bde1",name:"Deal or No Deal"},{id:"5c6eeb85c05dfc257e5a50c4",name:"Degrassi"},{id:"5ce4475cd43850831ca91ce7",name:"Doctor Who Classic"},{id:"5bee1a7359ee03633e780238",name:"Dog the Bounty Hunter"},{id:"5b329e0a7b9d8872aeb49ceb",name:"Dogs 24/7"},{id:"64d1606b4c5ed80008e3b8b9",name:"Dynasty"},{id:"650b69cfd1f20c0008586bac",name:"EarthDay 365"},{id:"66fedd65d7de140008dccd66",name:"El Reino Infantil"},{id:"63d0269d60bc8f000890facc",name:"FOX Deportes"},{id:"5a74b8e1e22a61737979c6bf",name:"FOX Sports"},{id:"5f77939a630f530007dde654",name:"Family Ties"},{id:"588128d17d64bc0d0f385c34",name:"Fear Factor"},{id:"65775af3b3801200084a3aa4",name:"Feel Good Drama"},{id:"5d8d0fbaa8742fa3093899da",name:"Foodies"},{id:"5bb1af6a268cae539bcedb0a",name:"Forensic Files"},{id:"56171fafada51f8004c4b40f",name:"Forever Kids"},{id:"5417a212ff9fba68282fbf5e",name:"GLORY Kickboxing"},{id:"5e54187aae660e00093561d6",name:"Game Show Central"},{id:"60faf9ddfcc1f200070a5932",name:"Garfield and Friends"},{id:"64e561a4354251000823a0e0",name:"Ghost Hunters"},{id:"667f3852efa2a10008e1e514",name:"Go Go Gadget!"},{id:"5b4e99f4423e067bd6df6903",name:"Gordon Ramsay's Hell's Kitchen"},{id:"60fafef7c2440500071266e0",name:"Grande-ish"},{id:"60f75771dfc72a00071fd0e0",name:"Gunsmoke"},{id:"628e685ba3811100070551a8",name:"Hallmark Movies & More"},{id:"6532e7b290a74c00084a3bb6",name:"Hallmark en espaol"},{id:"5f7794162a4559000781fc12",name:"Happy Days"},{id:"61f07513227feb00073ee6bc",name:"Heartland"},{id:"60492b2794116800073e32dc",name:"Hell's Kitchen en espaol"},{id:"64387bb1af2bd90008978a2b",name:"Hollywood Squares"},{id:"6036e6e7ac69c400072afca2",name:"Hot Bench"},{id:"634f3011f4fff20007431641",name:"I Love Lucy"},{id:"60807fd5db701400078219c2",name:"Ink Master"},{id:"5cf96b8f4f1ca3f0629f4bf1",name:"Investiga"},{id:"609bfa51fbecc1000733152e",name:"Jersey Shore"},{id:"5e9decb953e157000752321c",name:"Judge Nosey"},{id:"60fb040d4795a6000762fe8f",name:"Kartoon Channel!"},{id:"5af09e645126c2157123f9eb",name:"Kevin Harts LOL! Network"},{id:"5db0ad56edc89300090d2ebb",name:"Kids Movie Club"},{id:"60fb01a24795a6000762fe83",name:"LEGO Kids TV"},{id:"668c566d08d5490008075948",name:"La Familia del Barrio"},{id:"5eb301b7395671000780d100",name:"Little Angel's Playroom"},{id:"51c75f7bb6f26ba1cd00002f",name:"Little Stars Universe"},{id:"5873fc21cad696fb37aa9054",name:"Live Music"},{id:"5ce5a8954311f992edbe1da2",name:"Logo Pluto TV"},{id:"5d51ddf0369acdb278dfb05e",name:"Love & Hip Hop"},{id:"5c01df1759ee03633e7b272c",name:"Lucha Libre AAA"},{id:"60f74ba51c82ac000776c669",name:"Lupin the 3rd"},{id:"5e66968a70f34c0007d050be",name:"MLB"},{id:"545943f1c9f133a519bbac92",name:"MST3K"},{id:"5ca6899a37b88b269472ea4b",name:"MTV Dating"},{id:"5ca672f515a62078d2ec0ad2",name:"MTV Pluto TV"},{id:"5cf96d351652631e36d4331f",name:"MTV en espaol"},{id:"60f754f98185580007eb0754",name:"Matlock"},{id:"5cbf6a868a1bce4a3d52a5e9",name:"Midsomer Murders"},{id:"5f77977bd924d80007eee60c",name:"Mission Impossible"},{id:"65e23f340d4561000821540d",name:"Mister Rogers' Neighborhood"},{id:"5f4d882d5233170007ee880e",name:"Misterios sin resolver"},{id:"650b6905d1f20c0008586b0c",name:"More Crime Drama"},{id:"64387c25e0789d000849f62e",name:"More TV Game Shows"},{id:"6532e6a9bdf3cf000887ab29",name:"More True Crime"},{id:"6051201a0aa8a70007c24a2a",name:"Mundo geek"},{id:"60511efd71ec430007f50d97",name:"Mundo viajero"},{id:"5da0c85bd2c9c10009370984",name:"Naruto"},{id:"5db0ae5af8797b00095c0794",name:"No Parents Allowed"},{id:"5aec96ec5126c2157123c657",name:"Nosey"},{id:"60492ee6375a3900079a158c",name:"Nosey escndalos"},{id:"5e84dbf4a838b60007ffbba1",name:"Novelas con la abuela"},{id:"5f7790b3ed0c88000720b241",name:"One Piece"},{id:"66c638726838ee00085ac20d",name:"OuterSphere"},{id:"60d39387706fe50007fda8e8",name:"PBR RidePass"},{id:"65a6db580d9ab400080e6ab6",name:"PBS Genealogy"},{id:"5cb0cae7a461406ffe3f5213",name:"Paramount Movie Channel"},{id:"5ff8c708653d080007361b14",name:"Paramount+ Picks"},{id:"60fb2f47c133270007327375",name:"Pelis y Popcorn"},{id:"656538bb635c3c0008695660",name:"Perform by Lifetime"},{id:"6197086891ddd4000739941a",name:"Perry Mason"},{id:"6565413e4261ca0008215320",name:"Pickers & Pawn"},{id:"56b27f85ff3037045055037e",name:"Pluto TV Animals"},{id:"5cabdf1437b88b26947346b2",name:"Pluto TV Backcountry"},{id:"5812b3a4249444e05d09cc46",name:"Pluto TV Cars"},{id:"603fde9026ecbf0007752c2c",name:"Pluto TV Competition"},{id:"5f31fd1b4c510e00071c3103",name:"Pluto TV Crime Drama"},{id:"5b64a245a202b3337f09e51d",name:"Pluto TV Fantastic"},{id:"5877ac8cb791f4eb4a140d81",name:"Pluto TV Food"},{id:"6036e7c385749f00075dbd3b",name:"Pluto TV Game Shows"},{id:"5a4d35dfa5c02e717a234f86",name:"Pluto TV History"},{id:"6022bd17849c620007f43ae0",name:"Pluto TV Home"},{id:"64b585f84ea480000838e446",name:"Pluto TV Icons"},{id:"5d8beeb39b5d5d5f8c672530",name:"Pluto TV Lives"},{id:"5bb3fea0f711fd76340eebff",name:"Pluto TV Military"},{id:"5cf96c0222df39f1a338d163",name:"Pluto TV Novelas"},{id:"60f86f539f03cd00070c503a",name:"Pluto TV Pranks"},{id:"6785b98d688edb0008cb99be",name:"Pluto TV ROCKY + Creed"},{id:"5d8bf0b06d2d855ee15115e3",name:"Pluto TV Reality"},{id:"563a970aa1a1f7fe7c9daad7",name:"Pluto TV Science"},{id:"59c01b1953680139c6ae9d4d",name:"Pluto TV Travel"},{id:"673247127d5da5000817b4d6",name:"Pluto TV Trending Now"},{id:"5812be1c249444e05d09cc50",name:"Pluto TV True Crime"},{id:"6675c7868768aa0008d7f1c7",name:"Pokmon"},{id:"66abefe5d2d50d00082c7d12",name:"Queens of Reality"},{id:"60fb028c2e6a0c00075275a5",name:"Rainbow Squad"},{id:"634f307c7a068e00072c9982",name:"Rawhide"},{id:"5f21e831e9fe730007706acb",name:"Rescue 911"},{id:"58d947b9e420d8656ee101ab",name:"RiffTrax"},{id:"637e55347427a40007fac703",name:"Sailor Moon"},{id:"66ba53cda4ee2700083fac09",name:"Sala de Emergencias: Historias Inditas"},{id:"60fb3087fbbc120007fc46be",name:"Series con "},{id:"633354b63df9700007f6a1b7",name:"Sitcom Legends"},{id:"5e82547b6b3df60007fec2b5",name:"Slightly Off IFC"},{id:"5f21ea08007a49000762d349",name:"Smithsonian Channel Selects"},{id:"605e479d5b8229000763e697",name:"Sony Canal Escape Perfecto"},{id:"5c393cad2de254456f7ef8c2",name:"Spike Outdoors"},{id:"5812bcc8237a6ff45d16c407",name:"Spike Pluto TV"},{id:"5d8d11baeb31c5a43b77bf59",name:"Spike extremo!"},{id:"5637d31f319573e26b64040b",name:"Stand-Up TV"},{id:"5efbd39f8c4ce900075d7698",name:"Star Trek"},{id:"65c69bbfd77d450008c7ffee",name:"Star Trek Deep Space Nine"},{id:"634dacf51d90320007fcd5fa",name:"Star Trek Voyager"},{id:"620bfa7df72827000703ddb1",name:"Stargate"},{id:"667f393836a2f90008fd17c0",name:"Strawberry Shortcake and Friends"},{id:"5f24662bebe0f0000767de32",name:"Supernatural Drama"},{id:"5f21e7b24744c60007c1f6fc",name:"Survivor"},{id:"60f9ebb06f0b3d000746fbdb",name:"Team Spirit"},{id:"6127e12ed140e900077e7b6f",name:"Teen Mom"},{id:"5cf96cc422df39f1a338d165",name:"Telemundo telenovelas clsicas"},{id:"5d81607ab737153ea3c1c80e",name:"The Addams Family"},{id:"5f21e8a6e2f12b000755afdb",name:"The Amazing Race"},{id:"60f75178e7f8aa0007e9c259",name:"The Andy Griffith Show"},{id:"5f36d726234ce10007784f2a",name:"The Bob Ross Channel"},{id:"5d48685da7e9f476aa8a1888",name:"The Challenge"},{id:"66df70cd61dbf00008fa26ff",name:"The Good Wife"},{id:"650b6a0c6625510008e1043b",name:"The Jack Hanna Channel"},{id:"6283d51144ad8f0007fa382d",name:"The Judge Judy Channel"},{id:"5f7794a788d29000079d2f07",name:"The Love Boat"},{id:"5aea40b35126c2157123aa64",name:"The New Detectives"},{id:"5e825550e758c700077b0aef",name:"The Rifleman"},{id:"67352ed93a61d4000881f9fa",name:"The Twilight Zone"},{id:"664e640a0120f40008be4582",name:"The Wild Wild West"},{id:"5d51e791b7dba3b2ae990ab2",name:"This Old House"},{id:"6452c9465a0cd50008654fc1",name:"This Old House Makers Channel"},{id:"5ef3977e5d773400077de284",name:"Three's Company"},{id:"5c3f8f12a93c2d61b9990a4e",name:"TokuSHOUTsu"},{id:"636adc255bcf470007d6e0e2",name:"Top Gear"},{id:"64d160f53c785e0008df525e",name:"Top Rank Classics"},{id:"5dae084727c8af0009fe40a4",name:"Tosh.0"},{id:"65c69bf23ef47d0008583967",name:"Tough Jobs"},{id:"60fb053712f22a0007ff14d2",name:"Transformers TV"},{id:"5b4e96a0423e067bd6df6901",name:"Unsolved Mysteries"},{id:"5d71561df6f2e6d0b6493bf5",name:"VH1 Hip Hop Family"},{id:"5d7154fa8326b6ce4ec31f2e",name:"VH1 I Love Reality"},{id:"66b66b9e14a2bb000872f606",name:"WOW  Women of Wrestling"},{id:"6089788de5c8410007808e26",name:"Wanted: Dead or Alive"},{id:"5d48678d34ceb37d3c458a55",name:"Wild 'N Out"},{id:"5616f9c0ada51f8004c4b091",name:"World Poker Tour"},{id:"6000a6f4c3f8550008fc9b91",name:"Xtreme Outdoor Presented by HISTORY"},{id:"5f4ec10ed9636f00089b8c89",name:"Yu-Gi-Oh!"}];class MSLAppPlutotvLibrary{constructor(e){this.scroll=e,this.channelList=$("#plutotvChannelList"),this.data=MSLAppPlutotvData}Render(e=null){const t=this;t.channelList.empty();let n=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(e.target.src=e.target.getAttribute("data-src"),n.unobserve(e.target))}))}));for(let i=0;i<t.data.length;++i){if(null!=e&&!t.data[i].name.toLowerCase().includes(e.toLowerCase()))continue;const a=$(document.createElement("div")),o=document.createElement("img");a.attr("channelid",i),o.setAttribute("data-src","https://images.pluto.tv/channels/"+t.data[i].id+"/colorLogoSVG.svg"),a.append(o),n.observe(o),t.channelList.append(a),a.on("click",(function(){MSLAppManager.load("plutotvWatch",{videoID:i})}))}t.scroll.UpdateVisibility()}}var MSLAppPlutotv=function(){const e="MSLAppPlutotv";var t,n,i,a=!1;function o(){$("#underlay > #videoBackground").css("backgroundColor","#333")}function r(){$("body > section").css("display","none"),$("section#"+e).fadeIn(),a||(i.Render(),a=!0),n.UpdateVisibility()}function s(e){}function l(e,n){e=void 0!==e?e:{},n=void 0!==n&&n,t=!0,o(),r()}return{init:function(){t=!1,backgroundVideo=$("#underlay > video")[0],backgroundVideoSource=$("#underlay > video > source")[0],n=new UndockedScrollbar($("#plutotvChannelList"),$("#plutotvScroll")),i=new MSLAppPlutotvLibrary(n),$("input.MSLAppPlutotvSearchCtrl").on("keyup",(function(e){const t=$(this);t.val().length>=1?i.Render(t.val()):0==t.val().length&&i.Render()}))},preload:s,load:l,open:function(){t||l(),o(),r()},close:function(){$("section#"+e).css("display","none")},back:function(){}}}();MSLAppManager.register("plutotv",MSLAppPlutotv,!0);var MSLAppPlutotvWatch=function(){var e,t,n,i,a;let o=null,r=null;function s(){$("#underlay > #videoBackground").css("backgroundColor","#000000")}function l(){$("body > section").css("display","none"),$("section#MSLAppPlutotvWatch").fadeIn()}function c(e){void 0!==e.videoID&&(t=e.videoID)}function u(i,a){i=void 0!==i?i:{},a=void 0!==a&&a,n=!0,s(),l(),t=i.videoID,c(i),e&&e.destroy(),o=MSLAppPlutotvData[t].id,e.init(),new Promise(((e,t)=>{let n=localStorage.getItem("pluto_session"),i=localStorage.getItem("pluto_session_lastmod");if(null!=n&&null!=i&&i>1733422104)try{const t=JSON.parse(atob(n.split(".")[1]));if(t?.exp>parseInt(Date.now()/1e3))return r=t.sessionID,void e({sid:t.sessionID,cid:t.clientID,lat:t.deviceLat,lon:t.deviceLon,jwt:n})}catch(e){}const a=encodeURIComponent((new Date).toISOString());$.ajax({url:"https://corsproxy.io/?"+encodeURIComponent("https://boot.pluto.tv/v4/start?appName=web&appVersion=9.6.0-a4885044134e9550f33624d94056de15020c6adb&deviceVersion=134.0.0&deviceModel=web&deviceMake=CEF&deviceType=web&clientID=46c41b65-b9ff-49eb-9603-36bc2b8acaa3&clientModelNumber=1.0.0&channelSlug=5812b7d3249444e05d09cc49&serverSideAds=false&drmCapabilities=widevine%3AL3&blockingMode=&notificationVersion=1&appLaunchCount=1&lastAppLaunchDate="+a+"&clientTime="+a),type:"GET",dataType:"json",success:function(n,i,a){if("string"==typeof n&&(n=JSON.tryParse(n)),"string"==typeof n?.sessionToken)try{const t=JSON.parse(atob(n.sessionToken.split(".")[1]));return localStorage.setItem("pluto_session",n.sessionToken),localStorage.setItem("pluto_session_lastmod",Math.floor(Date.now()/1e3)),r=t.sessionID,void e({sid:t.sessionID,cid:t.clientID,lat:t.deviceLat,lon:t.deviceLon,jwt:n.sessionToken})}catch(e){t("Unexpected JWT parameter format returned from PlutoTV boot endpoint.")}else t("Unexpected data format returned from PlutoTV boot endpoint.")},error:function(e,n,i){t("PlutoTV boot endpoint returned HTTP error '"+e.status+"'.")}})})).then((t=>{const n=new URL("https://cfd-v4-service-channel-stitcher-use1-1.prd.pluto.tv/v2/stitch/hls/channel/"+o+"/master.m3u8");n.searchParams.set("advertisingId",""),n.searchParams.set("appName","web"),n.searchParams.set("appVersion","9.6.0-a4885044134e9550f33624d94056de15020c6adb"),n.searchParams.set("app_name","web"),n.searchParams.set("clientDeviceType","0"),n.searchParams.set("clientID",t.cid),n.searchParams.set("clientModelNumber","1.0.0"),n.searchParams.set("country","US"),n.searchParams.set("deviceDNT","false"),n.searchParams.set("deviceId",t.cid),n.searchParams.set("deviceLat",t.lat),n.searchParams.set("deviceLon",t.lon),n.searchParams.set("deviceMake","CEF"),n.searchParams.set("deviceModel","web"),n.searchParams.set("deviceType","web"),n.searchParams.set("deviceVersion","134.0.0"),n.searchParams.set("marketingRegion","US"),n.searchParams.set("serverSideAds","false"),n.searchParams.set("sessionID",t.sid),n.searchParams.set("sid",t.sid),n.searchParams.set("userId",""),n.searchParams.set("jwt",t.jwt),n.searchParams.set("masterJWTPassthrough","true"),n.searchParams.set("includeExtendedEvents","true"),n.searchParams.set("paln","AQzzBGQEYNauyfNlBuK7A1mtAz08d64pIwaKnsMHYEnrnd4orgr-5LHJPLv3sslC7VB3vOO-k2IAtePJrd4c9QOGELhXHIBT3gCtL6vSrb66uuOb5ZoHWeq-MDoPVZXBkH6BfTzKHH_B8l7u3cSV2GWstdz4x0U67s_TYopfZf2RRvD2rzfnru3SDDeTGt80NJBW6b46SKfORTTLi8PRxht7XpsM8BggnWz3V80APoRdAGeDZWZWUg-zsOb5gQwSfZXhXIpHdcde-rYxfdyaXNlu98ci1t4lnQKAEQyVBvv_4HFnMcPMr9mkAb9KF4O1mLumvuXVG8OL5NHYtYo6X-Lj6qdqpPM5XfsBygg0V7-0bAWVcd7JfZ5R6rmbZ07vM8USQ-OlJRkpR9mnmQXrdU_ykXioSmZRu_n6LRn8kbEsn6PEPMxNzCjfGAVkZhLSbWkW3vmyssNF-4jOLjKcRfOsmMOfJaBxhTdisnK1wrqhP9ZQ8tPblmiHJcMvHlwUgZhSYQifsmNaBViFFT61euV4RjxoQc9DkXTJIKEhlRKHd3zQVOb-_CT-DJHUPhvNTnmBbLqpxpN5tnw1up99jocd_j5uqcfDjlHpIy0JOSSuNU1JY4sRVbb-noi2ictpMnqDCbeLzD6v8aSaJ9yb-p3LHn1hBP6i2mvO4Fcep-fJNLpOqiSU0s6LZcMN65c62X79M1a9lZN4Gdl3fBNpBQ7GEQHMBSP3j987gJ3mnFW6QWq0VWUtxKSbUFEqPJ5XRnU-SU4Cjanj3BpGPqnsI-DpODOjm2fpjZm4e2lE7nEVt8R-i3ZR7GfE4ptjZllu4sHu5G1ZRWeSbtmkU7KrxolSMKlO-o9ih7Y4-fCgdhJ6qvoKOnWxIiOQ4s0LjWrvJjErPblL_iXN508UHuLO-O3Bn1q3f5DJcLFqsezV0V6fv0gALgxF9etixod9TcD53nyzmXv-X-46qVIyU9x_VWO_Jest9Oi7ekK9Vw_Y4oZhBsWcofH_SFTU86YUNWRBefw5Ep-6iKk_f9ebvLkyBr9vVmfCnoPN5fYyWdX2MdAsF0aQfXGtEsDdd78LCAnBRcH85w0CUUFobpyHuCKLzxzdlcOw8Q.."),n.searchParams.set("gpp","DBABLA~BVQqAAAAAgA.QA"),n.searchParams.set("gpp_sid","7"),n.searchParams.set("us_privacy","1YNN"),n.searchParams.set("eventVOD","false"),n.searchParams.set("CMCD","mtp%3D500%2Cot%3Dm%2Csf%3Dh%2Csid%3D%22"+t.sid+"%22%2Csu"),n.searchParams.set("nc",Date.now()),e.load("https://corsproxy.io/?"+encodeURIComponent(n.toString()))})).catch((t=>{e.statusOverlay.Clear(),e.statusOverlay.Set("An error occured: "+t,"error")}))}return{init:function(){n=!1,e=new MSLVideoPlayer($("#plutotvplayer"),{antiCors:!0,hlsConfig:{pLoader:class extends Hls.DefaultConfig.loader{constructor(e){super(e);var t=this.load.bind(this);this.load=function(e,n,i){const a=new URL(e.url);"corsproxy.io"==a.host&&"/"!=a.pathname&&(e.url="https://corsproxy.io/?"+encodeURIComponent("https://cfd-v4-service-channel-stitcher-use1-1.prd.pluto.tv/v2/stitch/hls/channel/"+o+a.pathname+a.search+"&"+encodeURIComponent("CMCD=mtp%3D500%2Cot%3Dm%2Csf%3Dh%2Csid%3D%22"+r+"%22%2Csu")+"&nc="+Date.now())),t(e,n,i)}}},manifestLoadingTimeOut:7e3,manifestLoadingMaxRetry:2,fragLoadingTimeOut:3e4,fragLoadingMaxRetry:3}}),t=null,i=$("section#MSLAppPlutotvWatch > main > div.fullscreenOverlay"),a=i.children().first(),$(window).blur((function(){i.css("opacity",0)})),$(window).on("mouseout",(function(){i.css("opacity",0)}))},preload:c,load:u,open:function(){n||u(),s(),l()},close:function(){e&&e.destroy(),$("section#MSLAppPlutotvWatch").css("display","none")},back:function(){MSLAppManager.load("plutotv")},onMouseMove:function(e,t){var n=Math.abs(e-512)-a.width()/2,o=Math.abs(t-288)-a.height()/2;n<=0&&o<=0?i.css("opacity",1):(n=1-n.clamp(0,40)/40,o=1-o.clamp(0,40)/40,i.css("opacity",Math.min(n,o)))}}}();MSLAppManager.register("plutotvWatch",MSLAppPlutotvWatch,!0);class PlexShow{constructor(e){this.MediaID=e.id??null,this.Type=e.type??null,this.Title=e.title??null,this.Thumb=e.thumb??null}}var MSLAppPlex=function(){const e="MSLAppPlex";var t,n=null,i=null,a=null,o=new Array,r="both",s="Action";let l=!1;const c=new Array,u=new Array,d=new Array,p=new Array,h=new Array,m=new Array,g=new Array,f=new Array,v=new Array,b=new Array,y=new Array,S=new Array;function w(e,t){const n=t.toLowerCase().split(/[\s,\.-:;]+/);if(e.length>0)for(let t=0;t<e.length;++t){let i=!1;for(let a=0;a<n.length;++a){if(e[t].length>2&&-1!=n[a].indexOf(e[t])){i=!0;break}if(e[t].length<=2&&n[a].substring(0,e[t].length)==e[t]){i=!0;break}}if(!i)return!1}return!0}function L(){let e="Movies & Shows";switch(r){case"movies":e="Movies";break;case"shows":e="Shows"}$("input.MSLAppPlexFilterCtrl").attr("placeholder","Filter "+s+" "+e);let t=c;switch(s){case"Animation":t=u;break;case"Comedy":t=d;break;case"Crime":t=p;break;case"Documentary":t=h;break;case"Drama":t=m;break;case"Horror":t=g;break;case"Musical":t=f;break;case"Romance":t=v;break;case"Sci-fi":t=b;break;case"Thriller":t=y;break;case"Western":t=S}i.innerHTML="";const l=function(e,t,n){const i=new Array;for(let a=0;a<e.length;++a)"both"!=t&&e[a].Type[0]!=t[0]||w(n,e[a].Title)&&i.push(e[a]);return i}(t,r,o);for(let e=0;e<l.length;++e){const t=document.createElement("div");t.classList.add("item");const n=document.createElement("div"),o=document.createElement("div");o.classList.add("thumb");const r=document.createElement("img");l[e].ThumbLoaded?(r.setAttribute("src","https://images.plex.tv/photo?scale=1&size=medium-240&url="+encodeURIComponent(l[e].Thumb)),r.ref=l[e]):(r.setAttribute("data-src",l[e].Thumb),r.ref=l[e],r.classList.add("lazy"),a.observe(t));const s=document.createElement("div");s.classList.add("info"),s.innerHTML=l[e].Title,t.addEventListener("click",(()=>{MSLAppManager.load("plexIndex",{mediaID:l[e].MediaID})})),o.append(r),n.append(o),n.append(s),t.append(n),i.append(t)}if(0==l.length){const t=document.createElement("div");t.classList.add("noresult"),t.innerHTML="<p>There are no <strong>"+e+"</strong> in <strong>"+s+"</strong>",o.filter((e=>/\S/.test(e))).length&&(t.innerHTML+='&nbsp;titled "<span>'+o.join(" ").replaceAll(/[<>]+/g,"")+'</span>".'),t.innerHTML+="</p>",i.append(t)}n.Reset(),n.UpdateVisibility()}function M(){$("#underlay > #videoBackground").css("backgroundColor","#333")}function k(){$("body > section").css("display","none"),$("section#"+e).fadeIn(0),n.UpdateVisibility()}function A(e,t){t&&a.unobserve(e);const n=e.getElementsByTagName("img")[0];n&&n.hasAttribute("data-src")&&asyncLoadImagePromise("https://images.plex.tv/photo?scale=1&size=medium-240&url="+encodeURIComponent(n.getAttribute("data-src"))).then((e=>{n.setAttribute("src",e),n.removeAttribute("data-src"),n.classList.add("lazy-loaded"),n.ref&&(n.ref.ThumbLoaded=!0)})).catch((()=>{n.parentNode.remove()}))}function C(e){}function j(e,n){e=void 0!==e?e:{},n=void 0!==n&&n,t=!0,M(),l?L():$.ajax({method:"GET",url:"json/plexFetchShows.php"}).done((function(e){if((e=JSON.parse(e))&&0==e.error&&e?.data?.length){l=!0;for(let t=0;t<e.data.length;++t){const n=e.data[t];let i=n.category;if(n.genre){const e=n.genre.split(", ");-1!=e.indexOf("Documentary")?i="Documentary":-1!=e.indexOf("Animation")?i="Animation":e.length&&(i=e[0])}switch(i){case"Action":c.push(new PlexShow(n));break;case"Animation":u.push(new PlexShow(n));break;case"Comedy":d.push(new PlexShow(n));break;case"Crime":p.push(new PlexShow(n));break;case"Documentary":h.push(new PlexShow(n));break;case"Drama":m.push(new PlexShow(n));break;case"Horror":g.push(new PlexShow(n));break;case"Musical":f.push(new PlexShow(n));break;case"Romance":v.push(new PlexShow(n));break;case"Sci-fi":b.push(new PlexShow(n));break;case"Thriller":y.push(new PlexShow(n));break;case"Western":S.push(new PlexShow(n));break;default:switch(n.category){case"Action":c.push(new PlexShow(n));break;case"Animation":u.push(new PlexShow(n));break;case"Comedy":d.push(new PlexShow(n));break;case"Crime":p.push(new PlexShow(n));break;case"Documentary":h.push(new PlexShow(n));break;case"Drama":m.push(new PlexShow(n));break;case"Horror":g.push(new PlexShow(n));break;case"Musical":f.push(new PlexShow(n));break;case"Romance":v.push(new PlexShow(n));break;case"Sci-fi":b.push(new PlexShow(n));break;case"Thriller":y.push(new PlexShow(n));break;case"Western":S.push(new PlexShow(n))}}}L()}})),k()}return{init:function(){t=!1,backgroundVideo=$("#underlay > video")[0],backgroundVideoSource=$("#underlay > video > source")[0],new VisibilityManager($("section#"+e+" > main > section"),!1,{plexHome:!0}),n=new UndockedScrollbar($("#plexIndex"),$("#plexIndexScroll")),i=document.getElementById("plexIndex"),a=new IntersectionObserver(((e,t)=>{let n=null;for(let t=0;t<e.length;++t)e[t].isIntersecting&&(A(e[t].target,!0),n=e[t].target);for(let e=0;e<10;++e)if(n){if(n=n.nextSibling,!n)break;A(n,!1)}})),$("input.MSLAppPlexFilterCtrl").on("keyup",(function(e){let t=$(this).val();t=t.trim(),o=t.toLowerCase().split(/[\s,\.-:;]+/),L()})),$("button.MSLAppGamesSearchCtrl").click((function(e){let t=$("input.MSLAppPlexFilterCtrl").val();return t=t.trim(),o=t.toLowerCase().split(/[\s,\.-:;]+/),L(),!1}))},preload:C,load:j,open:function(){t||j(),M(),k()},close:function(){$("section#"+e).css("display","none")},back:function(){},selectCategory:function(e,t=!0){!MSLGlobals.isOwner&&MSLGlobals.isLocked&&t?MSLGlobals.Audio.play("denied"):($ctx=$("#plexHome > nav > ul > li"),$ctx.removeClass("selected"),$ctx.each((function(n){if($this=$(this),$this.text()==e)return t&&MSLGlobals.sync&&MSLGlobals.sync.send({c:19,a:0,v:e}),$this.addClass("selected"),s=e,L(),!1})),MSLGlobals.Audio.play("select"))},selectNextType:function(){if(!MSLGlobals.isOwner&&MSLGlobals.isLocked)return void MSLGlobals.Audio.play("denied");$ctx=$("#MSLAppPlex > header > div.categories > div");const e=$ctx.length;$ctx.each((function(t){const n=$(this),i=n.attr("pos");-1==i?n.attr("pos",e-2):n.attr("pos",i-1),0==n.attr("pos")&&(r=n.attr("type"),MSLGlobals.sync&&MSLGlobals.sync.send({c:19,a:1,v:r}),L())})),MSLGlobals.Audio.play("select")},selectType:function(e,t=!0){!MSLGlobals.isOwner&&MSLGlobals.isLocked&&t?MSLGlobals.Audio.play("denied"):(console.log(".... "+e),$ctx=$("#MSLAppPlex > header > div.categories > div"),$both=$ctx.filter("[type='both']"),$movies=$ctx.filter("[type='movies']"),$shows=$ctx.filter("[type='shows']"),"both"==e?($both.attr("pos",0),$movies.attr("pos",1),$shows.attr("pos",-1)):"movies"==e?($both.attr("pos",-1),$movies.attr("pos",0),$shows.attr("pos",1)):"shows"==e&&($both.attr("pos",1),$movies.attr("pos",-1),$shows.attr("pos",0)),r=e,t&&MSLGlobals.sync&&MSLGlobals.sync.send({c:19,a:1,v:r}),L(),MSLGlobals.Audio.play("select"))},passedThroughData:function(e){void 0!==e.a&&(0==e.a&&void 0!==e.v?this.selectCategory(e.v,!1):1==e.a&&void 0!==e.v&&this.selectType(e.v,!1))}}}();MSLAppManager.register("plex",MSLAppPlex,!0);var MSLAppPlexIndex=function(){const e="MSLAppPlexIndex";var t,n=null,i=null,a=null,o=null,r=null,s=null,l=null,c=null,u=null,d=null,p=null,h=null,m=null,g=null,f=null,v=null,b=null,y=null,S=null,w=null,L=null,M=null,k=null,A=null,C=null,j=null,E=null,x=null,T=null,I=null;function P(){$("body > section").css("display","none"),$("section#"+e).fadeIn(0),c.MoveByContent()}function O(e){void 0!==e.mediaID&&(i=e.mediaID)}function D(e,t,n,i){if(0==e.length)return"";let a=e[0];const o=getComputedStyle(n),r=(this.canvas||(this.canvas=document.createElement("canvas"))).getContext("2d");r.font=o.fontWeight+" "+o.fontSize+" '"+o.fontFamily+"'";for(let n=1;n<e.length;++n){const o=a+t+e[n];if(r.measureText(o).width>i)break;a=o}return a}function R(e,n){n=void 0!==n&&n,t=!0,O(e=void 0!==e?e:{}),o.SetAll(!1),k.SetAll(!1),a=null,$.ajax({method:"GET",url:"json/plexFetchEpisodes.php?id="+i,cache:!0}).done((function(e){if((e=JSON.parse(e))&&0==e.error&&e?.data?.title?.length)if("movie"==(a=e.data).type)_(),s.removeClass("disabled").addClass("disabled"),l.removeAttr("disabled").attr("disabled",!0).val("").off(),$categoriesButton.text("Movie"),p.classList.add("movie"),p.classList.remove("show"),r.off().on("click",(()=>{MSLAppManager.load("plex")})),o.SetByID("plexMovieDetails"),c.MoveByContent();else{a.hasMoreThanOneSeason=!1;for(let e=1;e<a.episodes.length;++e)if(a.episodes[e].s!=a.episodes[0].s){a.hasMoreThanOneSeason=!0;break}G()}})),h.style.backgroundImage=A.style.backgroundImage="none",h.classList.remove("loaded"),A.classList.remove("loaded"),P()}function G(){a.hasMoreThanOneSeason?(_(),function(){if(!a)return;k.SetAll(!1);const e=new Array;for(let t=0;t<a.episodes.length;++t)-1==e.indexOf(a.episodes[t].s)&&e.push(a.episodes[t].s);e.sort(((e,t)=>(e=parseInt(e),t=parseInt(t),0==e||e>t?1:e<t?-1:0)));const t=document.createElement("ul");for(let n=0;n<e.length;++n){const i=document.createElement("li");"0"==e[n]?i.innerText="Specials":i.innerText="Season "+e[n],i.addEventListener("click",(()=>{MSLGlobals.Audio.play("start"),N(e[n]),MSLGlobals.sync.send({c:19,a:1,v:e[n]})})),t.append(i)}T.innerHTML="",T.append(t),k.SetByID("plexShowSeasons"),u.MoveByContent()}(),s.removeClass("disabled").addClass("disabled"),l.removeAttr("disabled").attr("disabled",!0).val("").off(),r.off().on("click",(()=>{MSLAppManager.load("plex")})),$categoriesButton.text("Show"),p.classList.remove("movie"),p.classList.add("show"),o.SetByID("plexShowDetails"),u.MoveByContent()):N(a.episodes[0].s)}function N(e){_(),B(e),s.removeClass("disabled"),l.removeAttr("disabled").val(""),l.off().on("keyup",(()=>{B(e,l.val())})),a.hasMoreThanOneSeason?r.off().on("click",(()=>{MSLGlobals.Audio.play("start"),G(),MSLGlobals.sync.send({c:19,a:0})})):r.off().on("click",(()=>{MSLAppManager.load("plex")})),$categoriesButton.text("Show"),p.classList.remove("movie"),p.classList.add("show"),o.SetByID("plexShowDetails"),d.MoveByContent()}function _(){if(!a)return;if(m.innerText=C.innerText=a.title,g.innerText=j.innerText=a.year,h.style.backgroundImage=A.style.backgroundImage="none",h.classList.remove("loaded"),A.classList.remove("loaded"),a.art&&asyncLoadImagePromise(a.art).then((e=>{h.style.backgroundImage="url('"+e+"')",A.style.backgroundImage="linear-gradient(to bottom, rgba(0,0,0, 0.3), rgb(0, 0, 0)), url('"+e+"')",h.classList.add("loaded"),A.classList.add("loaded")})),a.studio?(f.innerText=D(a.studio.split(", "),", ",f,580),E.innerText=D(a.studio.split(", "),", ",E,245),f.style.display=E.style.display="block"):f.style.display=E.style.display="none",a.director?(b.getElementsByTagName("strong")[0].innerText=a.director,b.style.display="block"):b.style.display="none",a.writer?(y.getElementsByTagName("strong")[0].innerText=a.writer,y.style.display="block"):y.style.display="none",S.innerHTML="",a.genre){const e=a.genre.split(", ");for(let t=0;t<e.length;++t){const n=document.createElement("li");n.innerText=e[t],S.append(n)}}a.duration?(w.innerText=a.duration/60/1e3+" min",w.style.display="block"):w.style.display="none",a.rating?v.setAttribute("rating",parseInt(a.rating)):v.setAttribute("rating","5");const e=document.createElement("p");e.innerText=x.innerText=a.summary??"",L.innerHTML="",L.append(e)}function B(e,t=null){if(a&&a.episodes[e]){k.SetAll(!1),I.innerHTML="";for(let n=0;n<a.episodes.length;++n){if(a.episodes[n].s!=e)continue;if(null!=t){const e=parseInt(t);if(isNaN(e)||e!=t){if(-1==a.episodes[n].title.toLowerCase().indexOf(t.toLowerCase()))continue}else if(a.episodes[n].e!=e)continue}const o=document.createElement("div"),r=document.createElement("header"),s=document.createElement("footer");a.episodes[n].thumb?asyncLoadImagePromise(a.art).then((e=>{o.style.backgroundImage="url('"+a.episodes[n].thumb+"')",o.classList.remove("artless")})).catch((()=>{o.style.backgroundImage="",o.classList.add("artless")})):o.classList.add("artless"),r.innerText=a.episodes[n].e,s.innerText=a.episodes[n].title,o.addEventListener("click",(()=>{MSLAppManager.load("plexWatch",{ID:i,s:a.episodes[n].s,e:a.episodes[n].e})})),o.append(r),o.append(s),I.append(o)}k.SetByID("plexShowEpisodes"),d.MoveByContent()}}return{init:function(){t=!1,n=null,backgroundVideo=$("#underlay > video")[0],backgroundVideoSource=$("#underlay > video > source")[0],r=$("section#MSLAppPlexIndex > header > .navBack"),s=$("section#MSLAppPlexIndex > header > .search"),l=s.children("input.MSLAppPlexIndexFilterCtrl"),o=new VisibilityManager($("section#"+e+" > main > section")),k=new VisibilityManager($("div#plexShowDetailsList > section")),c=new UndockedScrollbar($("#plexMovieDetailsSummary"),$("#plexMovieDetailsSummaryScroll")),u=new UndockedScrollbar($("#plexShowSeasonList"),$("#plexShowSeasonListScroll")),d=new UndockedScrollbar($("#plexShowEpisodeList"),$("#plexShowEpisodeListScroll")),document.getElementById("plexIndex"),$categoriesButton=$("#MSLAppPlexIndex > header > div.categories"),p=document.getElementById("MSLAppPlexIndex"),document.getElementById("plexMovieDetails"),h=document.getElementById("plexMovieDetailsArt"),m=document.getElementById("plexMovieDetailsTitle"),g=document.getElementById("plexMovieDetailsYear"),f=document.getElementById("plexMovieDetailsStudio"),v=document.getElementById("plexMovieDetailsRating"),b=document.getElementById("plexMovieDetailsDirectors"),y=document.getElementById("plexMovieDetailsWriters"),S=document.getElementById("plexMovieDetailsGenres"),w=document.getElementById("plexMovieDetailsDuration"),L=document.getElementById("plexMovieDetailsSummary"),M=document.getElementById("plexMoviePlayButton"),document.getElementById("plexShowDetails"),A=document.getElementById("plexShowDetailsInfo"),C=document.getElementById("plexShowDetailsTitle"),j=document.getElementById("plexShowDetailsYear"),E=document.getElementById("plexShowDetailsStudio"),x=document.getElementById("plexShowDetailsSummary"),T=document.getElementById("plexShowSeasonList"),I=document.getElementById("plexShowEpisodeList"),M.addEventListener("click",(()=>{i&&MSLAppManager.load("plexWatch",{ID:i})}))},preload:O,load:R,open:function(){t||(n?R(n):R()),P()},close:function(){$("section#"+e).css("display","none")},back:function(){},setChildAppData:function(e){n=e},passedThroughData:function(e){void 0!==e.a&&(0==e.a?G():1==e.a&&void 0!==e.v&&N(e.v))}}}();MSLAppManager.register("plexIndex",MSLAppPlexIndex,!0);var MSLAppPlexWatch=function(){var e,t,n,i,a,o,r;function s(){$("#underlay > #videoBackground").css("backgroundColor","#000000")}function l(){$("body > section").css("display","none"),$("section#MSLAppPlexWatch").fadeIn()}function c(o,r){r=void 0!==r&&r,t=(o=void 0!==o?o:{}).ID??null,n=o.s??null,i=o.e??null,a=!0,s(),l(),e&&e.destroy();let c="json/plexFetchSource.php?id="+t;n&&i&&(c+="&s="+n+"&e="+i),$.ajax({method:"GET",url:c,cache:!0}).done((function(t){if(!(t=JSON.parse(t))||0!=t.error)return;let n=null;t.data.hlsId&&t.data.hlsId.length>0&&(n="https://vod.provider.plex.tv/library/parts/"+t.data.hlsId+".m3u8?includeAllStreams=1&X-Plex-Token="+MSLGlobals.TokenB),n&&(e.init(),e.load(n))}))}return{init:function(){a=!1,e=new MSLVideoPlayer($("#plexplayer"),{mslSync:!0,controlDefinition:'{ "controls": ["play", "progress", "current-time", "duration", "mute", "volume"] }'}),t=null,n=null,i=null,o=$("section#MSLAppPlexWatch > main > div.fullscreenOverlay"),r=o.children().first(),$(window).blur((function(){o.css("opacity",0)})),$(window).on("mouseout",(function(){o.css("opacity",0)}))},preload:function(e){void 0!==e.ID&&(t=e.ID),void 0!==e.s&&(n=e.s),void 0!==e.e&&(i=e.e)},load:c,open:function(){a||c(),s(),l()},close:function(){e&&e.destroy(),$("section#MSLAppPlexWatch").css("display","none")},back:function(){var e=MSLAppManager.getHandler("plexIndex");e&&e.setChildAppData({mediaID:t,season:n}),MSLAppManager.open("plexIndex")},onMouseMove:function(e,t){var n=Math.abs(e-512)-r.width()/2,i=Math.abs(t-288)-r.height()/2;n<=0&&i<=0?o.css("opacity",1):(n=1-n.clamp(0,40)/40,i=1-i.clamp(0,40)/40,o.css("opacity",Math.min(n,i)))},passedThroughData:function(t){e.fromMslSync(t)}}}();MSLAppManager.register("plexWatch",MSLAppPlexWatch,!0);var MSLAppTwitch=function(){var e,t,n=null,i=(new Array,0),a=0,o="https://api.twitch.tv/helix/streams",r="https://api.twitch.tv/helix/streams",s="https://api.twitch.tv/helix/games",l=o;function c(){n.add({url:l,searchQuery:e});var t=-1!=l.indexOf("?")?"&":"?";$.ajax({url:l+t+"first=47&&language=en",cache:!1,jsonp:"callback",dataType:"json",headers:{"Client-ID":"pkw88geycwcizxu9ypyczzgmr9gxguh",Authorization:atob(MSLGlobals.Token)},success:function(e){var t,n=$("section#MSLAppTwitch > main > div.videoResults");n.empty(),i=1,a=0;for(var o=e.data,r=new Array,l=new Array,c=0;c<o.length;c++){var d=o[c].thumbnail_url;d=(d=d.replace("{width}","222")).replace("{height}","124"),o[c].viewer_count>=1e3&&(o[c].viewer_count=Math.round(o[c].viewer_count/1e3)+"k"),r.push({id:o[c].user_name,thumbnail:d,game:o[c].game_id,viewers:o[c].viewer_count,name:o[c].title}),l.push(o[c].game_id)}$.ajax({url:s+"?id="+l.join("&id="),cache:!1,jsonp:"callback",dataType:"json",headers:{"Client-ID":"pkw88geycwcizxu9ypyczzgmr9gxguh",Authorization:atob(MSLGlobals.Token)},success:function(e){for(var o=e.data,s=0;s<r.length;++s){var l=Math.floor(s/8),c=s%4;s%8==0&&(a++,(t=$(document.createElement("div"))).attr("id","page-"+l),t.addClass("page"),l>0&&t.css("display","none"),n.append(t));var d=$(document.createElement("div")),p=$(document.createElement("img")),h=$(document.createElement("div")),m=$(document.createElement("div")),g=$(document.createElement("p")),f=$(document.createElement("p")),v=$(document.createElement("p"));if(m.append(f),m.append(v),h.append(g),d.append(p),d.append(h),d.append(m),d.addClass("twitchVideoResult"),d.addClass("videoResult"),h.addClass("title"),m.addClass("statistics"),p.attr("src",r[s].thumbnail),p.addClass("unselectable"),v.text(r[s].viewers+" viewers"),r[s].name=r[s].name.replace(/(&#39;)/g,"'"),r[s].name.length>95){r[s].name=r[s].name.substr(0,88);var b=r[s].name.lastIndexOf(" ");r[s].name=-1!=b?r[s].name.substr(0,b)+" [...]":r[s].name+" [...]"}g.text(r[s].name);var y=o.find((function(e){return e.id==this}),r[s].game);void 0!==y?f.text(y.name):f.text(""),d.attr("onclick","MSLAppManager.load( 'twitchWatch', {videoID: '"+r[s].id+"'});"),d.on("mouseenter",(function(e){MSLGlobals.Audio.play("hover")})),3==c&&d.addClass("lastInRow"),t.append(d)}u(),$("#MSLAppTwitch #currentPageNum").text(i),$("#MSLAppTwitch #totalPageNum").text(a)}})}})}function u(){i==a?$("#MSLAppTwitch #pageControlNext").removeClass("active"):$("#MSLAppTwitch #pageControlNext").addClass("active"),1==i?$("#MSLAppTwitch #pageControlPrev").removeClass("active"):$("#MSLAppTwitch #pageControlPrev").addClass("active")}function d(e,t){e=void 0!==e?e:1,t=void 0===t||t,MSLGlobals.Audio.play("select"),e<1&&(e=1),e>a&&(e=a),t&&MSLGlobals.sync&&MSLGlobals.sync.send({c:71,value:e}),i=e,u(),$("#MSLAppTwitch .page").css("display","none"),$("#MSLAppTwitch #page-"+(e-1)).fadeIn(),$("#MSLAppTwitch #currentPageNum").text(e)}function p(){$("#underlay > #videoBackground").css("backgroundColor","#7F5ACB"),$("#underlay > #videoBackground").css("mix-blend-mode","color")}function h(){$("body > section").css("display","none"),$("section#MSLAppTwitch").fadeIn()}function m(t){void 0!==t.page&&t.page,void 0!==t.search&&(e=t.search)}function g(i,s){i=void 0!==i?i:{},(s=void 0!==s&&s)&&(i.search=void 0!==i.search?i.search:""),t=!0,m(i);var u=void 0!==i.search&&i.search;l=!1!==u&&u.length?r+"?channel="+u:o,!a||s?(n=new MSLHistory($("section#MSLAppTwitch")),e=u,c(),$("input.MSLAppTwitchSearchCtrl").val(u||"")):!1!==u&&u!=e&&(e=u,c(),$("input.MSLAppTwitchSearchCtrl").val(u||"")),p(),h()}return{init:function(){t=!1,null,$("#MSLAppTwitch #pageControlPrev").click((function(){MSLGlobals.isOwner||!MSLGlobals.isLocked?--i<1?i++:d(i):MSLGlobals.Audio.play("denied")})),$("#MSLAppTwitch #pageControlNext").click((function(){MSLGlobals.isOwner||!MSLGlobals.isLocked?++i>a?i--:d(i):MSLGlobals.Audio.play("denied")})),$("input.MSLAppTwitchSearchCtrl").keypress((function(e){if(13==e.which)return MSLGlobals.Audio.play("button"),MSLAppTwitch.search($("input.MSLAppTwitchSearchCtrl").val()),!1})),$("button.MSLAppTwitchSearchCtrl").click((function(e){return MSLGlobals.Audio.play("button"),MSLAppTwitch.search($("input.MSLAppTwitchSearchCtrl").val()),!1}))},preload:m,load:g,open:function(){t||g(),p(),h()},close:function(){$("section#MSLAppTwitch").css("display","none")},page:d,back:function(t){if(t=void 0===t||t,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&t)MSLGlobals.Audio.play("denied");else{var i=n.back();null!==i&&(MSLGlobals.Audio.play("back"),t&&MSLGlobals.sync&&MSLGlobals.sync.send({c:70}),query=i.searchQuery,e=i.searchQuery,l=i.url,c(),$("input.MSLAppTwitchSearchCtrl").val(e||""))}},search:function(e,t){e=void 0!==e?e:"",t=void 0===t||t,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&t?MSLGlobals.Audio.play("denied"):MSLAppManager.load("twitchWatch",{videoID:e})}}}();MSLAppManager.register("twitch",MSLAppTwitch,!0);var MSLAppTwitchWatch=function(){var e,t,n,i,a;function o(){$("#underlay > #videoBackground").css("backgroundColor","#7F5ACB")}function r(){$("body > section").css("display","none"),$("section#MSLAppTwitchWatch").fadeIn()}function s(e){void 0!==e.videoID&&e.videoID}function l(i,a){i=void 0!==i?i:{},a=void 0!==a&&a,n=!0,o(),s(i);var l=void 0!==i.videoID?i.videoID:"";(t=$(document.createElement("iframe"))).attr("src","https://player.twitch.tv/?channel="+l+"&parent="+MSLGlobals.Domain),t.css("width","1024px"),t.css("height","576px"),t.css("border","none"),e.empty(),e.append(t),r()}return{init:function(){t=null,n=!1,null,e=$("#twitchplayer"),i=$("section#MSLAppTwitchWatch > main > div.fullscreenOverlay"),a=i.children().first(),$(window).blur((function(){i.css("opacity",0)})),$(window).on("mouseout",(function(){i.css("opacity",0)}))},preload:s,load:l,open:function(){n||l(),o(),r()},close:function(){t&&(t.remove(),e.empty()),$("section#MSLAppTwitchWatch").css("display","none")},onMouseMove:function(e,t){var n=Math.abs(e-512)-a.width()/2,o=Math.abs(t-288)-a.height()/2;n<=0&&o<=0?i.css("opacity",1):(n=1-n.clamp(0,40)/40,o=1-o.clamp(0,40)/40,i.css("opacity",Math.min(n,o)))}}}();MSLAppManager.register("twitchWatch",MSLAppTwitchWatch,!0);var MSLAppAdult=function(){var e,t,n,i,a=new Array,o=new Array,r="",s=0,l=0;function c(e,t,i){i=void 0===i?null:i,"none"==(t=void 0===t?"":t)&&(t=""),r=e=void 0===e?"":e,s=t,function(){if(a.length){var e=a[a.length-1];if(e.search==r&&e.category==s)return}a.push({search:r,category:s}),d()}(),$.ajax({method:"GET",url:"json/adultSearch.php?q="+encodeURIComponent(e)+"&t="+t}).done((function(t,a){"success"!=a&&(t="[]");var o,r=JSON.parse(t),s=r.length,c=$("section#MSLAppAdult > main > div.videoResults");if(c.empty(),n=1,l=0,0!=s)for(var d=0;d<s;d++){var p=Math.floor(d/8),h=d%4;d%8==0&&(l++,(o=$(document.createElement("div"))).attr("id","page-"+p),o.addClass("page"),p>0&&o.css("display","none"),c.append(o));var m=$(document.createElement("div")),g=$(document.createElement("div")),f=$(document.createElement("img")),v=$(document.createElement("div")),b=$(document.createElement("div")),y=$(document.createElement("p")),S=$(document.createElement("p")),w=$(document.createElement("p"));b.append(S),b.append(w),v.append(y),g.addClass("imgSlideshow"),g.append(f),m.append(g),m.append(v),m.append(b),m.addClass("youtubeVideoResult"),m.addClass("videoResult"),v.addClass("title"),b.addClass("statistics"),y.text(r[d].title),S.text(r[d].views+" views"),w.text(r[d].published),f.attr("src",r[d].thumbnail),f.addClass("unselectable");var L=0;for(L=0;L<r[d].thumbSequences;L++)g.append($document.createElement("img").addClass("unselectable").attr("src",r[d].thumbSequences[L]));m.attr("onclick","MSLAppManager.load( 'adultWatch', {videoID: '"+r[d].id+"'});"),m.on("mouseenter",(function(e){MSLGlobals.Audio.play("hover")})),3==h&&m.addClass("lastInRow"),o.append(m),u(),$("#MSLAppAdult > footer #currentPageNum").text(n),$("#MSLAppAdult > footer #totalPageNum").text(l)}else if(""==e){const e=$(document.createElement("div"));e.addClass("criticalAppError");const t=$(document.createElement("div")),n=$(document.createElement("h1"));n.text("RedTube API is down :(");const i=$(document.createElement("p"));i.text("This should only be temporary. We do not know for how long. Please try again later. In the mean time, you can probably still visit RedTube through the Browser App (www.redtube.com)."),t.append(n),t.append(i),e.append(t),c.append(e)}else{const e=$(document.createElement("div"));e.addClass("criticalAppError");const t=$(document.createElement("div")),n=$(document.createElement("h1"));n.text("No search results");const i=$(document.createElement("p"));i.text("The search query you entered yielded no results. Be mindful that if you are in a category, it will only search in that category. Please try broadening your search."),t.append(n),t.append(i),e.append(t),c.append(e)}null!==i&&MSLAppAdult.page(i)}))}function u(){n==l?$("#MSLAppAdult > footer #pageControlNext").removeClass("active"):$("#MSLAppAdult > footer #pageControlNext").addClass("active"),1==n?$("#MSLAppAdult > footer #pageControlPrev").removeClass("active"):$("#MSLAppAdult > footer #pageControlPrev").addClass("active")}function d(){var e=$("#MSLAppAdult > header > div.navBack");a.length>1?(e.removeClass("disabled"),e.css("cursor","pointer")):(e.addClass("disabled"),e.css("cursor","auto"))}function p(e,t){e=void 0!==e?e:1,t=void 0===t||t,MSLGlobals.Audio.play("select"),e<1&&(e=1),e>l&&(e=l),t&&MSLGlobals.sync&&MSLGlobals.sync.send({c:31,value:e}),n=e,u(),$("#MSLAppAdult .page").css("display","none"),$("#MSLAppAdult #page-"+(e-1)).fadeIn(),$("#MSLAppAdult > footer #currentPageNum").text(e)}function h(){$("#underlay > #videoBackground").css("backgroundColor","#000000"),$("#underlay > #videoBackground").css("mix-blend-mode","color")}function m(){$("section#MSLAppAdult > main").css("display","none"),$("section#MSLAppAdult > main#main").css("display",""),$("section#MSLAppAdult > footer > .pageControls").css("display",""),$("body > section").css("display","none"),$("section#MSLAppAdult").fadeIn()}function g(e){void 0!==e.page&&(t=e.page),void 0!==e.search&&(r=e.search),void 0!==e.category&&(s=e.category)}function f(n,i){n=void 0!==n?n:{},(i=void 0!==i&&i)&&(n.search=void 0!==n.search?n.search:"",n.category=void 0!==n.category?n.category:0),e=!0,h(),g(n);var a=void 0!==n.search&&n.search,o=void 0!==n.category&&n.category;0==l?(c(a=!1!==a?a:r,o=!1!==o?o:s,t),t=null):!1===a&&!1===o||(c(a=!1!==a?a:"",o=!1!==o?o:0,t),t=null),a||(a=""),$("input.MSLAppAdultSearchCtrl").val(r),v(s),d(),m()}function v(e){if(e&&"none"!=e){for(var t=o.length;t--;)if(o[t]==e){$("#MSLAppAdult > header > div.categories").text(o[t]);break}}else $("#MSLAppAdult > header > div.categories").text("Categories")}function b(){MSLGlobals.Audio.play("button"),$("section#MSLAppAdult > header > div.navButton").css("opacity","1").css("pointer-events",""),$("section#MSLAppAdult > header > div.appLogo").css("opacity","1").css("pointer-events",""),$("section#MSLAppAdult > header > div.search").css("opacity","1").css("pointer-events",""),$("section#MSLAppAdult > main#main").css("display","block"),$("section#MSLAppAdult > footer > div.pageControls").css("display","block"),$("section#MSLAppAdult > main#categories").css("display","none")}return{init:function(){e=!1,t=null,$.ajax({method:"GET",url:"data/adultCategories.json"}).done((function(e){for(var t=e.length,n=0;n<t;n++){o.push(e[n]);var a=$(document.createElement("li"));a.attr("id",e[n]),a.text(e[n]),a.on("click",(function(){MSLAppAdult.category($(this).attr("id"))})),i.add(a)}o.push({id:0,title:"None"})})),i=new MSLPaginator($("#MSLAppAdult > main#categories > div.tagResults"),{$controls:$("#MSLAppAdult > main#categories > .pageControls"),resultsPerPage:48,rows:1,pageContainerType:"ul",pageContainerClass:"tags"}),$("#MSLAppAdult > footer #pageControlPrev").click((function(){MSLGlobals.isOwner||!MSLGlobals.isLocked?--n<1?n++:p(n):MSLGlobals.Audio.play("denied")})),$("#MSLAppAdult > footer #pageControlNext").click((function(){MSLGlobals.isOwner||!MSLGlobals.isLocked?++n>l?n--:p(n):MSLGlobals.Audio.play("denied")})),$("input.MSLAppAdultSearchCtrl").keypress((function(e){if(13==e.which)return MSLAppAdult.search($("input.MSLAppAdultSearchCtrl").val()),!1})),$("button.MSLAppAdultSearchCtrl").click((function(e){return MSLAppAdult.search($("input.MSLAppAdultSearchCtrl").val()),!1})),$("section#MSLAppAdult > header > div.categories").on("click",MSLAppAdult.categoryButtonCallback)},preload:g,load:f,open:function(){e||f(),h(),m()},close:function(){$("section#MSLAppAdult").css("display","none")},page:p,back:function(e){if(e=void 0===e||e,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&e)MSLGlobals.Audio.play("denied");else if(!(a.length<=1)){MSLGlobals.Audio.play("back"),e&&MSLGlobals.sync&&MSLGlobals.sync.send({c:30}),a.pop();var t=a.pop();c(t.search,t.category),$("input.MSLAppAdultSearchCtrl").val(r),v(s),d()}},search:function(e,t){e=void 0!==e?e:"",t=void 0===t||t,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&t?MSLGlobals.Audio.play("denied"):(MSLGlobals.Audio.play("button"),t&&MSLGlobals.sync&&MSLGlobals.sync.send({c:32,query:e}),c(e,s),$("input.MSLAppAdultSearchCtrl").val(e),b())},category:function(e,t){e=void 0!==e?e:0,t=void 0===t||t,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&t?MSLGlobals.Audio.play("denied"):(t&&MSLGlobals.sync&&MSLGlobals.sync.send({c:33,category:e}),c(r,e),$("#MSLAppAdult > main > ul.categoryResults").hide(),b(),v(e))},categoryButtonCallback:function(){"none"==$("section#MSLAppAdult > main#main").css("display")?b():(MSLGlobals.Audio.play("button"),$("section#MSLAppAdult > header > div.navButton").css("opacity",".4").css("pointer-events","none"),$("section#MSLAppAdult > header > div.appLogo").css("opacity",".4").css("pointer-events","none"),$("section#MSLAppAdult > header > div.search").css("opacity",".4").css("pointer-events","none"),$("section#MSLAppAdult > main#main").css("display","none"),$("section#MSLAppAdult > footer > div.pageControls").css("display","none"),$("section#MSLAppAdult > main#categories").css("display","block"))}}}();MSLAppManager.register("adult",MSLAppAdult,!0);var MSLAppAdultWatch=function(){var e,t,n,i;function a(){$("#underlay > #videoBackground").css("backgroundColor","#000000"),$("#underlay > #videoBackground").css("mix-blend-mode","color")}function o(){$("body > section").css("display","none"),$("section#MSLAppAdultWatch").fadeIn()}function r(e){void 0!==e.videoID&&e.videoID}function s(n,i){n=void 0!==n?n:{},i=void 0!==i&&i,t=!0,a(),r(n),e&&e.destroy();var s=void 0!==n.videoID?n.videoID:"";$.ajax({method:"GET",url:"json/adultFetchSource.php?id="+s,cache:!1}).done((function(t){var n=JSON.parse(t);n.length>0&&(n=n[0]),e.init(),e.load(n)})),o()}return{init:function(){t=!1,null,n=$("section#MSLAppAdultWatch > main > div.fullscreenOverlay"),i=n.children().first(),e=new MSLVideoPlayer($("#plyr-adult-container"),{mslSync:!0,controlDefinition:'{ "controls": ["play", "progress", "current-time", "duration", "mute", "volume"] }'}),$(window).blur((function(){n.css("opacity",0)})),$(window).on("mouseout",(function(){n.css("opacity",0)}))},preload:r,load:s,open:function(){t||s(),a(),o()},close:function(){e&&e.destroy(),$("section#MSLAppAdultWatch").css("display","none")},onMouseMove:function(e,t){var a=Math.abs(e-512)-i.width()/2,o=Math.abs(t-288)-i.height()/2;a<=0&&o<=0?n.css("opacity",1):(a=1-a.clamp(0,40)/40,o=1-o.clamp(0,40)/40,n.css("opacity",Math.min(a,o)))},passedThroughData:function(t){e.fromMslSync(t)}}}();MSLAppManager.register("adultWatch",MSLAppAdultWatch,!0);var MSLAppHHaven=function(){var e,t,n,i,a,o,r,s,l,c,u;function d(){$("#underlay > #videoBackground").css("backgroundColor","#323232"),$("#underlay > #videoBackground").css("mix-blend-mode","overlay")}function p(){$("body > section").css("display","none"),$("section#MSLAppHHaven > main").css("display","none"),$("section#MSLAppHHaven > main#main").css("display",""),$("section#MSLAppHHaven").fadeIn()}function h(e){if(0!=e.children().length)return;const t=e.attr("src-data");if(t)new Promise(((e,n)=>{setTimeout((()=>{const i=new Image;i.addEventListener("load",(function(){e(i)})),i.addEventListener("error",(function(){n()})),i.src=t}),0)})).then((function(n){var i=$(document.createElement("img"));i.addClass("unselectable"),i.attr("src",t),e.append(i)})).catch((function(t){var n=$(document.createElement("img"));n.addClass("unselectable"),n.attr("src","/images/apps/adult/artwork_unavailable.png"),e.append(n)}));else{var n=$(document.createElement("img"));n.addClass("unselectable"),n.attr("src","/images/apps/adult/artwork_unavailable.png"),e.append(n)}}function m(e){if(e=void 0===e||e,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&e)MSLGlobals.Audio.play("denied");else{if(MSLGlobals.Audio.play("button"),e&&MSLGlobals.sync&&MSLGlobals.sync.send({c:50,section:"categoryList"}),!o){var t=$(document.createElement("div")).addClass("loading").addClass("fullpage"),n=$(document.createElement("h1"));n.text("Loading.."),t.append(n),l.getContainer().append(t),$.ajax({method:"GET",url:"json/hhavenTags.php"}).done((function(e,n,i){let o;if(t.remove(),200==i.status&&0!=e.length&&(o=JSON.tryParse(e))){if(0==o.error&&o.data.length)for(var r=o.data.length,s=0;s<r;s++){var c=$(document.createElement("li"));c.attr("id",o.data[s][0]),c.text(o.data[s][1]),c.on("click",(function(){MSLAppHHaven.tagSelectionToggle($(this))})),l.add(c)}for(s=0;s<a.length;s++)MSLAppHHaven.tagSelectionToggle(a[s],!0,!1)}})),o=!0}$("section#MSLAppHHaven > header > .navButton").css("opacity",".4").css("pointer-events","none"),$("section#MSLAppHHaven > header > .appLogo").css("opacity",".4").css("pointer-events","none"),$("section#MSLAppHHaven > header > .search").css("opacity",".4").css("pointer-events","none"),$("section#MSLAppHHaven > main").css("display","none"),$("section#MSLAppHHaven > footer > div.pageControls").css("display","none"),$("section#MSLAppHHaven > main#categories").css("display","block")}}function g(e){void 0!==e.search&&(n=e.search),void 0!==e.tagsPage&&null!==e.tagsPage&&(i=!0),void 0!==e.tags&&(a=e.tags)}function f(t,a){t=void 0!==t?t:{},a=void 0!==a&&a,e=!0,function(){if(!c){var e=$(document.createElement("div")).addClass("loading").addClass("fullpage"),t=$(document.createElement("h1"));t.text("Loading.."),e.append(t),l.getContainer().append(e),$.ajax({method:"GET",url:"json/hhavenVideos.php"}).done((function(t){e.remove();var i=JSON.parse(t);if(0==i.error&&i.data.length)for(var a=0;a<i.data.length;a++){var o=$(document.createElement("section")),r=$(document.createElement("header"));r.attr("src-data",i.data[a].coverArt),a<4&&h(r),o.append(r);var s=$(document.createElement("main")),l=$(document.createElement("h2"));l.html(i.data[a].title),s.append(l),o.append(s);var c="";for(var d in i.data[a])i.data[a].hasOwnProperty(d)&&"coverArt"!=d&&(c+=" "+i.data[a][d]);var p=i.data[a].title.charAt(0).toLowerCase();p>=0&&p<=9&&(p="#"),o.attr("search-data",c),o.attr("letter",p),o.attr("onclick","MSLAppManager.load( 'hhavenDetails', {ID: '"+i.data[a].id+"'});"),o.on("mouseenter",(function(e){MSLGlobals.Audio.play("hover")})),u.add(o)}n&&MSLAppHHaven.search(n,!1)})),c=!0}}(),d(),g(t),p(),i&&m(!1)}return{init:function(){e=!1,n="",i=!1,o=!1,r=new Array,s=new Array,a=new Array,l=new MSLPaginator($("#MSLAppHHaven > main#categories > div.tagResults"),{$controls:$("#MSLAppHHaven > main#categories > .pageControls"),resultsPerPage:48,rows:1,pageContainerType:"ul",pageContainerClass:"tags"}),u=new MSLPaginator($("#MSLAppHHaven > main#main > div.videoResults"),{syncID:54,$controls:$("#MSLAppHHaven > footer > .pageControls"),resultsPerPage:4,rows:1,onPageChange:function(e){for(var n=u.getCurrentPageByLastProperty("letter"),i=0;i<t.m_filtered.length;i++){if(n==t.m_collection[t.m_filtered[i]].$DOM.text().charAt(0).toLowerCase()){t.select(t.m_filtered[i],!1);break}}const a=e.find("section > header");for(let e=0;e<a.length;++e)h(a.eq(e))}}),$("section#MSLAppHHaven > header > div.categories").on("click",MSLAppHHaven.categoryButtonCallback),$("input.MSLAppHHavenSearchCtrl").keypress((function(e){if(13==e.which)return MSLGlobals.Audio.play("button"),MSLAppHHaven.search($("input.MSLAppHHavenSearchCtrl").val()),!1})),$("button.MSLAppHHavenSearchCtrl").click((function(e){return MSLGlobals.Audio.play("button"),MSLAppHHaven.search($("input.MSLAppHHavenSearchCtrl").val()),!1})),(t=new RailMenu($("#MSLAppHHaven #selector"),{})).settings.onSelect=function(e,t){var n=e.$DOM.text().charAt(0).toLowerCase();!MSLGlobals.isOwner&&MSLGlobals.isLocked&&t?MSLGlobals.Audio.play("denied"):(t&&MSLGlobals.sync&&MSLGlobals.sync.send({c:51,value:n}),u.pageByProperty("letter",n))},t.present()},preload:g,load:f,open:function(){e||f(),d(),p()},close:function(){$("section#MSLAppHHaven").css("display","none")},page:function(e,t){u.page(e,t)},categoryButtonCallback:function(e,t){"object"==typeof e?(e="none"!=$("section#MSLAppHHaven > main#main").css("display"),t=!0):(e=void 0!==e&&e,t=void 0===t||t),e?m(t):function(e){if(e=void 0===e||e,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&e)return void MSLGlobals.Audio.play("denied");MSLGlobals.Audio.play("button"),e&&MSLGlobals.sync&&MSLGlobals.sync.send({c:50,section:null}),$("section#MSLAppHHaven > header > .navButton").css("opacity","1").css("pointer-events",""),$("section#MSLAppHHaven > header > .appLogo").css("opacity","1").css("pointer-events",""),$("section#MSLAppHHaven > header > .search").css("opacity","1").css("pointer-events",""),$("section#MSLAppHHaven > main").css("display","none"),$("section#MSLAppHHaven > main#main").css("display","block"),$("section#MSLAppHHaven > footer > div.pageControls").css("display","block");const t=u.getCurrentPage().find("section > header");for(let e=0;e<t.length;++e)h(t.eq(e))}(t)},tagSelectionToggle:function(e,t,i){if(e=e instanceof jQuery?e:$("section#MSLAppHHaven > main#categories > div.tagResults").find("#"+e).first(),t=void 0!==t?t:null,i=void 0===i||i,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&i)MSLGlobals.Audio.play("denied");else{var a=e.attr("id"),o=r.indexOf(a);-1!=o&&!0!==t?(i&&MSLGlobals.sync&&MSLGlobals.sync.send({c:52,id:a,val:!1}),r.splice(o,1),s.splice(o,1),e.removeClass("selected")):-1==o&&!1!==t&&r.length<4&&(i&&MSLGlobals.sync&&MSLGlobals.sync.send({c:52,id:a,val:!0}),r.push(a),s.push(e.text().toLowerCase()),e.addClass("selected")),MSLAppHHaven.search(n+"|"+s.join("|")),$("section#MSLAppHHaven > header > div.categories").attr("num",r.length),$("section#MSLAppHHaven #numActiveTags").text(r.length)}},search:function(e,t){e=void 0!==e?e:"",t=void 0===t||t,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&t?MSLGlobals.Audio.play("denied"):(e=e+"|"+s.join("|"),n=e.split("|")[0],t&&MSLGlobals.sync&&MSLGlobals.sync.send({c:53,query:e}),u.search(e),$("input.MSLAppHHavenSearchCtrl").val(n))},select:function(e,t){t=void 0===t||t,!MSLGlobals.isOwner&&MSLGlobals.isLocked&&t?MSLGlobals.Audio.play("denied"):u.pageByProperty("letter",e)}}}();MSLAppManager.register("hhaven",MSLAppHHaven,!0);var MSLAppHHavenDetails=function(){var e,t,n;function i(){$("#underlay > #videoBackground").css("backgroundColor","#323232"),$("#underlay > #videoBackground").css("mix-blend-mode","overlay")}function a(){$("body > section").css("display","none"),$("section#MSLAppHHavenDetails").fadeIn()}function o(e){}function r(o,r){r=void 0!==r&&r,void 0!==(o=void 0!==o?o:{}).ID?(e=!0,function(e){if(n!=e){var i=$(document.createElement("div")).addClass("loading").addClass("fullpage"),a=$(document.createElement("h1"));a.text("Loading.."),i.append(a),t.clear(),t.getContainer().append(i),$.ajax({method:"GET",url:"json/hhavenEpisodes.php",data:{SerieID:e}}).done((function(a,o,r){if(i.remove(),200==r.status&&0==(a=JSON.parse(a)).error){n=e;var s=$(document.createElement("section"));if(void 0!==a.data.info.coverArt&&null!==a.data.info.coverArt){var l=$(document.createElement("header")),c=$(document.createElement("img"));c.addClass("unselectable"),c.attr("src",a.data.info.coverArt),l.append(c),s.append(l)}var u=$(document.createElement("main"));if(void 0!==a.data.info.title&&null!==a.data.info.title){var d=a.data.info.title.substr(0,48);if(48==d.length){var p=d.lastIndexOf(" ");-1!=p&&(d=d.substr(0,p)+" ...")}$("section#MSLAppHHavenDetails > header > h1").html(d)}if(void 0!==a.data.info.alternativeTitle&&null!==a.data.info.alternativeTitle&&((y=$(document.createElement("h1"))).html("Alternative titles:<br />"+a.data.info.alternativeTitle),u.append(y)),void 0!==a.data.info.description&&null!==a.data.info.description){var h=$(document.createElement("div"));h.addClass("body"),h.html(a.data.info.description),u.append(h);var m=$(document.createElement("div"));m.addClass("scrollbar");var g=$(document.createElement("div"));g.addClass("track");var f=$(document.createElement("div"));f.addClass("thumb"),g.append(f),m.append(g),u.append(m)}s.append(u),t.add(s);var v=new UndockedScrollbar(h,m);v.Reset(),v.UpdateVisibility();for(var b=0;b<a.data.episodes.length;b++){var y,S=$(document.createElement("section")),w=$(document.createElement("header")),L=$(document.createElement("img"));L.addClass("unselectable"),L.attr("src",a.data.episodes[b].imageThumbnails[0]),w.append(L),S.append(w),u=$(document.createElement("main")),(y=$(document.createElement("h2"))).text("Episode "+a.data.episodes[b].episode),u.append(y),S.append(u),S.attr("onclick","MSLAppManager.load( 'hhavenWatch', {ID: '"+a.data.episodes[b].id+"'});"),S.on("mouseenter",(function(e){MSLGlobals.Audio.play("hover")})),t.add(S)}}}))}}(o.ID),i(),a()):MSLAppManager.open("hhaven")}return{init:function(){e=!1,n=null,t=new MSLPaginator($("#MSLAppHHavenDetails > main > div.videoResults"),{$controls:$("#MSLAppHHavenDetails > footer > .pageControls"),resultsPerPage:8,rows:2,firstAddSpace:4})},preload:o,load:r,open:function(){e||r(),i(),a()},close:function(){$("section#MSLAppHHavenDetails").css("display","none")}}}();MSLAppManager.register("hhavenDetails",MSLAppHHavenDetails,!0);var MSLAppHHavenWatch=function(){var e,t,n,i,a;function o(){$("#underlay > #videoBackground").css("backgroundColor","#000000"),$("#underlay > #videoBackground").css("mix-blend-mode","color")}function r(){$("body > section").css("display","none"),$("section#MSLAppHHavenWatch").fadeIn()}function s(i,a){a=void 0!==a&&a,t=(i=void 0!==i?i:{}).ID,n=!0,o(),e&&e.destroy(),$.ajax({method:"GET",url:"json/hhavenSource.php?id="+parseInt(t,10),headers:{"X-SECONDLIFE-OBJECT-KEY":MSLGlobals.uuid}}).done((function(t,n){0==(t=JSON.parse(t)).error&&"object"==typeof t.data&&(e.init(),e.poster=t.data.poster,e.load(t.data.source480p??t.data.source720p??t.data.source1080p??t.data.source360p))})),r()}return{init:function(){n=!1,t=null,document.getElementById("plyr-hanime-container"),e=new MSLVideoPlayer($("#plyr-hanime-container"),{mslSync:!0,antiCors:!0,controlDefinition:'{ "controls": ["play", "progress", "current-time", "duration", "mute", "volume"] }'}),null,i=$("section#MSLAppHHavenWatch > main > div.fullscreenOverlay"),a=i.children().first(),$(window).blur((function(){i.css("opacity",0)})),$(window).on("mouseout",(function(){i.css("opacity",0)}))},preload:function(e){void 0!==e.ID&&(t=e.ID)},load:s,open:function(){n||s(),o(),r()},close:function(){e&&e.destroy(),$("section#MSLAppHHavenWatch").css("display","none")},onMouseMove:function(e,t){var n=Math.abs(e-512)-a.width()/2,o=Math.abs(t-288)-a.height()/2;n<=0&&o<=0?i.css("opacity",1):(n=1-n.clamp(0,40)/40,o=1-o.clamp(0,40)/40,i.css("opacity",Math.min(n,o)))},passedThroughData:function(t){e.fromMslSync(t)}}}();MSLAppManager.register("hhavenWatch",MSLAppHHavenWatch,!0);const MSLAppGamesData=[{title:"Super Mario World",developer:"Nintendo EAD",year:"1990",system:"Super Nintendo Entertainment System",sysID:"snes",description:["During a vacation in Dinosaur Land, Princess Toadstool gets kidnapped and a spell is cast on the inhabitants of the island. When they stumble upon Yoshi, a young dinosaur, Mario and Luigi learn that Bowser is responsible for the terrible misdeeds. Now, Yoshis are trapped in magical eggs that Bowser has hidden throughout seven castles.","Many hidden paths aid Mario in making his way to Bowser's castle, completing 74 areas, and finding all 96 exits. Discover items, including a feather that gives Mario a cape that allows him to fly and a flower that lets him shoot fireballs, in layers upon layers of 2-D scrolling landscapes. You can even ride Yoshi and swallow your enemies!"],thumbnails:"https://i.imgur.com/gnfvtRZ.png",hostName:"ArcadeSpot",hostImage:"host_arcadespot.png",rom:"//static.arcadespot.com/wp-content/uploads/2015/11/super-mario-world.smc",manual:"https://www.nintendo.co.jp/clvs/manuals/common/pdf/CLV-P-SAAAE.pdf",manual_images:["https://i.imgur.com/qHejTcp.jpg","https://i.imgur.com/go2ejU0.jpg","https://i.imgur.com/wK9RY7M.jpg","https://i.imgur.com/IMn5cCe.jpg","https://i.imgur.com/Cg09DWX.jpg","https://i.imgur.com/fIW6Xqb.jpg","https://i.imgur.com/IGG8gCc.jpg","https://i.imgur.com/W0aermU.jpg","https://i.imgur.com/AZXWbZZ.jpg","https://i.imgur.com/bR1fLae.jpg","https://i.imgur.com/6TFk9Gn.jpg","https://i.imgur.com/fENwNHp.jpg","https://i.imgur.com/sh0Om0Z.jpg","https://i.imgur.com/NXOouJY.jpg","https://i.imgur.com/LzB1ahI.jpg","https://i.imgur.com/Ute46pO.jpg","https://i.imgur.com/AJDljTO.jpg","https://i.imgur.com/AdCB2Lr.jpg","https://i.imgur.com/o1jkRV6.jpg","https://i.imgur.com/mPaFPee.jpg","https://i.imgur.com/Y3ySAPu.jpg","https://i.imgur.com/hXv3WSh.jpg","https://i.imgur.com/8q9hYBN.jpg","https://i.imgur.com/GIvl71q.jpg","https://i.imgur.com/OElXjzv.jpg","https://i.imgur.com/dCxsZdm.jpg","https://i.imgur.com/iBEkFkD.jpg","https://i.imgur.com/2R3rHX4.jpg","https://i.imgur.com/iKoqgXt.jpg","https://i.imgur.com/aQRoJAT.jpg","https://i.imgur.com/EG3vOjN.jpg","https://i.imgur.com/98pgCoF.jpg"],midi:"https://www.dropbox.com/s/ne00jbmcat67noc/SNES_1.ogg?dl=1",midi_volume:.5},{title:"Super Mario Kart",developer:"Nintendo EAD",year:"1992",system:"Super Nintendo Entertainment System",sysID:"snes",description:["Select one of eight characters from the Mario seriesoffering a variety of driving stylesand take on three championship cups in three different kart classes. Win enough, and you'll unlock a fourth circuit: the ultra-tough Special Cup.","Crossing the finish line in first place isn't an easy task, though, as each track has unique obstacles to conquer and racers can obtain special power-ups that boost them to victory.","With more than 15 tracks to master and nearly endless replay value, Super Mario Kart is classic gaming with some banana peels thrown in for good measure!"],thumbnails:"https://i.imgur.com/Opk3tfD.png",hostName:"ArcadeSpot",hostImage:"host_arcadespot.png",rom:"//static.arcadespot.com/wp-content/uploads/2015/11/Super-Mario-Kart-USA.nes",manual:"https://www.nintendo.co.jp/clvs/manuals/common/pdf/CLV-P-SAAFE.pdf",manual_images:["https://i.imgur.com/D1Sfec2.jpg","https://i.imgur.com/YgjbAa1.jpg","https://i.imgur.com/PjGxvqf.jpg","https://i.imgur.com/tkoLEuu.jpg","https://i.imgur.com/csycZil.jpg","https://i.imgur.com/N1wEGkw.jpg","https://i.imgur.com/yuAIlJZ.jpg","https://i.imgur.com/mQ2Zzmu.jpg","https://i.imgur.com/U3G64nX.jpg","https://i.imgur.com/wtGLIiG.jpg","https://i.imgur.com/tk5dPu6.jpg","https://i.imgur.com/sBrXYba.jpg","https://i.imgur.com/5LrgTqy.jpg","https://i.imgur.com/h02BZA2.jpg","https://i.imgur.com/qkHA9SS.jpg","https://i.imgur.com/PSJ8rkm.jpg","https://i.imgur.com/0tLf7za.jpg","https://i.imgur.com/Z5JaQ4Y.jpg","https://i.imgur.com/0emOHrZ.jpg","https://i.imgur.com/8StbXQc.jpg","https://i.imgur.com/ez9d0gU.jpg","https://i.imgur.com/xRgg4ZE.jpg","https://i.imgur.com/0iGI6sG.jpg","https://i.imgur.com/GBYKypJ.jpg","https://i.imgur.com/Tm44kjV.jpg","https://i.imgur.com/JLvIIWF.jpg","https://i.imgur.com/ZC21LfY.jpg","https://i.imgur.com/h24yTku.jpg","https://i.imgur.com/3JdkLP3.jpg","https://i.imgur.com/utrox0S.jpg","https://i.imgur.com/ciB3GR0.jpg","https://i.imgur.com/wJrkEAa.jpg","https://i.imgur.com/3JQ4khj.jpg","https://i.imgur.com/TwfAxkP.jpg","https://i.imgur.com/EHb4xdL.jpg"],midi:"https://www.dropbox.com/s/j8orw51zs7n2v7g/SNES_2.ogg?dl=1",midi_volume:1},{title:"The Legend of Zelda: A Link to the Past",developer:"Nintendo EAD",year:"1991",system:"Super Nintendo Entertainment System",sysID:"snes",description:["Return to an age of magic and heroes!","When an evil magician named Agahnim begins kidnapping young maidens in Hyrule in a quest to break the imprisoning seal on Ganon, a young boy named Link is called upon to stop him. Link must venture into twisting mazes, dungeons, palaces and shadowy forests as he searches for the maidens and Princess Zelda. Traversing both Light and Dark Worlds, he must navigate eight dark dungeons, fighting evil enemies and huge bosses. Help our hero prevent Ganon and Agahnim from shattering Hyrule forever.","Whether you are a young knight, a heroine-in-training or a seasoned warrior, The Legend of Zelda: A Link to the Past will delight!"],thumbnails:"https://i.imgur.com/F3cZqnS.png",hostName:"ArcadeSpot",hostImage:"host_arcadespot.png",rom:"//static.arcadespot.com/wp-content/uploads/2017/10/Legend-of-Zelda-The-A-Link-to-the-Past-U-.smc",manual:"https://www.nintendo.co.jp/clvs/manuals/common/pdf/CLV-P-SAAEE.pdf",manual_images:["https://i.imgur.com/63pQ4t0.jpg","https://i.imgur.com/O0qS3y6.jpg","https://i.imgur.com/6kEYFuF.jpg","https://i.imgur.com/rYjSRsm.jpg","https://i.imgur.com/RSg3TTx.jpg","https://i.imgur.com/rcnmiTD.jpg","https://i.imgur.com/eIEXNDS.jpg","https://i.imgur.com/A6h4k2M.jpg","https://i.imgur.com/QtYEsnU.jpg","https://i.imgur.com/K0Uc0oB.jpg","https://i.imgur.com/937BGKa.jpg","https://i.imgur.com/Qisxf3X.jpg","https://i.imgur.com/gAPRCYD.jpg","https://i.imgur.com/3Z6oTuh.jpg","https://i.imgur.com/16NSx3h.jpg","https://i.imgur.com/47eyiGr.jpg","https://i.imgur.com/ctCZFOm.jpg","https://i.imgur.com/RrRa1jg.jpg","https://i.imgur.com/BywR7ux.jpg","https://i.imgur.com/rm3VNEj.jpg","https://i.imgur.com/7acoqXz.jpg","https://i.imgur.com/p4pD9NS.jpg","https://i.imgur.com/vJJ5mLb.jpg","https://i.imgur.com/t0cDzid.jpg","https://i.imgur.com/mY5kxvm.jpg","https://i.imgur.com/UVXKI16.jpg","https://i.imgur.com/ZnwBpRV.jpg","https://i.imgur.com/iLqQ5vT.jpg","https://i.imgur.com/SFCQ7rr.jpg","https://i.imgur.com/qpepYXG.jpg","https://i.imgur.com/VN4LDSx.jpg","https://i.imgur.com/D2hbHnm.jpg","https://i.imgur.com/ouYXEaP.jpg","https://i.imgur.com/zvCnUxq.jpg","https://i.imgur.com/ndpARva.jpg","https://i.imgur.com/Q4JsBzr.jpg","https://i.imgur.com/qzeQU44.jpg","https://i.imgur.com/56aIzEJ.jpg","https://i.imgur.com/Jw2bvEt.jpg","https://i.imgur.com/aMeJE9a.jpg","https://i.imgur.com/r908iNj.jpg","https://i.imgur.com/hBH4wRv.jpg","https://i.imgur.com/xCfqQhI.jpg","https://i.imgur.com/EbV3bRA.jpg","https://i.imgur.com/3uDBSp5.jpg","https://i.imgur.com/ZfIaXDJ.jpg","https://i.imgur.com/aJsXgp9.jpg","https://i.imgur.com/zVThMWs.jpg","https://i.imgur.com/vz7fB9I.jpg"],midi:"https://www.dropbox.com/s/r5xdqpb6fp3m09m/SNES_3.ogg?dl=1",midi_volume:1.2},{title:"F-ZERO",developer:"Nintendo EAD",year:"1990",system:"Super Nintendo Entertainment System",sysID:"snes",description:["Speed into the future with the first installment to the F-Zero series.","Operated by their own designated racer, including the celebrated Captain Falcon, pick one of four proton-powered hover carseach with its own acceleration curve and design modifications.","Strategy will play a big part in this speed fest as you race across 15 courses filled with challenges and pitfalls. Find shortcuts, elude hazards, and snag power-ups if you want to beat the competition. Keep an eye out for sand, land mines, magnets, and other trouble spots, but always be ready for that boost from a speed or jump plate to get ahead. You'll need split-second reflexes to control these speed machines of tomorrow, so get ready for an experience that's out of this world!"],thumbnails:"https://i.imgur.com/5bfby4Y.png",hostName:"ArcadeSpot",hostImage:"host_arcadespot.png",rom:"//static.arcadespot.com/wp-content/uploads/2016/03/fzero.smc",manual:"https://www.nintendo.co.jp/clvs/manuals/common/pdf/CLV-P-SAABE.pdf",manual_images:["https://i.imgur.com/4VMZ1rS.jpg","https://i.imgur.com/zhjN1Ld.jpg","https://i.imgur.com/8zpxZsC.jpg","https://i.imgur.com/IwnVn7v.jpg","https://i.imgur.com/gWQU3wT.jpg","https://i.imgur.com/uweFA6g.jpg","https://i.imgur.com/uG44BvD.jpg","https://i.imgur.com/wZQyhL9.jpg","https://i.imgur.com/IGURcnJ.jpg","https://i.imgur.com/i3fVxS4.jpg","https://i.imgur.com/aYOpTKR.jpg","https://i.imgur.com/SSsfyRB.jpg","https://i.imgur.com/zKbVb86.jpg","https://i.imgur.com/8Nzb3zi.jpg","https://i.imgur.com/9FJhhfU.jpg","https://i.imgur.com/zDrXLX3.jpg","https://i.imgur.com/oaluzvw.jpg","https://i.imgur.com/9U1Ofrx.jpg","https://i.imgur.com/zrrOIyZ.jpg","https://i.imgur.com/0xN4pjA.jpg","https://i.imgur.com/zmvPTRr.jpg","https://i.imgur.com/CF4zq7g.jpg","https://i.imgur.com/rSWKGRL.jpg","https://i.imgur.com/WPOaB83.jpg","https://i.imgur.com/RRkJCDF.jpg","https://i.imgur.com/KAJMZPA.jpg","https://i.imgur.com/vEuVkkY.jpg","https://i.imgur.com/cWOFeQe.jpg","https://i.imgur.com/421NakA.jpg","https://i.imgur.com/DC9rDeC.jpg","https://i.imgur.com/bVstOUY.jpg","https://i.imgur.com/StDKe62.jpg"],midi:"https://www.dropbox.com/s/4guda2qdmytqn9y/SNES_4.ogg?dl=1",midi_volume:.6},{title:"Super Metroid",developer:"Nintendo R&D1 / Intelligent Systems",year:"1994",system:"Super Nintendo Entertainment System",sysID:"snes",description:["The Space Pirates, merciless agents of the evil Mother Brain, have stolen the last Metroid from a research station, and once again Mother Brain threatens the safety of the galaxy!","Samus Aran must don her awesome array of high-tech weaponry to retrieve the deadly Metroid hidden deep within the cave-riddled planet Zebes. Super Metroid features excellent graphics, with a huge variety of enemies and worlds to explore. The side-view action will be familiar to many players, only now there are new weapons and items, including the Grappling Beam, which allows Samus to swing across large chasms, and the X-Ray Scope, which reveals secret passages."],thumbnails:"https://i.imgur.com/QU4fDnQ.png",hostName:"ArcadeSpot",hostImage:"host_arcadespot.png",rom:"//static.arcadespot.com/wp-content/uploads/2016/08/super-metroid.smc",manual:"https://www.nintendo.co.jp/clvs/manuals/common/pdf/CLV-P-SAAHE.pdf",manual_images:["https://i.imgur.com/CSGCX8I.jpg","https://i.imgur.com/vLZMEKA.jpg","https://i.imgur.com/bravcTA.jpg","https://i.imgur.com/19dpKec.jpg","https://i.imgur.com/3Uil0lt.jpg","https://i.imgur.com/ipTmsgw.jpg","https://i.imgur.com/oeQe8kl.jpg","https://i.imgur.com/VUrwrnM.jpg","https://i.imgur.com/Ag0Hc4O.jpg","https://i.imgur.com/vrUxLbF.jpg","https://i.imgur.com/S9Fouqq.jpg","https://i.imgur.com/EEgPEid.jpg","https://i.imgur.com/QuvIjED.jpg","https://i.imgur.com/YgnZnuz.jpg","https://i.imgur.com/CWzoooI.jpg","https://i.imgur.com/tavXffQ.jpg","https://i.imgur.com/xmPTRHY.jpg","https://i.imgur.com/S0NPLC7.jpg","https://i.imgur.com/69idyx6.jpg","https://i.imgur.com/RZTXLRn.jpg","https://i.imgur.com/8fmX35a.jpg","https://i.imgur.com/UnXQLVa.jpg","https://i.imgur.com/p4Orzlm.jpg","https://i.imgur.com/OijKIBa.jpg","https://i.imgur.com/1LMMzfK.jpg","https://i.imgur.com/WNpFtBT.jpg","https://i.imgur.com/lw4CDWH.jpg","https://i.imgur.com/cZEQUeM.jpg","https://i.imgur.com/kkksgr4.jpg","https://i.imgur.com/NrWdzkq.jpg","https://i.imgur.com/rI0XUJV.jpg","https://i.imgur.com/v0IXmOs.jpg","https://i.imgur.com/LXjzNtC.jpg","https://i.imgur.com/X6agw7u.jpg","https://i.imgur.com/mJ8ZRxo.jpg","https://i.imgur.com/DeBJEC5.jpg","https://i.imgur.com/UmJnDzg.jpg","https://i.imgur.com/wWQAVRp.jpg","https://i.imgur.com/l3CJFsH.jpg"],midi:"https://www.dropbox.com/s/gwdljmow727zivn/SNES_5.ogg?dl=1",midi_volume:1.15},{title:"Street Fighter II Turbo: Hyper Fighting",developer:"Capcom",year:"1992",system:"Super Nintendo Entertainment System",sysID:"snes",description:["Street Fighter II defined gaming in the 1990s by revolutionizing the fighting game genre.","Street Fighter II' Turbo: Hyper Fighting, regarded as one of the greatest games of all time, was the third and final release of the original Street Fighter II series. The original eight world warriors are featured, along with playable boss characters Balrog, Sagat, and M. Bison. The game offered enhanced gameplay speed and improved character balancing."],thumbnails:"https://i.imgur.com/6hKvJ0O.png",hostName:"ArcadeSpot",hostImage:"host_arcadespot.png",rom:"//static.arcadespot.com/wp-content/uploads/2016/08/street-fighter-2-turbo.smc",manual:"https://www.nintendo.co.jp/clvs/manuals/common/pdf/CLV-P-SABHE.pdf",manual_images:["https://i.imgur.com/kLNLmTb.jpg","https://i.imgur.com/qCnrF5C.jpg","https://i.imgur.com/pVrJ7bA.jpg","https://i.imgur.com/saxYLhF.jpg","https://i.imgur.com/AFdwoGU.jpg","https://i.imgur.com/mJs4Rwv.jpg","https://i.imgur.com/ruYPpRP.jpg","https://i.imgur.com/NK4zgcP.jpg","https://i.imgur.com/118UlDN.jpg","https://i.imgur.com/uxHle1L.jpg","https://i.imgur.com/sHBJf6x.jpg","https://i.imgur.com/EqzJ0et.jpg","https://i.imgur.com/CC4B2M9.jpg","https://i.imgur.com/CBgoWNA.jpg","https://i.imgur.com/ZPIIO4C.jpg","https://i.imgur.com/TsloikQ.jpg","https://i.imgur.com/mNlSdT5.jpg","https://i.imgur.com/Qbwi1Jx.jpg","https://i.imgur.com/H1tD3mg.jpg","https://i.imgur.com/3lsd9GN.jpg","https://i.imgur.com/oXjEbPo.jpg","https://i.imgur.com/gBEk0aQ.jpg","https://i.imgur.com/EGJYZwp.jpg","https://i.imgur.com/zcGBt5J.jpg","https://i.imgur.com/NAPY5Mf.jpg","https://i.imgur.com/sGhiPeb.jpg","https://i.imgur.com/bjeMxDL.jpg","https://i.imgur.com/X4EJMeV.jpg","https://i.imgur.com/dmIMFme.jpg","https://i.imgur.com/3wZ4hGY.jpg","https://i.imgur.com/7GouQE7.jpg","https://i.imgur.com/WlGJoGM.jpg","https://i.imgur.com/oQK8pAw.jpg","https://i.imgur.com/VUBNzn0.jpg","https://i.imgur.com/o3psVVe.jpg","https://i.imgur.com/RwCTxEx.jpg","https://i.imgur.com/iSzn9H3.jpg","https://i.imgur.com/0RQmOAR.jpg","https://i.imgur.com/GfdXN0v.jpg","https://i.imgur.com/46k7jDS.jpg","https://i.imgur.com/yNWb2Nu.jpg"],midi:"https://www.dropbox.com/s/swxydpj9m3w9har/SNES_6_Low.mp3?dl=1",midi_volume:1.35},{title:"Super Punch-Out!!",developer:"Nintendo R&D3 / Locomotive Corporation",year:"1994",system:"Super Nintendo Entertainment System",sysID:"snes",description:["Spar against unique opponents -- old and new -- and outwit their unique techniques!",'Featuring the tight game play and humor the series is known for, this sequel to the NES classic sees Little Mac return to the ring with the World Video Boxing Association belt once again at stake. Slug your way through the grueling, sweat-pounding matches of the Minor, Major, and World Circuits as you face off against some of Little Macs greatest rivals like Bear Hugger, Bald Bull, and Super Macho Man. With a cast of new challengers waiting, do you have what it takes to identify their unique patterns and exploit their weaknesses? Go to your corner and come out fighting, but remember what Doc Louis would say, "Its not about brawlingits about finesse!"'],thumbnails:"https://i.imgur.com/S8JQi1p.png",hostName:"ArcadeSpot",hostImage:"host_arcadespot.png",rom:"//static.arcadespot.com/wp-content/uploads/2017/10/super-punch-out.smc",manual:"https://www.nintendo.co.jp/clvs/manuals/common/pdf/CLV-P-SAAXE.pdf",manual_images:["https://i.imgur.com/lcU37oz.jpg","https://i.imgur.com/3Lltzoe.jpg","https://i.imgur.com/xQ4G7et.jpg","https://i.imgur.com/u2oiwjt.jpg","https://i.imgur.com/fPADLRf.jpg","https://i.imgur.com/02U3Rep.jpg","https://i.imgur.com/NuLkMyj.jpg","https://i.imgur.com/FsIuM6q.jpg","https://i.imgur.com/vg8myMs.jpg","https://i.imgur.com/yCXFCda.jpg","https://i.imgur.com/VqLrwxO.jpg","https://i.imgur.com/p23mOWJ.jpg","https://i.imgur.com/1jxXKiM.jpg","https://i.imgur.com/JlD0nH0.jpg","https://i.imgur.com/dIzlvD0.jpg","https://i.imgur.com/lxyeJu8.jpg","https://i.imgur.com/HGXk6R5.jpg","https://i.imgur.com/FEabEDJ.jpg","https://i.imgur.com/1B5GS6J.jpg","https://i.imgur.com/sBIB9uS.jpg","https://i.imgur.com/s4Jy8cD.jpg","https://i.imgur.com/ShiMSnf.jpg","https://i.imgur.com/bu2fPS3.jpg","https://i.imgur.com/skEz54q.jpg","https://i.imgur.com/yHp6vyD.jpg","https://i.imgur.com/tL1PWjD.jpg","https://i.imgur.com/KAL9kNV.jpg","https://i.imgur.com/SMEVryU.jpg","https://i.imgur.com/5Hxtx93.jpg","https://i.imgur.com/u8rBP5E.jpg","https://i.imgur.com/cPDDRnj.jpg","https://i.imgur.com/diZGRC8.jpg","https://i.imgur.com/66LVz8f.jpg"],midi:"https://www.dropbox.com/s/w1baejkc2bklokd/SNES_7.ogg?dl=1",midi_volume:1.15},{title:"Super Castlevania IV",developer:"Konami",year:"1991",system:"Super Nintendo Entertainment System",sysID:"snes",description:["Fulfill the Belmont legacy against the forces of darkness.","In the peaceful country of Transylvania, there is a legend of an evil castle and its master, the Prince of Darkness, Dracula. Once every hundred years, the powers of good mysteriously weaken, and evil attempts to resurrect Dracula. It's up to the Belmont clan to take up the eternal fight against the vampire. Players take on the role of Simon Belmont, armed with the legendary whip, Vampire Killer, to defeat Dracula and his evil minions. Luckily, Simon has many additional weapons at his disposal, including axes, holy water, crosses, knives and even a magical stopwatch that can stop the flow of time for a spell.","Simon must travel through 11 stages, beginning in the countryside, to reach Dracula's Castle, all the while overcoming perilous traps and hideous monsters. Only the power of the Belmonts can quell the looming darkness"],thumbnails:"https://i.imgur.com/gIVTPDv.png",hostName:"ArcadeSpot",hostImage:"host_arcadespot.png",rom:"//static.arcadespot.com/wp-content/uploads/2016/04/super-castlevania-iv.smc",manual:"https://www.nintendo.co.jp/clvs/manuals/common/pdf/CLV-P-SACBE.pdf",manual_images:["https://i.imgur.com/tjvNSfc.jpg","https://i.imgur.com/DfYlSQ5.jpg","https://i.imgur.com/7zNDcyY.jpg","https://i.imgur.com/4HRKWw5.jpg","https://i.imgur.com/EsppFJ5.jpg","https://i.imgur.com/mnjrMTq.jpg","https://i.imgur.com/ywQOcEE.jpg","https://i.imgur.com/eAb5Xlu.jpg","https://i.imgur.com/eQ5QINQ.jpg","https://i.imgur.com/HlPkBea.jpg","https://i.imgur.com/nDOTATX.jpg","https://i.imgur.com/yQvSbba.jpg","https://i.imgur.com/j6dq3B9.jpg","https://i.imgur.com/5UrFVD2.jpg","https://i.imgur.com/NdINfSm.jpg","https://i.imgur.com/ytMsdX8.jpg","https://i.imgur.com/g7xLk2D.jpg","https://i.imgur.com/AEnIN3F.jpg","https://i.imgur.com/MpJQDua.jpg","https://i.imgur.com/jWQqWiE.jpg","https://i.imgur.com/5sTpqm6.jpg"],midi:"https://www.dropbox.com/s/fq1hkhb0hlmkhgc/SNES_8.ogg?dl=1",midi_volume:.4},{title:"Donkey Kong Country",developer:"Rare",year:"1994",system:"Super Nintendo Entertainment System",sysID:"snes",description:["Help Donkey Kong and Diddy Kong get back those stolen bananas!","After a dark and stormy night, Donkey Kong finds all of his bananas stolen by K. Rool and his reptilian crew of Kremlings! Armed with chest-pounding muscle, mighty barrel rolls, and awesome vine-swinging skills, Donkey Kong and Diddy Kong set out to face their adversaries! Play over 100 levels filled with collectibles and hidden bonus levels. With the help of Donkey Kong's quirky family, animal friends, and your fast reflexes, our dynamic duo will prove to be an unstoppable force.","Time to save those bananas!"],thumbnails:"https://i.imgur.com/kdGwyRy.png",hostName:"ArcadeSpot",hostImage:"host_arcadespot.png",rom:"//static.arcadespot.com/wp-content/uploads/2015/11/donkey-kong-country.smc",manual:"https://www.nintendo.co.jp/clvs/manuals/common/pdf/CLV-P-SAALE.pdf",manual_images:["https://i.imgur.com/CPhhLX0.jpg","https://i.imgur.com/dEVTobD.jpg","https://i.imgur.com/eonfxzK.jpg","https://i.imgur.com/lW4v8K1.jpg","https://i.imgur.com/houD35F.jpg","https://i.imgur.com/p9qyW6u.jpg","https://i.imgur.com/BK1uBdu.jpg","https://i.imgur.com/YiKZUPa.jpg","https://i.imgur.com/jpgAmu8.jpg","https://i.imgur.com/oIxuhJU.jpg","https://i.imgur.com/5S6p8ax.jpg","https://i.imgur.com/VJYOG13.jpg","https://i.imgur.com/ztTnql6.jpg","https://i.imgur.com/D49QhtY.jpg","https://i.imgur.com/2kgp6cV.jpg","https://i.imgur.com/07x9d3f.jpg","https://i.imgur.com/wmxnWig.jpg","https://i.imgur.com/s65MG7S.jpg","https://i.imgur.com/b4tYS8h.jpg","https://i.imgur.com/eKQ7HmS.jpg","https://i.imgur.com/dC74uny.jpg","https://i.imgur.com/ChWsu4D.jpg","https://i.imgur.com/EwYJPbN.jpg","https://i.imgur.com/et0jUEQ.jpg","https://i.imgur.com/oeaVks9.jpg","https://i.imgur.com/6QgcGxQ.jpg","https://i.imgur.com/ZbY8TAf.jpg","https://i.imgur.com/CQ3S3dw.jpg","https://i.imgur.com/UGDcITQ.jpg","https://i.imgur.com/z51pZFV.jpg","https://i.imgur.com/DDiHfgd.jpg","https://i.imgur.com/OlqxvrY.jpg","https://i.imgur.com/eMZrzdo.jpg","https://i.imgur.com/PPzPEN6.jpg","https://i.imgur.com/PbnZYHp.jpg"],midi:"https://www.dropbox.com/s/p17y4dcr5adtngw/SNES_9.ogg?dl=1",midi_volume:1},{title:"Mega Man X",developer:"Capcom",year:"1993",system:"Super Nintendo Entertainment System",sysID:"snes",description:["The future of Mega Man has arrived!","Hundreds of years after his death, Dr. Light's final creation is discovered. Released from his capsule by Dr. Cain, \"X\" is born into the world of the future where robot rebellions are a thing of the past. But when Dr. Cain tries to implement Dr. Light's designs into a new series of Reploids, something goes horribly wrong. Now, the future lies on the brink of destruction and X must use all of his newfound powers and abilities to hunt down the maverick Reploids and their leader, Sigma, before the human race is wiped from the planet!"],thumbnails:"https://i.imgur.com/6MgreWI.png",hostName:"ArcadeSpot",hostImage:"host_arcadespot.png",rom:"//static.arcadespot.com/wp-content/uploads/2016/04/megaman-x.smc",manual:"https://www.nintendo.co.jp/clvs/manuals/common/pdf/CLV-P-SABCE.pdf",manual_images:["https://i.imgur.com/BmDXAKr.jpg","https://i.imgur.com/gUWTUED.jpg","https://i.imgur.com/hFHcZaL.jpg","https://i.imgur.com/XbY6zHW.jpg","https://i.imgur.com/klVGYbX.jpg","https://i.imgur.com/9wNQ3L3.jpg","https://i.imgur.com/a1G9D7b.jpg","https://i.imgur.com/zrsiSM0.jpg","https://i.imgur.com/4Dm5BLS.jpg","https://i.imgur.com/y1xN3az.jpg","https://i.imgur.com/0ekshES.jpg","https://i.imgur.com/L3IOThZ.jpg","https://i.imgur.com/6vVgMoC.jpg","https://i.imgur.com/hPSb2Wj.jpg","https://i.imgur.com/54rjDcS.jpg","https://i.imgur.com/QgyP3i5.jpg","https://i.imgur.com/ojIs38B.jpg","https://i.imgur.com/kvQUi6N.jpg","https://i.imgur.com/95poqW4.jpg","https://i.imgur.com/W050PcQ.jpg","https://i.imgur.com/2EHWnyb.jpg","https://i.imgur.com/aeQjLvC.jpg","https://i.imgur.com/OYwTPzg.jpg","https://i.imgur.com/Wg39XQt.jpg","https://i.imgur.com/Y7ok11v.jpg"],midi:"https://www.dropbox.com/s/zgszln83ens5ky2/SNES_10.ogg?dl=1",midi_volume:.9},{title:"Kirby Super Star",developer:"HAL Laboratory",year:"1996",system:"Super Nintendo Entertainment System",sysID:"snes",description:["That awful King Dedede is at it againhes stolen all the food in Dream Land! It's up to Kirby to get it back and ultimately save Popstar from being taken over!","Our round, pink hero will have to journey through six main games and two minigames, finishing with the ultimate showdown in the Arena. Each game offers its own story and variation of platforming action, as well as unique environments and an assortment of enemies. Swallowing an enemy allows Kirby to copy the abilities of that enemy, granting him the power to perform special attacks and giving him a new hat to don. Kirby can also give up an acquired ability and use it to create a helper. The helper will follow Kirby around and automatically fight as his allyor offer a second player the chance to join in the game by controlling it.","There's never a dull moment as Kirby dashes, flies, and fights!"],thumbnails:"https://i.imgur.com/G2w77mm.png",hostName:"ArcadeSpot",hostImage:"host_arcadespot.png",rom:"//static.arcadespot.com/wp-content/uploads/2016/05/kirby-super-star.smc",manual:"https://www.nintendo.co.jp/clvs/manuals/common/pdf/CLV-P-SAAQE.pdf",manual_images:["https://i.imgur.com/dmnq8pO.jpg","https://i.imgur.com/1OHcTxk.jpg","https://i.imgur.com/4AV5Aj8.jpg","https://i.imgur.com/eSvKG6q.jpg","https://i.imgur.com/Q7zJGIH.jpg","https://i.imgur.com/QXCsqQn.jpg","https://i.imgur.com/dX390Zk.jpg","https://i.imgur.com/MC5rrS8.jpg","https://i.imgur.com/WFjkUP7.jpg","https://i.imgur.com/Rz4JkeK.jpg","https://i.imgur.com/7EOSSrF.jpg","https://i.imgur.com/10mj0Ly.jpg","https://i.imgur.com/vLoOCAe.jpg","https://i.imgur.com/dz5Ycsz.jpg","https://i.imgur.com/dJNKgjX.jpg","https://i.imgur.com/BCjzLc5.jpg","https://i.imgur.com/AdGWBTg.jpg","https://i.imgur.com/WuvzeSX.jpg","https://i.imgur.com/tU9pkW2.jpg","https://i.imgur.com/a3H5qmQ.jpg","https://i.imgur.com/i9yDWl0.jpg","https://i.imgur.com/SLQhwuS.jpg","https://i.imgur.com/Oh1bIdM.jpg","https://i.imgur.com/x7G9jqX.jpg","https://i.imgur.com/M3KVp3F.jpg","https://i.imgur.com/F8rmfYt.jpg","https://i.imgur.com/jHIQsH5.jpg","https://i.imgur.com/i96Qkvh.jpg","https://i.imgur.com/LvRfqim.jpg","https://i.imgur.com/sr9P4Qh.jpg","https://i.imgur.com/XZnKNv6.jpg","https://i.imgur.com/lh1SQCC.jpg","https://i.imgur.com/sn4BmVX.jpg","https://i.imgur.com/D7Dalvo.jpg","https://i.imgur.com/RFbJHBd.jpg","https://i.imgur.com/V6kid29.jpg","https://i.imgur.com/3LPUD9m.jpg","https://i.imgur.com/OSoaQ1p.jpg","https://i.imgur.com/Tbbh72L.jpg","https://i.imgur.com/q9r1akD.jpg"],midi:"https://www.dropbox.com/s/c8vttdhn9sbexso/SNES_11.ogg?dl=1",midi_volume:1.1},{title:"Final Fantasy III",developer:"Square",year:"1990",system:"Super Nintendo Entertainment System",sysID:"snes",description:["Ages ago, evil beings created powerful creatures called Espers and unleashed them against each other. The resulting battles left their world in smouldering rubble. Legend has it, the Espers destroyed themselves and most of humanity.","Magic disappeared forever.Centuries have passed and a rational world now exists with Espers living only in myths, until one frozen solid since the ancient wars is unearthed. Suddenly, there are reports of magic attacks on civilians. Imperial Commandos launch raids using magic-powered MagiTek weapons. Magic is obviously alive and the world is in danger again.","Who or what is behind the rediscovery and redeployment of this legendary power? What chaotic plans exist that will wreak havoc on this orderly world?","Originally released as FINAL FANTASY III on SNES in North America, this game is in fact FINAL FANTASY VI from the main series chronology."],thumbnails:"https://i.imgur.com/PKq9cK7.png",hostName:"ArcadeSpot",hostImage:"host_arcadespot.png",rom:"//static.arcadespot.com/wp-content/uploads/2016/02/final-fantasy-3.smc",manual:"https://www.nintendo.co.jp/clvs/manuals/common/pdf/CLV-P-SABTE.pdf",manual_images:["https://i.imgur.com/O3hZg2d.jpg","https://i.imgur.com/aWKdhW4.jpg","https://i.imgur.com/cYWI2gj.jpg","https://i.imgur.com/fEv9TQy.jpg","https://i.imgur.com/rNm9S9N.jpg","https://i.imgur.com/VnOcrTU.jpg","https://i.imgur.com/2Hn1LFd.jpg","https://i.imgur.com/uyQFi0e.jpg","https://i.imgur.com/sR03WtO.jpg","https://i.imgur.com/gLl4jLT.jpg","https://i.imgur.com/pssoxgj.jpg","https://i.imgur.com/EUKJjKi.jpg","https://i.imgur.com/gEQZ6Cx.jpg","https://i.imgur.com/aOV7p4C.jpg","https://i.imgur.com/kkGhHom.jpg","https://i.imgur.com/ESF9Wda.jpg","https://i.imgur.com/BZGqtGq.jpg","https://i.imgur.com/By0PlFu.jpg","https://i.imgur.com/Oq8E14L.jpg","https://i.imgur.com/Jm928GG.jpg","https://i.imgur.com/tc6jLEc.jpg","https://i.imgur.com/3uhEG6B.jpg","https://i.imgur.com/HkobF2a.jpg","https://i.imgur.com/GN3qhnq.jpg","https://i.imgur.com/5YTXe1Y.jpg","https://i.imgur.com/zXQ6n0t.jpg","https://i.imgur.com/iSG6n7w.jpg","https://i.imgur.com/UGfMGQ9.jpg","https://i.imgur.com/0EQi2oH.jpg","https://i.imgur.com/bJzxNwN.jpg","https://i.imgur.com/ehbCLiP.jpg","https://i.imgur.com/yrTi70x.jpg","https://i.imgur.com/OKBcAo9.jpg","https://i.imgur.com/pltTRmV.jpg","https://i.imgur.com/nDwJPc5.jpg","https://i.imgur.com/5EchuOu.jpg","https://i.imgur.com/wuJIvZT.jpg","https://i.imgur.com/btBAC6a.jpg","https://i.imgur.com/2diLPmM.jpg","https://i.imgur.com/SiyBCDW.jpg","https://i.imgur.com/EBYKcuQ.jpg","https://i.imgur.com/d1sta1v.jpg","https://i.imgur.com/cWblk4u.jpg","https://i.imgur.com/XdC75yp.jpg","https://i.imgur.com/D3kOfuJ.jpg","https://i.imgur.com/unFXi25.jpg","https://i.imgur.com/fI3jzNQ.jpg","https://i.imgur.com/sG71YVx.jpg","https://i.imgur.com/38EeE4H.jpg","https://i.imgur.com/KZy2IuO.jpg","https://i.imgur.com/2nKL9tc.jpg","https://i.imgur.com/YT8FdBi.jpg","https://i.imgur.com/Ol4AGpo.jpg","https://i.imgur.com/s02tXDi.jpg","https://i.imgur.com/9I1dEO3.jpg","https://i.imgur.com/oLckd2U.jpg","https://i.imgur.com/iI3OOag.jpg","https://i.imgur.com/vVSQ9WD.jpg","https://i.imgur.com/PYOkdap.jpg","https://i.imgur.com/c0MX4qn.jpg","https://i.imgur.com/z1D1w2j.jpg","https://i.imgur.com/x0YdgqQ.jpg","https://i.imgur.com/jrPGQtC.jpg","https://i.imgur.com/PbLuztE.jpg","https://i.imgur.com/wm24cl0.jpg","https://i.imgur.com/hPcnvq1.jpg","https://i.imgur.com/r9LkI9w.jpg","https://i.imgur.com/GbhbfwP.jpg","https://i.imgur.com/XKnI5Et.jpg"],midi:"https://www.dropbox.com/s/rlr7zkomkfof780/SNES_12_Low.mp3?dl=1",midi_volume:.225},{title:"Kirby's Dream Course",developer:"HAL Laboratory / Nintendo EAD",year:"1994",system:"Super Nintendo Entertainment System",sysID:"snes",description:["Golf with your favorite pink hero through eight courses of Dream Land scenery!","Step up to the tee for the wackiest golf game of your life. This one- or two-player game features a floating golf course in the sky. High above Dream Land, players can pitch and putt the ever-popular puffball, Kirby, through a maze of obstacles on a zany checkerboard course. Players must aim for the multitude of enemies that are spread throughout each fairway. Kirby's Copy Abilities return in this installment, and these must be put to good use in order to complete a level objective. Hit all of the enemies to make them disappear, and the last one becomes the hole. Sink Kirby into the hole to advance to the next stage as you clear all eight courses64 holes in all."],thumbnails:"https://i.imgur.com/mNibKi0.png",hostName:"ArcadeSpot",hostImage:"host_arcadespot.png",rom:"//static.arcadespot.com/wp-content/uploads/2016/01/kirby-dream-course.smc",manual:"https://www.nintendo.co.jp/clvs/manuals/common/pdf/CLV-P-SAAKE.pdf",manual_images:["https://i.imgur.com/DJUjFDf.jpg","https://i.imgur.com/r5x4CfD.jpg","https://i.imgur.com/wSGUFkq.jpg","https://i.imgur.com/xcilYVM.jpg","https://i.imgur.com/SdzctJv.jpg","https://i.imgur.com/KligwtU.jpg","https://i.imgur.com/IiutUjT.jpg","https://i.imgur.com/XgFYdo5.jpg","https://i.imgur.com/ufEdM0z.jpg","https://i.imgur.com/c6qvwaU.jpg","https://i.imgur.com/D2mTLTM.jpg","https://i.imgur.com/YVBGRk7.jpg","https://i.imgur.com/QtNVmIm.jpg","https://i.imgur.com/8EQfgP5.jpg","https://i.imgur.com/tHXxguc.jpg","https://i.imgur.com/EEct5Vz.jpg","https://i.imgur.com/SQWVmPV.jpg","https://i.imgur.com/XDxoKpZ.jpg","https://i.imgur.com/FuiCTLn.jpg","https://i.imgur.com/yoUob4E.jpg","https://i.imgur.com/zKOhmNX.jpg","https://i.imgur.com/VByt7Du.jpg","https://i.imgur.com/duinjJp.jpg","https://i.imgur.com/Z1GqQHd.jpg","https://i.imgur.com/vY7wGHs.jpg","https://i.imgur.com/wIh2hjH.jpg","https://i.imgur.com/Dvbrw06.jpg","https://i.imgur.com/rVOZ3rr.jpg","https://i.imgur.com/8OykC7d.jpg","https://i.imgur.com/KG5i7cD.jpg","https://i.imgur.com/lQt17WH.jpg","https://i.imgur.com/ZVqdNCu.jpg","https://i.imgur.com/WWkYEsf.jpg","https://i.imgur.com/14SgcVW.jpg","https://i.imgur.com/ja7Baxx.jpg","https://i.imgur.com/0XlVTDR.jpg","https://i.imgur.com/kY5arO5.jpg","https://i.imgur.com/xhFzQeu.jpg","https://i.imgur.com/En0fmuV.jpg","https://i.imgur.com/qdeGQ1z.jpg","https://i.imgur.com/TiQybdN.jpg","https://i.imgur.com/0gaHHgc.jpg","https://i.imgur.com/vQQQTzj.jpg","https://i.imgur.com/uVXa4Nr.jpg","https://i.imgur.com/AtijxZX.jpg","https://i.imgur.com/6zj2A7J.jpg","https://i.imgur.com/zOH5QwR.jpg","https://i.imgur.com/vrGro4y.jpg","https://i.imgur.com/SJseOOp.jpg","https://i.imgur.com/3X40ucR.jpg","https://i.imgur.com/SbnrNvL.jpg","https://i.imgur.com/iUatr8U.jpg","https://i.imgur.com/Ah76M22.jpg","https://i.imgur.com/fJQ0cNK.jpg","https://i.imgur.com/GcaPJaJ.jpg","https://i.imgur.com/Gaa8C90.jpg","https://i.imgur.com/5M9LgUp.jpg"],midi:"https://www.dropbox.com/s/s87ccos6vpg01cs/SNES_13.ogg?dl=1",midi_volume:1},{title:"Star Fox",developer:"Nintendo EAD / Argonaut Software",year:"1993",system:"Super Nintendo Entertainment System",sysID:"snes",description:["Lead the Star Fox Team to Victory!","In the distant Lylat star system, imagine yourself at the controls of a futuristic, heavily armed, space fighterArwing. Lead the counter-attack on an invasion force of hundreds of alien tanks, fighter ships, laser gun emplacements and super battleships. Maneuver at warp speed through fog-enshrouded canyons, dense asteroid belts and waves of the enemys best defense. You must use skill and cunning to bring the fight to the enemys home planet Venom and smash the Core Brain for victory!"],thumbnails:"https://i.imgur.com/BQ96mGV.png",hostName:"ArcadeSpot",hostImage:"host_arcadespot.png",rom:"//static.arcadespot.com/wp-content/uploads/2016/08/star-fox.smc",manual:"https://www.nintendo.co.jp/clvs/manuals/common/pdf/CLV-P-SADGE.pdf",manual_images:["https://i.imgur.com/COEs6R6.jpg","https://i.imgur.com/G9iW9hw.jpg","https://i.imgur.com/y8i95sp.jpg","https://i.imgur.com/p6040PM.jpg","https://i.imgur.com/dFmTVzf.jpg","https://i.imgur.com/sAg1Arq.jpg","https://i.imgur.com/qnkY9Gq.jpg","https://i.imgur.com/j0ASndm.jpg","https://i.imgur.com/6BHje3s.jpg","https://i.imgur.com/AIAeUkO.jpg","https://i.imgur.com/IlN0Ecc.jpg","https://i.imgur.com/zEDKLQU.jpg","https://i.imgur.com/8W4imM5.jpg","https://i.imgur.com/feytHtK.jpg","https://i.imgur.com/BcbXqAC.jpg","https://i.imgur.com/ymPcb4c.jpg","https://i.imgur.com/qbiCykW.jpg","https://i.imgur.com/Vq8grHJ.jpg","https://i.imgur.com/EZkXu14.jpg","https://i.imgur.com/P21MEhD.jpg","https://i.imgur.com/RQC2mux.jpg","https://i.imgur.com/xQvkD41.jpg","https://i.imgur.com/4dGtrTi.jpg","https://i.imgur.com/jDm5z0O.jpg","https://i.imgur.com/pc4cprp.jpg","https://i.imgur.com/hKZ4SDC.jpg","https://i.imgur.com/IoGcnOw.jpg","https://i.imgur.com/qDH3aJt.jpg","https://i.imgur.com/Za0Tnhp.jpg","https://i.imgur.com/OIncMa4.jpg","https://i.imgur.com/YEcgvaw.jpg","https://i.imgur.com/67IEo0e.jpg","https://i.imgur.com/VTlJ3Rt.jpg"],midi:"https://www.dropbox.com/s/p6ne1yknnmqb0c0/SNES_14.ogg?dl=1",midi_volume:.8},{title:"Yoshi's Island",developer:"Nintendo EAD",year:"1995",system:"Super Nintendo Entertainment System",sysID:"snes",description:["Play as Yoshi to ground pound and flutter jump your way out of trouble!","Yoshi is back, baby! And hes ready to romp through a crayon-colored world where enemies are everywhere. Prepare to flutter jump and toss eggs to protect young Mario from the evil Magikoopa, Kamek. To save the day, Yoshi and his pals will have to morph into vehicles and even EAT their enemies to turn them into eggs! Umm yum?","Play as Yoshi, carrying a young Mario through enormous, colorful worlds back to his parents in the Mushroom Kingdom. Kameks goons are constantly in pursuit, so stay alert and watch out for the Magikoopas devious traps. Throw eggs, gobble enemies, solve puzzles and even transform into wild vehicles like a helicopter, a submarine, and a mole tank. Is Yoshi up to the momentous task at hand? The fates of Yoshi, Mario, and the future of the Mushroom Kingdom are in your hands. Ground-Pound, flutter jump, and morph your way to victory!"],thumbnails:"https://i.imgur.com/WzEhQBw.png",hostName:"ArcadeSpot",hostImage:"host_arcadespot.png",rom:"//static.arcadespot.com/wp-content/uploads/2016/08/super-mario-world-2.smc",manual:"https://www.nintendo.co.jp/clvs/manuals/common/pdf/CLV-P-SADJE.pdf",manual_images:["https://i.imgur.com/O7t0LFh.jpg","https://i.imgur.com/6y40qdH.jpg","https://i.imgur.com/IfaDiF2.jpg","https://i.imgur.com/2BafXX9.jpg","https://i.imgur.com/DNssflc.jpg","https://i.imgur.com/3BsmkdK.jpg","https://i.imgur.com/wClJNAH.jpg","https://i.imgur.com/gGx8Rcu.jpg","https://i.imgur.com/k2oD3rS.jpg","https://i.imgur.com/PPC3IlY.jpg","https://i.imgur.com/jQmVjDu.jpg","https://i.imgur.com/Jd7e2gH.jpg","https://i.imgur.com/7CZwvpr.jpg","https://i.imgur.com/gsqhvna.jpg","https://i.imgur.com/5F3AQQ6.jpg","https://i.imgur.com/kwtujrr.jpg","https://i.imgur.com/55Tk6Fj.jpg","https://i.imgur.com/5es6GdV.jpg","https://i.imgur.com/O8FgEQE.jpg","https://i.imgur.com/j1FREj6.jpg","https://i.imgur.com/XUl0FDQ.jpg","https://i.imgur.com/AH1T6iR.jpg","https://i.imgur.com/hqdwskT.jpg","https://i.imgur.com/DjbAQ1R.jpg","https://i.imgur.com/c46uL5n.jpg","https://i.imgur.com/ftOsWEl.jpg","https://i.imgur.com/SkMFRoR.jpg","https://i.imgur.com/MdE2sF0.jpg"],midi:"https://www.dropbox.com/s/tugualunitrmikz/SNES_15.ogg?dl=1",midi_volume:.3},{title:"Super Mario RPG: Legend of the Seven Stars",developer:"Square",year:"1996",system:"Super Nintendo Entertainment System",sysID:"snes",description:["Recover the seven stars and repair Star Road in this original Mario RPG!","A mysterious enemy named Smithy has appeared, forcing Mario and Bowser to fight as allies. Journey across a wide variety of locations and tackle a mixture of obstacles that will require both timing and strategy to overcome. Gain experience, grow more powerful, and meet new characters to use their abilities in taking down Smithy and his gang!"],thumbnails:"https://i.imgur.com/RoQkZZz.png",hostName:"ArcadeSpot",hostImage:"host_arcadespot.png",rom:"//static.arcadespot.com/wp-content/uploads/2016/05/super-mario-rpg.smc",manual:"https://www.nintendo.co.jp/clvs/manuals/common/pdf/CLV-P-SABQE.pdf",manual_images:["https://i.imgur.com/Pcuj2s7.jpg","https://i.imgur.com/DKRKK5T.jpg","https://i.imgur.com/35alVyi.jpg","https://i.imgur.com/79ibMBw.jpg","https://i.imgur.com/pviud0O.jpg","https://i.imgur.com/gyUxOq7.jpg","https://i.imgur.com/Cr9IpVL.jpg","https://i.imgur.com/e01vm5f.jpg","https://i.imgur.com/bs7iRMM.jpg","https://i.imgur.com/pYzSs90.jpg","https://i.imgur.com/qMJ3Vqx.jpg","https://i.imgur.com/9Fzn8NX.jpg","https://i.imgur.com/JpBx5nW.jpg","https://i.imgur.com/sgREndC.jpg","https://i.imgur.com/qEzfmZg.jpg","https://i.imgur.com/K6OGfIw.jpg","https://i.imgur.com/Hi9QdEc.jpg","https://i.imgur.com/BVooX2u.jpg","https://i.imgur.com/BZJmIni.jpg","https://i.imgur.com/jNfBaei.jpg","https://i.imgur.com/erMQQGb.jpg","https://i.imgur.com/WMZW2c8.jpg","https://i.imgur.com/YPTQZmY.jpg","https://i.imgur.com/V4PB5qD.jpg","https://i.imgur.com/DCwjsrx.jpg","https://i.imgur.com/3Qejl4m.jpg","https://i.imgur.com/jApfc2V.jpg","https://i.imgur.com/RbmDkFP.jpg","https://i.imgur.com/mOAmlBM.jpg","https://i.imgur.com/KvXpid8.jpg","https://i.imgur.com/NzUuBKQ.jpg","https://i.imgur.com/ndCAFgQ.jpg","https://i.imgur.com/8jWi4iR.jpg","https://i.imgur.com/exkuiXV.jpg","https://i.imgur.com/I6zofDi.jpg","https://i.imgur.com/WgByBgk.jpg","https://i.imgur.com/PvfqwM1.jpg","https://i.imgur.com/KmSqPdn.jpg","https://i.imgur.com/QGSvzvF.jpg","https://i.imgur.com/rwhNBEU.jpg","https://i.imgur.com/BLjXMXp.jpg","https://i.imgur.com/guMuRtj.jpg","https://i.imgur.com/EevduWW.jpg"],midi:"https://www.dropbox.com/s/1qpexn20kyox1bs/SNES_16.ogg?dl=1",midi_volume:1},{title:"Contra III: The Alien Wars",developer:"Konami",year:"1992",system:"Super Nintendo Entertainment System",sysID:"snes",description:["Two men will rise to the challenge and face the wrath of the alien invaders.","In the year 2636, the alien war continues on and it's up to two soldiers, Bill Rizer and Lance Bean, to put a stop to the alien invasion. The aliens have ravaged the Earth with their powerful organic and technological weapons. Players can join with a partner and battle through 6 stages of non-stop run-and-gun action collecting power-ups including bombs, flamethrowers, spread shots, lasers and machine guns to take out the aliens. Bill and Lance travel through war-torn cities, on air bikes, riding missiles and ultimately into the alien base to defeat the alien boss once and for all"],thumbnails:"https://i.imgur.com/jOWzrUn.png",hostName:"ArcadeSpot",hostImage:"host_arcadespot.png",rom:"//static.arcadespot.com/wp-content/uploads/2016/05/contra-iii.smc",manual:"https://www.nintendo.co.jp/clvs/manuals/common/pdf/CLV-P-SACCE.pdf",manual_images:["https://i.imgur.com/kgc1kqU.jpg","https://i.imgur.com/qykrP5D.jpg","https://i.imgur.com/dIpBWn0.jpg","https://i.imgur.com/QDbU7bX.jpg","https://i.imgur.com/USyjrnE.jpg","https://i.imgur.com/Oje6U8t.jpg","https://i.imgur.com/1l9SNfi.jpg","https://i.imgur.com/7Q2vD2x.jpg","https://i.imgur.com/93zzRWS.jpg","https://i.imgur.com/swxgvdL.jpg","https://i.imgur.com/gaNJQOA.jpg","https://i.imgur.com/EaPlNRr.jpg","https://i.imgur.com/nz4u38Q.jpg","https://i.imgur.com/NmbAzGN.jpg","https://i.imgur.com/cslfVuz.jpg","https://i.imgur.com/UNWruHp.jpg","https://i.imgur.com/a8sHHWR.jpg"],midi:"https://www.dropbox.com/s/uhj29r7p6dxhbmd/SNES_17_Low.mp3?dl=1",midi_volume:.4},{title:"Secret of Mana",developer:"Square",year:"1993",system:"Super Nintendo Entertainment System",sysID:"snes",description:["Good and Evil battle for a young warriors heart.","There is one force in the universe that keeps good and evil in perfect balance. It is called the tree of Mana. But a magic sword has tricked a young warrior into upsetting this balance, spreading evil throughout the land. Thus, the warrior must undertake a dangerous journey to find the seeds of the Mana tree which have been hidden for centuries. Only then can perfect harmony be restored.","In this incredible adventure, things are not as they seem. Magic swords release evil as well as fight it. Treasure chests hold booby traps. Monsters are friends and friends are enemies. Potions give power, black magic takes it away. Dragons fly, weapons change. Its a world turned upside down that you must help the warrior make right. And the only way to succeed is to solve the Secret of Mana."],thumbnails:"https://i.imgur.com/lugr2SN.png",hostName:"ArcadeSpot",hostImage:"host_arcadespot.png",rom:"//static.arcadespot.com/wp-content/uploads/2016/08/secret-of-mana.smc",manual:"https://www.nintendo.co.jp/clvs/manuals/common/pdf/CLV-P-SABRE.pdf",manual_images:["https://i.imgur.com/T5B6z30.jpg","https://i.imgur.com/5QEzBcF.jpg","https://i.imgur.com/k7SiQyV.jpg","https://i.imgur.com/8wgEkBo.jpg","https://i.imgur.com/J3EQ7bG.jpg","https://i.imgur.com/bHt4N0l.jpg","https://i.imgur.com/5z6JlU8.jpg","https://i.imgur.com/4N0I0Z1.jpg","https://i.imgur.com/DImHhX1.jpg","https://i.imgur.com/pEW1Ict.jpg","https://i.imgur.com/ApsOVbx.jpg","https://i.imgur.com/uTIczUy.jpg","https://i.imgur.com/bReJpbj.jpg","https://i.imgur.com/88kpkTV.jpg","https://i.imgur.com/wVxyzZA.jpg","https://i.imgur.com/1gzu4ku.jpg","https://i.imgur.com/mfZh24L.jpg","https://i.imgur.com/Bi8opzG.jpg","https://i.imgur.com/gr77teC.jpg","https://i.imgur.com/ABnqzLF.jpg","https://i.imgur.com/nkBWMoG.jpg","https://i.imgur.com/mi5sPAG.jpg","https://i.imgur.com/r7RV6JP.jpg","https://i.imgur.com/ajgyPOw.jpg","https://i.imgur.com/XHVnIYI.jpg","https://i.imgur.com/u2rdgvW.jpg","https://i.imgur.com/qboBxlu.jpg","https://i.imgur.com/ouHLIAW.jpg","https://i.imgur.com/xHWGJO8.jpg","https://i.imgur.com/0LdqalD.jpg","https://i.imgur.com/RsLdVhW.jpg","https://i.imgur.com/vuXPP1J.jpg","https://i.imgur.com/fE3vXlV.jpg","https://i.imgur.com/kU5OewG.jpg","https://i.imgur.com/SbC79js.jpg","https://i.imgur.com/bHgvy5Y.jpg","https://i.imgur.com/LwdAOGJ.jpg","https://i.imgur.com/HcMw0d9.jpg","https://i.imgur.com/YUsvvqQ.jpg","https://i.imgur.com/IfsuG5k.jpg","https://i.imgur.com/zZSsKQ0.jpg","https://i.imgur.com/AdTUXlX.jpg","https://i.imgur.com/EYH7CZz.jpg","https://i.imgur.com/K0zGyWD.jpg","https://i.imgur.com/5XimjA3.jpg","https://i.imgur.com/rJ20Xvj.jpg","https://i.imgur.com/HkMQxZr.jpg","https://i.imgur.com/Muvb0sO.jpg","https://i.imgur.com/ufPDpF6.jpg","https://i.imgur.com/CVdSexR.jpg","https://i.imgur.com/SRlCHBQ.jpg","https://i.imgur.com/7pMKarY.jpg","https://i.imgur.com/YiKe4j9.jpg","https://i.imgur.com/lnCYB3i.jpg","https://i.imgur.com/Zk0Xjjy.jpg","https://i.imgur.com/7EhU8sg.jpg","https://i.imgur.com/WcArSna.jpg","https://i.imgur.com/AzWYDUW.jpg","https://i.imgur.com/vK2zsOw.jpg","https://i.imgur.com/nLxCxrX.jpg","https://i.imgur.com/rrHVOfu.jpg","https://i.imgur.com/9uvMxrQ.jpg","https://i.imgur.com/w3UV2gg.jpg","https://i.imgur.com/7SJueYk.jpg","https://i.imgur.com/gYLezQn.jpg"],midi:"https://www.dropbox.com/s/8khu0mfh2kpmthl/SNES_18.ogg?dl=1",midi_volume:.8},{title:"EarthBound",developer:"Ape / HAL Laboratory",year:"1994",system:"Super Nintendo Entertainment System",sysID:"snes",description:["Bizarre aliens roam the Earth! Can four average kids save the world from certain destruction?","Intergalactic terror strikes the small town of Onett as a blazing extraterrestrial object crashes in the night! The Earth now faces imminent destruction by the universal evil threat, Giygas. A courageous boy named Ness and his three friends vow to save the planet from hideous destruction. Battle hundreds of off-the-wall monsters, roaming dinosaurs, and alien enemies. Explore exotic locations like Saturn Valley, Dusty Dunes Desert, and Deep Darkness. The ultimate test lies in the impending encounter with the all-powerful Giygas!"],thumbnails:"https://i.imgur.com/vHzYCWx.png",hostName:"ArcadeSpot",hostImage:"host_arcadespot.png",rom:"//static.arcadespot.com/wp-content/uploads/2016/05/earthbound.smc",manual:"https://www.nintendo.co.jp/clvs/manuals/common/pdf/CLV-P-SAAJE.pdf",manual_images:["https://i.imgur.com/NCQpUHY.jpg","https://i.imgur.com/xuMg7lv.jpg","https://i.imgur.com/j3C0G1p.jpg","https://i.imgur.com/VA3THpN.jpg","https://i.imgur.com/hM6s0ge.jpg","https://i.imgur.com/Ad0qYjN.jpg","https://i.imgur.com/ea02Rkd.jpg","https://i.imgur.com/X52b39j.jpg","https://i.imgur.com/ekFgOqJ.jpg","https://i.imgur.com/qxVVwmN.jpg","https://i.imgur.com/KEpzctF.jpg","https://i.imgur.com/jMmsjwY.jpg","https://i.imgur.com/be6vZwv.jpg","https://i.imgur.com/pM17tNQ.jpg","https://i.imgur.com/WiD92f2.jpg","https://i.imgur.com/rwTCYfR.jpg","https://i.imgur.com/BfYYbSk.jpg","https://i.imgur.com/3r37NCQ.jpg","https://i.imgur.com/jFjL1Oi.jpg","https://i.imgur.com/hC0Px22.jpg","https://i.imgur.com/leH93fG.jpg","https://i.imgur.com/MkyWS4K.jpg","https://i.imgur.com/t2it0Df.jpg","https://i.imgur.com/LjMMwqy.jpg","https://i.imgur.com/X7Bf20z.jpg","https://i.imgur.com/mhpZcMK.jpg","https://i.imgur.com/MyauSBO.jpg","https://i.imgur.com/H5ecjna.jpg","https://i.imgur.com/DAHzkxV.jpg","https://i.imgur.com/K02LZmw.jpg","https://i.imgur.com/Ms3XAfm.jpg","https://i.imgur.com/4HxMOr5.jpg","https://i.imgur.com/pDFCcSF.jpg","https://i.imgur.com/1Mxdxwb.jpg","https://i.imgur.com/HEGukQn.jpg","https://i.imgur.com/r3zsnHj.jpg","https://i.imgur.com/h2Feint.jpg","https://i.imgur.com/2EQfwei.jpg","https://i.imgur.com/mCMIisK.jpg","https://i.imgur.com/qQldSrp.jpg","https://i.imgur.com/jbrIwvu.jpg","https://i.imgur.com/2qmQFQx.jpg","https://i.imgur.com/wecGok6.jpg","https://i.imgur.com/qkB4rbv.jpg","https://i.imgur.com/1u1l2Bm.jpg","https://i.imgur.com/SympSDX.jpg","https://i.imgur.com/j3pwORT.jpg","https://i.imgur.com/uuStvOu.jpg","https://i.imgur.com/Spf8zXr.jpg","https://i.imgur.com/aagXtmA.jpg","https://i.imgur.com/1mYfdbe.jpg","https://i.imgur.com/S8OnTug.jpg","https://i.imgur.com/iSY7Adh.jpg","https://i.imgur.com/Q9YDsqw.jpg","https://i.imgur.com/4q3W77C.jpg","https://i.imgur.com/Io2vQGc.jpg","https://i.imgur.com/G7P8SRc.jpg","https://i.imgur.com/N7qUR67.jpg","https://i.imgur.com/QYKteVp.jpg","https://i.imgur.com/PrMnJZ5.jpg","https://i.imgur.com/tgeq42m.jpg","https://i.imgur.com/N4dRitw.jpg","https://i.imgur.com/zvWoJm5.jpg","https://i.imgur.com/2VNnZ77.jpg","https://i.imgur.com/bzFWZBT.jpg","https://i.imgur.com/tUkqniT.jpg","https://i.imgur.com/uhOwn6t.jpg","https://i.imgur.com/pEwK4e8.jpg","https://i.imgur.com/pmN2R11.jpg","https://i.imgur.com/5NEKoRe.jpg","https://i.imgur.com/vl4Z83n.jpg","https://i.imgur.com/9I8n5FG.jpg","https://i.imgur.com/WbCmwuf.jpg","https://i.imgur.com/iLSxxWV.jpg","https://i.imgur.com/JhdtbWp.jpg","https://i.imgur.com/GT5E3WQ.jpg","https://i.imgur.com/93hTdLU.jpg","https://i.imgur.com/3Hoj2kL.jpg","https://i.imgur.com/lCZmvgl.jpg","https://i.imgur.com/7hUqXB4.jpg","https://i.imgur.com/CCpzAGM.jpg","https://i.imgur.com/vCkj9Jk.jpg","https://i.imgur.com/BJyBFgt.jpg","https://i.imgur.com/CbqND3D.jpg","https://i.imgur.com/0KddHAj.jpg","https://i.imgur.com/2NdbA41.jpg","https://i.imgur.com/xgbbAwH.jpg","https://i.imgur.com/IHmwy7T.jpg","https://i.imgur.com/mwXhKOo.jpg","https://i.imgur.com/JvUi9Rq.jpg","https://i.imgur.com/dA7666v.jpg","https://i.imgur.com/My3k7C5.jpg","https://i.imgur.com/cVsBBLp.jpg","https://i.imgur.com/Y4OFjx1.jpg","https://i.imgur.com/QAPGtbj.jpg","https://i.imgur.com/W44gOfv.jpg","https://i.imgur.com/l7WKdpj.jpg","https://i.imgur.com/Qkhb5Mt.jpg","https://i.imgur.com/wxpe7vD.jpg","https://i.imgur.com/ctqUmiU.jpg","https://i.imgur.com/Vfk6YOG.jpg","https://i.imgur.com/Bvncejz.jpg","https://i.imgur.com/cEpvHUF.jpg","https://i.imgur.com/VzeaXRD.jpg","https://i.imgur.com/UcQXBUl.jpg","https://i.imgur.com/U1WLjcJ.jpg","https://i.imgur.com/MOieLJd.jpg","https://i.imgur.com/sGzMMA2.jpg","https://i.imgur.com/GzO0DsI.jpg","https://i.imgur.com/DYjflIG.jpg","https://i.imgur.com/XGGoPtn.jpg","https://i.imgur.com/10e8t4X.jpg","https://i.imgur.com/0b7OEwJ.jpg","https://i.imgur.com/H93YcQq.jpg","https://i.imgur.com/zWbIxQt.jpg","https://i.imgur.com/Xf9xcpM.jpg","https://i.imgur.com/XDbCyFZ.jpg","https://i.imgur.com/Hf0J8kM.jpg","https://i.imgur.com/CiUwlCZ.jpg","https://i.imgur.com/QNkAkxF.jpg","https://i.imgur.com/NR1BR81.jpg","https://i.imgur.com/jQMcF3p.jpg","https://i.imgur.com/o53glFL.jpg","https://i.imgur.com/StoQV8N.jpg","https://i.imgur.com/TQ93aV9.jpg","https://i.imgur.com/hM7Pwfa.jpg","https://i.imgur.com/KavMa8t.jpg","https://i.imgur.com/TMT5lVe.jpg","https://i.imgur.com/u5P3SPg.jpg","https://i.imgur.com/P8RgXBr.jpg","https://i.imgur.com/I1hwqlH.jpg","https://i.imgur.com/DoTZVaZ.jpg","https://i.imgur.com/wFemPjd.jpg","https://i.imgur.com/GBYyid5.jpg","https://i.imgur.com/YLipRCX.jpg"],midi:"https://www.dropbox.com/s/d70ltg011fugr4m/SNES_19.ogg?dl=1",midi_volume:1},{title:"Super Ghouls n Ghosts",developer:"Capcom",year:"1991",system:"Super Nintendo Entertainment System",sysID:"snes",description:["The third game in the legendary Ghosts 'n Goblins series of video games, Super Ghouls 'n Ghosts follows Arthur in another quest to rescue the princess, his fair maiden and damsel in distress at large.","Players take control of Arthur and defeat the creatures of the night to save the day once more. Discover what glory awaits those brave enough to take on the armies of Super Ghouls 'n Ghosts."],thumbnails:"https://i.imgur.com/XQTxdB5.png",hostName:"ArcadeSpot",hostImage:"host_arcadespot.png",rom:"//static.arcadespot.com/wp-content/uploads/2016/08/super-ghouls-n-ghosts.smc",manual:"https://www.nintendo.co.jp/clvs/manuals/common/pdf/CLV-P-SABDE.pdf",manual_images:["https://i.imgur.com/IQnEerw.jpg","https://i.imgur.com/K770KVr.jpg","https://i.imgur.com/KkaOrKt.jpg","https://i.imgur.com/SuW6csS.jpg","https://i.imgur.com/cwvNb8h.jpg","https://i.imgur.com/AbgO8Nl.jpg","https://i.imgur.com/NTmX8a1.jpg","https://i.imgur.com/xjkgFZA.jpg","https://i.imgur.com/N1TYRRX.jpg","https://i.imgur.com/2zrV2Ln.jpg","https://i.imgur.com/dKzLMM7.jpg","https://i.imgur.com/kfR0nTm.jpg","https://i.imgur.com/mPyNNwj.jpg","https://i.imgur.com/1jBIsI9.jpg","https://i.imgur.com/4nyYFrS.jpg","https://i.imgur.com/zW5NXDN.jpg","https://i.imgur.com/1CqZPJq.jpg","https://i.imgur.com/gvkdbGj.jpg","https://i.imgur.com/DAPr5Hr.jpg","https://i.imgur.com/uPkUK2B.jpg","https://i.imgur.com/TDXiGCW.jpg","https://i.imgur.com/FaFfN6G.jpg","https://i.imgur.com/nidU1wh.jpg","https://i.imgur.com/r2OQXra.jpg","https://i.imgur.com/PpoyU7Z.jpg"],midi:"https://www.dropbox.com/s/x53xxxl5osc0mzy/SNES_20.ogg?dl=1",midi_volume:.35}],RETRO_INPUT_KB=1,RETRO_KEY_START=3,RETRO_KEY_SELECT=2,RETRO_KEY_UP=4,RETRO_KEY_DOWN=5,RETRO_KEY_LEFT=6,RETRO_KEY_RIGHT=7,RETRO_KEY_Y=1,RETRO_KEY_B=0,RETRO_KEY_A=8,RETRO_KEY_X=9,RETRO_KEY_L=10,RETRO_KEY_R=11,RetroLoaderConfig={divId:"retroGameContainer",controls:{0:{3:{type:1,index:"0",value:"13"},2:{type:1,index:"0",value:"16"},4:{type:1,index:"0",value:"38"},5:{type:1,index:"0",value:"40"},6:{type:1,index:"0",value:"37"},7:{type:1,index:"0",value:"39"},8:{type:1,index:"0",value:"88"},1:{type:1,index:"0",value:"83"},0:{type:1,index:"0",value:"90"},9:{type:1,index:"0",value:"67"},10:{type:1,index:"0",value:"65"},11:{type:1,index:"0",value:"68"}}}};class MSLAppGameLibrary{constructor(e,t,n){this.gameDescrScroll=e,this.gameManualScroll=n,this.tabs=t,this.gameList=$("#gameList"),this.$title=$("#gameSelectionInfo > header > h1"),this.$developer=$("#gameSelectionInfo > header > h2"),this.$system=$("#gameSelectionInfo > header > h3"),this.$host=$("#gameSelectionInfo > header > h4"),this.$description=$("#tabGameAboutContent"),this.$playButton=$("#gamePlayButton"),this.data=MSLAppGamesData,this.timeLastGameOpened,this.currentAudio=null,this.audioMuted=!1;const i=this;for(let e=0;e<this.data.length;++e)this.data[e].audioObject=null,this.data[e].getAudioObject=function(t=!1){return null!==i.data[e].audioObject||t||(i.data[e].audioObject=new Audio(i.data[e].midi),i.data[e].audioObject.volume=.15*i.data[e].midi_volume,i.data[e].audioObject.loop=!0),i.data[e].audioObject}}Render(){const e=this;e.gameList.empty();for(let t=0;t<e.data.length;++t){const n=$(document.createElement("div"));n.css("background-position-x","0px"),n.css("background-image","url('"+e.data[t].thumbnails+"')"),n.attr("gameid",t),n[0].onselect=function(){e.audioMuted||e.data[t].getAudioObject().play(),e.currentAudio=e.data[t].getAudioObject()},n[0].ondeselect=function(){e.data[t].getAudioObject(!0)&&(e.data[t].getAudioObject().pause(),e.data[t].getAudioObject().currentTime=0),e.currentAudio=null},n[0].slide=function(){const e=$(this);e.stop(!1,!0);let t=parseInt(e.css("background-position-x")),n=parseInt(e.css("width"));t=Math.round(t/n)*n-n,e.animate({"background-position-x":t+"px"},{always:function(){const e=this;void 0!==this.slideTimeout&&clearTimeout(this.slideTimeout),this.slideTimeout=setTimeout((function(){e.slide()}),2e3)}})},n[0].slideStop=function(){const e=$(this);if(e.stop(!1,!0),void 0===this.slideTimeout||null==this.slideTimeout)return;clearTimeout(this.slideTimeout),this.slideTimeout=null;let t=new Image;t.src=e.css("background-image").replace(/url\(\"|\"\)$/gi,""),t=t.width;let n=parseInt(e.css("background-position-x")),i=parseInt(e.css("width")),a=Math.round(t/i);n-=Math.round(n/i)%a*i,e.stop().animate({"background-position-x":n+"px"},{always:function(){e.css("background-position-x","0px")}})},e.gameList.append(n),0==t&&e.Select(n),n.on("click",(function(){e.Select($(this))}))}this.$playButton.on("click",(function(){const t=$(this).attr("gameid");void 0===t||e.data.length<t||(e.timeLastGameOpened=new Date,MSLAppManager.load("gamesPlay",{gameID:t},!1))}))}Select(e){if(e.hasClass("selected"))return;e.parent().children().each((function(){this.ondeselect(),this.slideStop(),$(this).removeClass("selected")})),e.addClass("selected"),e[0].onselect(),e[0].slide();const t=e.attr("gameid");this.$playButton.attr("gameid",t),this.$title.text(this.data[t].title).css("font-size",""),this.$developer.text(this.data[t].developer+" ("+this.data[t].year+")").css("font-size",""),this.$system.text(this.data[t].system).css("font-size",""),this.$host.html("Hosted By: <img src='/images/apps/games/"+this.data[t].hostImage+"' title='Hosted By: "+this.data[t].hostName+"' alt='"+this.data[t].hostName+"' />"),this.$description.children().remove();for(let e=0;e<this.data[t].description.length;++e){const n=$(document.createElement("p"));n.text(this.data[t].description[e]),this.$description.append(n)}this.tabs.Switch("tabGameAbout",!0),this.gameDescrScroll.UpdateVisibility();const n=function(e){let t=e[0].clientWidth/e[0].scrollWidth;t<1&&e.css("font-size",parseInt(e.css("font-size"))*t)};n(this.$title),n(this.$developer),n(this.$system);const i=$("#tabGameManualContent");i.empty();for(let e=0;e<this.data[t].manual_images.length;++e){const n=$(document.createElement("div"));i.append(n),new Promise(((n,i)=>{const a=new Image;a.addEventListener("load",(function(){n(a)})),a.addEventListener("error",(function(){i()})),a.src=this.data[t].manual_images[e]})).then((function(e){var t=$(e);if(t.addClass("unselectable"),n.append(t),e.naturalWidth/e.naturalHeight>=.7){var i=$(document.createElement("div"));i.css("background-image","url('"+e.currentSrc+"')"),n.on("mousemove",(function(t){i.css("background-position",-t.offsetX/e.clientWidth*(e.naturalWidth-e.clientWidth)+"px "+-t.offsetY/e.clientHeight*(e.naturalHeight-e.clientHeight)+"px"),i.show(0)})),n.on("mouseleave",(function(){i.hide(0)})),n.append(i)}})).catch((function(e){var t=$(document.createElement("img"));t.addClass("unselectable"),t.attr("src","/images/apps/adult/artwork_unavailable.png"),n.append(t)}))}}}var MSLAppGames=function(){const e="MSLAppGames";var t,n,i,a,o,r,s=!1,l=null;function c(){$("#underlay > #videoBackground").css("backgroundColor","#3b7db8"),$("#underlay > #videoBackground").css("mix-blend-mode","normal")}function u(){$("#underlay > *").css("display","none"),$("#underlay > #gameAnimatedBackground").css("display","block"),$("body > section").css("display","none"),$("section#"+e).fadeIn(),s||(r.Render(),s=!0),i.UpdateVisibility(),a.UpdateVisibility(),o.UpdateVisibility();let t=0,n=0;const c=$("#underlay > #gameAnimatedBackground > div")[0];l=setInterval((function(){t+=.2,n+=.001,c.style.backgroundPositionX=t+"px",c.style.backgroundPositionY=230*Math.sin(n)-270+"px"}),10)}function d(e){}function p(e,n){e=void 0!==e?e:{},n=void 0!==n&&n,t=!0,c(),u()}return{init:function(){t=!1,$("#gameList"),i=new UndockedScrollbar($("#gameList"),$("#gameListScroll")),a=new UndockedScrollbar($("#tabGameAboutContent"),$("#tabGameAboutScroll")),o=new UndockedScrollbar($("#tabGameManualContent"),$("#tabGameManualScroll")),n=new TabManager($("#gameSelectionInfo > nav > div"),$("#gameSelectionInfo > article"),"tabGameAbout",(function(e,t,n){const r=$("#gameSelectionInfo > header");"tabGameControls"==e||"tabGameManual"==e?r.slideUp(n?0:200):r.slideDown(n?0:200),a.Reset(),o.Reset(),i.UpdateVisibility(),a.UpdateVisibility(),o.UpdateVisibility()})),r=new MSLAppGameLibrary(a,n,o),$(".gameControllerMap > input").on("keyup",(function(e){const t=$(this);switch(e.which){case 38:e.key="";break;case 40:e.key="";break;case 37:e.key="";break;case 39:e.key=""}t.attr("key",e.which),t.attr("value",e.key)})),$("#snesControllerMap > *").on("mouseenter",(function(){switch(void 0!==this.attributes.for?this.attributes.for.value:this.id){case"snesControlUp":$("#gameControllerImage > .hl").removeClass().addClass("hl").addClass("up");break;case"snesControlDown":$("#gameControllerImage > .hl").removeClass().addClass("hl").addClass("down");break;case"snesControlLeft":$("#gameControllerImage > .hl").removeClass().addClass("hl").addClass("left");break;case"snesControlRight":$("#gameControllerImage > .hl").removeClass().addClass("hl").addClass("right");break;case"snesControlLeftBumper":$("#gameControllerImage > .hl").removeClass().addClass("hl").addClass("leftbumper");break;case"snesControlRightBumper":$("#gameControllerImage > .hl").removeClass().addClass("hl").addClass("rightbumper");break;case"snesControlA":$("#gameControllerImage > .hl").removeClass().addClass("hl").addClass("a");break;case"snesControlB":$("#gameControllerImage > .hl").removeClass().addClass("hl").addClass("b");break;case"snesControlX":$("#gameControllerImage > .hl").removeClass().addClass("hl").addClass("x");break;case"snesControlY":$("#gameControllerImage > .hl").removeClass().addClass("hl").addClass("y");break;case"snesControlStart":$("#gameControllerImage > .hl").removeClass().addClass("hl").addClass("start");break;case"snesControlSelect":$("#gameControllerImage > .hl").removeClass().addClass("hl").addClass("select")}})),$("#snesControllerMap > *").on("mouseleave",(function(){$("#gameControllerImage > .hl").removeClass().addClass("hl")})),$("#statusGameLobbyMute").on("click",(function(){const e=$(this);e.hasClass("muted")?(e.removeClass("muted"),r.audioMuted=!1,null!=r.currentAudio&&r.currentAudio.play(),Cookies.remove("statusGameLobbyMute")):(e.addClass("muted"),r.audioMuted=!0,null!=r.currentAudio&&(r.currentAudio.pause(),r.currentAudio.currentTime=0),Cookies.set("statusGameLobbyMute",1,{expires:90}))})),void 0!==Cookies.get("statusGameLobbyMute")?($("#statusGameLobbyMute").addClass("muted"),r.audioMuted=!0):($("#statusGameLobbyMute").removeClass("muted"),r.audioMuted=!1)},preload:d,load:p,open:function(){t||p(),c(),u()},close:function(){null!=r.currentAudio&&(r.currentAudio.pause(),r.currentAudio.currentTime=0),$("#underlay > *").css("display","block"),$("#underlay > #gameAnimatedBackground").css("display","none"),$("section#"+e).css("display","none"),null!=l&&(clearInterval(l),l=null)},getTimeOpened:function(){return void 0!==r.timeLastGameOpened&&null!==r.timeLastGameOpened?r.timeLastGameOpened.getTime():Date.now()}}}();MSLAppManager.register("games",MSLAppGames,!0);var MSLAppGamesPlay=function(){const e="MSLAppGamesPlay";var t,n,i;function a(){$("#underlay > #videoBackground").css("backgroundColor","#323232"),$("#underlay > #videoBackground").css("mix-blend-mode","overlay")}function o(){$("body > section").css("display","none"),$("section#"+e).fadeIn()}function r(e){}function s(e,r){r=void 0!==r&&r;let s=null;if("snes"===n[(e=void 0!==e?e:{}).gameID].sysID)s={0:{4:{type:1,index:"0",value:$("#snesControlUp").attr("key")},5:{type:1,index:"0",value:$("#snesControlDown").attr("key")},6:{type:1,index:"0",value:$("#snesControlLeft").attr("key")},7:{type:1,index:"0",value:$("#snesControlRight").attr("key")},1:{type:1,index:"0",value:$("#snesControlY").attr("key")},9:{type:1,index:"0",value:$("#snesControlX").attr("key")},8:{type:1,index:"0",value:$("#snesControlA").attr("key")},0:{type:1,index:"0",value:$("#snesControlB").attr("key")},3:{type:1,index:"0",value:$("#snesControlStart").attr("key")},2:{type:1,index:"0",value:$("#snesControlSelect").attr("key")}}};startGame(i,{sys:n[e.gameID].sysID,rom:n[e.gameID].rom,controls:s}),t=!0,a(),o()}return{init:function(){t=!1,n=MSLAppGamesData,i=retroInit()},preload:r,load:s,open:function(){t||s(),a(),o()},close:function(){$("section#"+e).css("display","none")}}}();MSLAppManager.register("gamesPlay",MSLAppGamesPlay,!0);var MSLAppBookmark=function(){var e,t,n,i=null;function a(){$("#underlay > #videoBackground").css("backgroundColor","#000"),$("#underlay > #videoBackground").css("mix-blend-mode","color"),$("#underlay > #videoBackground").css("opacity",1),$("#underlay > video").css("filter","brightness(0.3)"),$("#underlay > video").css("-webkit-filter","brightness(0.3)")}function o(e,t){if(t=void 0===t||t,MSLGlobals.isOwner||!MSLGlobals.isLocked||!t)return n.children().hide(),"BOOKMARK_ADD"==e?(n.children(".websiteAddStep1").show(),$("#MSLAppBookmarkInName").val(""),$("#MSLAppBookmarkInWebsiteURL").val(""),void $("#MSLAppBookmarkInWebsiteURLError").text(MSLGlobals.isOwner?"":"Sorry, only TV owners may add an website.")):"BOOKMARK_DELETE"==e?(n.children(".websiteDelete").show(),void $("#MSLAppBookmarkWebsiteDeleteError").removeClass("ok").text("")):void(i.hasAny()?n.children("#bookmarkList").show():n.children(".websiteListEmpty").show());MSLGlobals.Audio.play("denied")}function r(){$("body > section").css("display","none"),$("section#MSLAppBookmark").fadeIn(),$("#MSLAppBookmark > header > div.navBack").addClass("disabled"),o(null,!1)}function s(e){void 0!==e.selected&&(t=e.selected)}function l(n,l){n=void 0!==n?n:{},l=void 0!==l&&l,e=!0,a(),s(n),function(e){e=void 0!==e?e:0,i.clearCollection(),$.ajax({method:"GET",url:"json/bookmarkFetch.php?uuid="+MSLGlobals.uuid}).done((function(e,t,n){if(200==n.status&&0==(e=JSON.parse(e)).error){for(var a=0;a<e.data.length;a++){var r=$(document.createElement("div"));r.addClass("bookmark"),!MSLGlobals.isOwner&&MSLGlobals.isLocked?r.attr("onclick","MSLGlobals.Audio.play( 'denied' );"):("http"!=e.data[a].url.substr(0,4)&&(e.data[a].url="https://"+e.data[a].url),r.attr("onclick","window.location='"+e.data[a].url+"'"));var s=$(document.createElement("div"));s.addClass("icon");var l=$(document.createElement("div"));null!=e.data[a].icon&&e.data[a].icon.length>0?(l.css("backgroundImage","url('"+e.data[a].icon+"')"),l.css("backgroundSize","contain")):(l.css("backgroundImage","url('../images/icon-bookmark.png')"),l.css("backgroundColor","#373737")),s.append(l),r.append(s);var c=e.data[a].url;"/"==(c=(c=(c=c.replace("http://","")).replace("https://","")).replace("www.","")).slice(-1)&&(c=c.slice(0,-1));var u=c.indexOf("?");-1!=u&&(c=c.slice(0,u));var d=$(document.createElement("div"));d.addClass("text");var p=$(document.createElement("h5")).text(e.data[a].name),h=$(document.createElement("p")).text(c);if(d.append(p),d.append(h),r.append(d),MSLGlobals.isOwner){var m=$(document.createElement("div"));m.addClass("delete"),m.attr("websiteid",e.data[a].id),m.on("click",(function(){return $("#MSLAppBookmarkDeleteWebsiteID").val($(this).attr("websiteid")),MSLAppBookmark.showPage("BOOKMARK_DELETE",!1),event.stopPropagation(),!1})),r.append(m)}i.addItem(r)}i.render(),o(null,!1)}}))}(t),t=0,r()}return{init:function(){e=!1,t=0,new MSLHistory($("section#MSLAppBookmark")),n=$("#MSLAppBookmark > main"),i=new GridMenu($("#bookmarkList"),$("#bookmarkPages"),3,8),$(".MSLAppBookmarkAddWebsite").click((function(e){MSLAppBookmark.showPage("BOOKMARK_ADD",!1)})),$("#MSLAppBookmarkInName").on("input propertychange paste",(function(e){var t=$(this).val();0==t.length?$("#MSLAppBookmarkInNameError").removeClass("ok").text("Enter a name for your bookmark"):t.length>60?$("#MSLAppBookmarkInNameError").removeClass("ok").text("Bookmark name can't be more than 60 characters long"):$("#MSLAppBookmarkInNameError").addClass("ok").text("Bookmark name is valid")})),$("#MSLAppBookmarkInWebsiteURL").on("input propertychange paste",(function(e){var t=document.createElement("a"),n=$(this).val();"http"!=n.substr(0,4)&&(n="http://"+n),t.href=n,0==t.hostname.length?$("#MSLAppBookmarkInWebsiteURLError").removeClass("ok").text("Enter a valid website URL."):$("#MSLAppBookmarkInWebsiteURLError").addClass("ok").text("Websites recognized, press SUBMIT to add this bookmark.")})),$(".MSLAppBookmarkSearchCtrl").on("input propertychange paste",(function(e){i.render()})),$("#MSLAppBookmark #cancel").click((function(e){MSLAppBookmark.showPage(null,!1)})),$("#MSLAppBookmark .websiteAddStep1 #submit").click((function(e){$("#MSLAppBookmarkInWebsiteURLError").addClass("ok").text("Adding bookmark..."),$.ajax({method:"POST",url:"json/bookmarkAdd.php",data:{uuid:MSLGlobals.uuid,url:encodeURIComponent($("#MSLAppBookmarkInWebsiteURL").val()),name:$("#MSLAppBookmarkInName").val()}}).done((function(e){if(0==(e=JSON.parse(e)).error)$("#MSLAppBookmarkInWebsiteNameError").addClass("ok").text("Website has been added!"),MSLAppManager.load("bookmark");else{var t="Unknown error ("+e.error+")";if(1===e.error)t=e.data;$("#MSLAppBookmarkInWebsiteURLError").removeClass("ok").text(t)}})).fail((function(e){$("#MSLAppBookmarkInWebsiteURLError").removeClass("ok").text("Unknown error")}))})),$("#MSLAppBookmark .websiteDelete #submit").click((function(e){$("#MSLAppBookmarkWebsiteDeleteError").addClass("ok").text("Deleting bookmark."),$.ajax({method:"POST",url:"json/bookmarkDelete.php",data:{uuid:MSLGlobals.uuid,id:$("#MSLAppBookmarkDeleteWebsiteID").val()}}).done((function(e){$("#MSLAppBookmarkWebsiteDeleteError").addClass("ok").text("Bookmark has been deleted."),MSLAppManager.load("bookmark")})).fail((function(e){$("#MSLAppBookmarkWebsiteDeleteError").removeClass("ok").text("An error occured while attempting to delete the bookmark.")}))}))},preload:s,load:l,open:function(){e||l(),a(),r()},close:function(){$("section#MSLAppBookmark").css("display","none")},showPage:o,back:function(){}}}();MSLAppManager.register("bookmark",MSLAppBookmark,!0);var MSLAppSettings=function(){var e,t=null,n=null,i=null;function a(){$("body > section").css("display","none"),$("section#MSLAppSettings > main > section").css("display","none"),$("section#MSLAppSettings > main > section#SettingsMenu").css("display","block"),$("section#MSLAppSettings").css("backgroundColor","transparent"),$("section#MSLAppSettings").fadeIn(),i&&i.UpdateVisibility()}function o(t,n){e=!0,s(),a()}function r(){$("section#MSLAppSettings > header > div.navBack").css("opacity",1),$("section#MSLAppSettings > header > div.navBack").css("cursor","pointer")}function s(){$("section#MSLAppSettings > header > div.navBack").addClass("disabled"),$("section#MSLAppSettings > header > div.navBack").css("cursor","auto")}function l(){$doc=$("html, body"),null===t&&(t=$doc.css("height"),n=$("section#MSLAppSettings > main").css("height")),$("html, body").css("height","100%"),$("section#MSLAppSettings > main").css("height",""),$("section#MSLAppSettings").css("overflow-y","auto")}function c(){null!==t&&($("html, body").css("height",t),$("section#MSLAppSettings").css("overflow-y",""),$("section#MSLAppSettings > main").css("height",n))}function u(){s(),c(),$("section#MSLAppSettings").css("backgroundColor","transparent"),$("section#MSLAppSettings > main > section").css("display","none"),$("section#MSLAppSettings > main > section#SettingsMenu").css("display","block")}function d(e,t){var n=e.parent(),i=n.parent(),a=n.children(".value").first(),o=a.children(".selected").first().index(),r=a.children().length;if(i.removeClass("error").removeClass("warning"),i.children(".message").remove(),!(-1==o||r<=1)){o+t>=r?o=0:o+t<0?o=r-1:o+=t;var s=a.children().eq(o),l="undefined"!=n.attr("callback")?n.attr("callback"):null;if(l&&(l=2==(l=l.split(".")).length?window[l[0]][l[1]]:window[l[0]]),a.children().removeClass("selected"),s.addClass("selected"),l&&l(s.attr("value")),i.attr("requiresRestart")){i.addClass("warning");const e=document.createElement("div"),t=document.createElement("p");e.className="message",t.innerText="Requires Restart",e.appendChild(t),i.append(e)}}}function p(e,t){if(1!=(t=void 0===t||t)||MSLGlobals.isOwner){var n=$("#underlay"),i=n.children("video").first(),a=$(document.createElement("video"));if("none"==e)i.remove(),n.append(a);else{var o=$(document.createElement("source"));o.attr("src","videos/"+e+".webm"),o.attr("type","video/webm"),a.append(o),a.attr("poster","videos/"+e+".jpg"),a.prop("autoplay",!0),a.prop("loop",!0),i.remove(),n.append(a)}MSLGlobals.isOwner&&(t&&MSLGlobals.sync&&MSLGlobals.sync.send({c:20,setting:"BackgroundVideo",value:e}),$.post("json/ownerSet.php",{uuid:MSLGlobals.uuid,setting:"BackgroundVideo",value:e}))}}function h(e,t){if(1!=(t=void 0===t||t)||MSLGlobals.isOwner){var n=$("#videoBackground"),i="#00e4ff";void 0!==MSLGlobals.BackgroundColourList[e]&&(i=MSLGlobals.BackgroundColourList[e][1]),n.css("background-color",i),MSLAppHome.setBackgroundColour(i),MSLGlobals.isOwner&&(t&&MSLGlobals.sync&&MSLGlobals.sync.send({c:20,setting:"BackgroundColour",value:e}),$.post("json/ownerSet.php",{uuid:MSLGlobals.uuid,setting:"BackgroundColour",value:e}))}}function m(e,t){if(1!=(t=void 0===t||t)||MSLGlobals.isOwner){var n=$("#videoBackground"),i="overlay";switch(e){case"multiply":i="multiply";break;case"darken":i="darken";break;case"colorburn":i="color-burn";break;case"softlight":i="soft-light";break;case"difference":i="difference";break;case"exclusion":i="exclusion";break;case"color":i="color";break;case"normal":i="normal"}n.css("mix-blend-mode",i),MSLAppHome.setBackgroundBlend(i),MSLGlobals.isOwner&&(t&&MSLGlobals.sync&&MSLGlobals.sync.send({c:20,setting:"BackgroundBlend",value:e}),$.post("json/ownerSet.php",{uuid:MSLGlobals.uuid,setting:"BackgroundBlend",value:e}))}}function g(e,t){return new Promise((async(n,i)=>{if(t=void 0===t||t,e=void 0===e||null==e?"":e.trim(),1!=t||MSLGlobals.isOwner)if(e.length>300)i("The URL is "+e.length+" characters which is too long. Up to 300 characters are permitted. Consider re-uploading the image to a different service with shorter URLs.");else{if(e.length>=16)try{const t=new URL(e);if("http:"!=t.protocol&&"https:"!=t.protocol)return void i("Please ensure the URL has 'https://' in front.");if(e=t.toString(),!await asyncIsImage(e,3e3))return void i("The URL does not seem to be a valid image.");$("#inputCustomBackground").val(e)}catch(e){return void i("The URL is invalid.")}else if(e.length>0)return void i("The URL is invalid.");var a=$("#videoBackground");0!=e.length?(a.css("background-image","url('"+e+"')"),MSLAppHome.setCustomBackground(e)):(a.css("background-image","none"),MSLAppHome.setCustomBackground(null)),MSLGlobals.isOwner&&(t&&MSLGlobals.sync&&MSLGlobals.sync.send({c:20,setting:"CustomBackground",value:e}),$.post("json/ownerSet.php",{uuid:MSLGlobals.uuid,setting:"CustomBackground",value:e}).done((function(e){$("#SettingsMenuCustomBackground .save").removeClass("changes")}))),n()}}))}function f(e,t){e=0!=e,(1!=(t=void 0===t||t)||MSLGlobals.isOwner)&&$.post("json/ownerSet.php",{uuid:MSLGlobals.uuid,setting:"PG13",value:e?1:0})}function v(e,t){e=0!=e,(1!=(t=void 0===t||t)||MSLGlobals.isOwner)&&$.post("json/ownerSet.php",{uuid:MSLGlobals.uuid,setting:"Browser",value:e?1:0})}return{init:function(){e=!1,$(".SettingsSelection > .prev").on("click",(function(){d($(this),-1)})),$(".SettingsSelection > .next").on("click",(function(){d($(this),1)})),$(".SettingsInput > .save").on("click",(function(){!function(e){var t=e.parent(),n=t.parent(),i=t.children().first().children().first()[0].value;n.removeClass("error").removeClass("warning"),n.children(".message").remove(),(void 0===i||null==i||0==i.trim().length)&&(i=null);var a="undefined"!=t.attr("callback")?t.attr("callback"):null;if(a){let e=(a=2==(a=a.split(".")).length?window[a[0]][a[1]]:window[a[0]])(i);if(void 0!==e&&e.catch((e=>{n.addClass("error");const t=document.createElement("div"),i=document.createElement("p");t.className="message",i.innerText=e,t.appendChild(i),n.append(t)})),n.attr("requiresRestart")){n.addClass("warning");const e=document.createElement("div"),t=document.createElement("p");e.className="message",t.innerText="Requires Restart",e.appendChild(t),n.append(e)}}}($(this))})),$(".SettingsInput > div.value > select").on("change",(function(){!function(e){var t=e.parent().parent(),n=t.parent(),i=t.attr("callback");if(n.removeClass("error").removeClass("warning"),n.children(".message").remove(),void 0===i)return;i=2==(i=i.split(".")).length?window[i[0]][i[1]]:window[i[0]];if(i(e.val()),!!n.attr("requiresRestart")){n.addClass("warning");const e=document.createElement("div"),t=document.createElement("p");e.className="message",t.innerText="Requires Restart",e.appendChild(t),n.append(e)}}($(this))})),$(".SettingsInput > .value > input").on("keydown",(function(e){return 13==e.keyCode&&$(this).parent().parent().children(".save").click(),!0}));try{(i=new UndockedScrollbar($("#settingsMenuBody"),$("#settingsMenuScroll"))).UpdateVisibility()}catch(e){i=null}const t=function(e,t,n=null,i=null){if(t.removeClass("invalid"),e.keyCode>=49&&e.keyCode<=57||e.keyCode>=97&&e.keyCode<=105)t.val(e.key),$("#SettingsMenuPrivateModePIN .save").addClass("changes"),i&&i.focus();else if(38==e.keyCode){let e=parseInt(t.val());t.val(isNaN(e)||++e>=10?1:e),$("#SettingsMenuPrivateModePIN .save").addClass("changes")}else if(40==e.keyCode){let e=parseInt(t.val());t.val(isNaN(e)||--e<=0?9:e),$("#SettingsMenuPrivateModePIN .save").addClass("changes")}else if(37==e.keyCode&&n)n.focus();else if(39==e.keyCode)i&&i.focus();else if(8==e.keyCode)0==t.val().length&&n?n.focus():(t.val(""),$("#SettingsMenuPrivateModePIN .save").addClass("changes"));else if(46==e.keyCode)t.val(""),$("#SettingsMenuPrivateModePIN .save").addClass("changes");else{if(16==e.keyCode||9==e.keyCode)return!0;13==e.keyCode&&$("#SettingsMenuPrivateModePIN .save").click()}return!1};$("#inputPIN1").on("keydown",(function(e){return t(e,$(this),null,$("#inputPIN2"))})),$("#inputPIN2").on("keydown",(function(e){return t(e,$(this),$("#inputPIN1"),$("#inputPIN3"))})),$("#inputPIN3").on("keydown",(function(e){return t(e,$(this),$("#inputPIN2"),$("#inputPIN4"))})),$("#inputPIN4").on("keydown",(function(e){return t(e,$(this),$("#inputPIN3"),null)})),$("#inputCustomBackground").on("keyup",(function(){$("#SettingsMenuCustomBackground .save").addClass("changes")})),$("#inputHomepage").on("keyup",(function(){$("#SettingsMenuHomePage .save").addClass("changes")})),$("section#SettingsMenu ul > li").on("mouseenter",(function(){const e=$(this).attr("tooltip");e&&($("#SettingsMenuToolTip > p").html(e),$("#SettingsMenuToolTip").stop().fadeTo(150,1),$("#SettingsMenuToolTip > p").stop().fadeIn(150))})),$("section#SettingsMenu ul > li").on("mouseleave",(function(){$("#SettingsMenuToolTip").stop().fadeTo(150,0),$("#SettingsMenuToolTip > p").stop().fadeOut(150,(function(){$("#SettingsMenuToolTip > p").html("")}))}))},preload:function(e){},load:o,open:function(){e||o(),a()},close:function(){$("section#MSLAppSettings").css("backgroundColor","transparent"),$("section#MSLAppSettings").css("display","none"),c()},TroubleshootingOpenIssue:function(e){var t=$("section#SettingsTroubleshooting"),n=t.find("span#issue-"+e).first(),i=t.find("div#issue-"+e).first(),a="block"==i.css("display");t.find("span.pointer").html("&#x25ba;"),t.find("div").css("display","none"),a||(n.html("&#x25bc;"),i.css("display","block"))},SettingsMenuChange:function(e,t,n){switch(n=void 0===n||n,e){case"BackgroundVideo":p(t,n);break;case"BackgroundColour":h(t,n);break;case"BackgroundBlend":m(t,n);break;case"CustomBackground":g(t,n);break;case"PG13Filter":f(t,n);break;case"Browser":v(t,n)}},SettingsMenuBackgroundVideoChange:p,SettingsMenuBackgroundColourChange:h,SettingsMenuBackgroundBlendChange:m,SettingsMenuCustomBackgroundChange:g,SettingsMenuPrivateModeChange:function(e,t){e=0!=e,(1!=(t=void 0===t||t)||MSLGlobals.isOwner)&&(e?$("#SettingsMenuPrivateModePIN").show():$("#SettingsMenuPrivateModePIN").hide(),i.UpdateVisibility(),$.post("json/ownerSet.php",{uuid:MSLGlobals.uuid,setting:"PrivateMode",value:e?1:0,pin:-1}))},SettingsMenuPrivateModePINChange:function(e,t){if(1==(t=void 0===t||t)&&!MSLGlobals.isOwner)return;let n=$("#inputPIN1").removeClass("invalid").blur().val(),i=$("#inputPIN2").removeClass("invalid").blur().val(),a=$("#inputPIN3").removeClass("invalid").blur().val(),o=$("#inputPIN4").removeClass("invalid").blur().val(),r=parseInt([n,i,a,o].join(""));if(n.length+i.length+a.length+o.length!=0&&(r<1111||r>9999))return(0==n.length||isNaN(n))&&$("#inputPIN1").addClass("invalid"),(0==i.length||isNaN(i))&&$("#inputPIN2").addClass("invalid"),(0==a.length||isNaN(a))&&$("#inputPIN3").addClass("invalid"),void((0==o.length||isNaN(o))&&$("#inputPIN4").addClass("invalid"));$("#SettingsMenuPrivateModePIN .save").removeClass("changes"),$.post("json/ownerSet.php",{uuid:MSLGlobals.uuid,setting:"PrivateModePIN",value:r})},SettingsMenuPG13FilterChange:f,SettingsMenuBrowserChange:v,SettingsMenuHomepageSave:function(e,t){return new Promise(((n,i)=>{if(t=void 0===t||t,e=void 0===e||null==e?"":e.trim(),1!=t||MSLGlobals.isOwner)if(e.length>255)i("The URL is "+e.length+" characters which is too long. Up to 255 characters are permitted.");else{if(e.length>=16)try{const t=new URL(e);if("http:"!=t.protocol&&"https:"!=t.protocol)return void i("Please ensure the URL has 'https://' in front.");e=t.toString(),$("#inputHomepage").val(e)}catch(e){return void i("The URL is invalid.")}else if(e.length>0)return void i("The URL is invalid.");(1!=t||MSLGlobals.isOwner)&&($.post("json/ownerSet.php",{uuid:MSLGlobals.uuid,setting:"Homepage",value:e}).done((function(e){var t=JSON.parse(e);void 0!==t.data&&t.data.length>0?MSLGlobals.Homepage=t.data:MSLGlobals.Homepage=MSLGlobals.DefaultHomepage,$("#SettingsMenuHomePage .save").removeClass("changes")})),n())}}))},SettingsMenuDefaultAppSave:function(e,t){$.post("json/ownerSet.php",{uuid:MSLGlobals.uuid,setting:"DefaultApp",value:e})},SetBrowserAcknowledged:function(e=1){$.post("json/ownerSet.php",{uuid:MSLGlobals.uuid,setting:"BrowserAck",value:1})},SettingsMenuTime:function(e,t){$.post("json/ownerSet.php",{uuid:MSLGlobals.uuid,setting:"MenuTime",value:e}),MSLGlobals.DisplayTimeFormat=parseInt(e)},showPage:function(e){switch(e.toLowerCase()){case"changelog":r(),c(),$("section#MSLAppSettings > main > section").css("display","none"),$("section#MSLAppSettings > main > section#SettingsChangelog").css("display","block");break;case"troubleshooting":r(),l(),$("section#MSLAppSettings > main > section").css("display","none"),$("section#MSLAppSettings > main > section#SettingsTroubleshooting").css("display","block");break;case"contact":r(),c(),$("section#MSLAppSettings > main > section").css("display","none"),$("section#MSLAppSettings > main > section#SettingsContact").css("display","block");break;case"copysettings":!function(){r(),l(),$("section#MSLAppSettings").css("backgroundColor","#000000"),$("section#MSLAppSettings > main > section").css("display","none");var e=$("section#MSLAppSettings > main > section#SettingsCopySettings");e.css("display","block"),e.children("section#input").css("display","block"),e.children("section#result").css("display","none")}();break;default:u()}},powerOff:function(){window.location.hash="PowerOff"},back:function(){u()},sendContactForm:function(){var e=$("#contact_status"),t=$("#contact_slname").val(),n=parseInt($("#contact_reason").val()),i=$("#contact_message").val();if(e.text(""),e.removeClass(),i.length<10)return e.addClass("error"),void e.text("Failed to send: message too short.");e.text("Sending..."),$.post("json/contactform.php",{slname:t,reason:n,message:i}).done((function(t){try{t=JSON.parse(t)}catch(t){e.addClass("error"),e.text("Failed to send: server error.")}t&&void 0!==t.status&&void 0!==t.message?200!=parseInt(t.status)?(e.addClass("error"),e.text("Failed to send: "+t.message)):(e.addClass("success"),e.text("OK")):(e.addClass("error"),e.text("Failed to send: server error."))})).fail((function(){e.addClass("error"),e.text("Failed to send: server unreachable. Try again later.")}))},copySettingsForm:function(){var e=$("section#MSLAppSettings > main > section#SettingsCopySettings");e.children("section#input").css("display","none"),e.children("section#result").css("display","block");var t=e.find("#copySettingsStatus"),n=$("#settingsCopySettingsUUID").val();t.removeClass("error"),t.removeClass("success"),t.text("Fetching data from TV..."),$.post("json/copySettings.php",{key:n,uuid:MSLGlobals.uuid}).done((function(e){try{e=JSON.parse(e)}catch(e){t.addClass("error"),t.text("Failed to copy data: server error.")}e&&void 0!==e.status&&void 0!==e.message?200!=parseInt(e.status)?(t.addClass("error"),t.text("Failed to copy data: "+e.message)):(t.addClass("success"),t.text("Successfully copied data to this TV. Please reboot your device for all changes to take effect.")):(t.addClass("error"),t.text("Failed to copy data: server error."))})).fail((function(){t.addClass("error"),t.text("Failed to copy data: server unreachable. Try again later.")}))},copyUUIDToClipboard:function(){$("#currentuuid").select(),document.execCommand("copy")}}}();MSLAppManager.register("settings",MSLAppSettings,!0);var data,MSLAppHelp=function(){var e,t=null;function n(){$("body > section").css("display","none"),$("section#MSLAppHelp").css("backgroundColor","transparent"),$("section#MSLAppHelp").fadeIn(),a()}function i(t,i){e=!0,n()}function a(){return $("#helpContainerBody > h5 > span").removeClass("open"),$("#helpContainerBody > section").addClass("hidden"),t.UpdateVisibility(),this}return{init:function(){e=!1,(t=new UndockedScrollbar($("#helpContainerBody"),$("#helpContainerScroll"))).UpdateVisibility(),$("#helpContainerBody > h5").each((function(){const e=$("#"+$(this).attr("for")),n=$(this).children("span").eq(0);e&&$(this).on("click",(function(){e.hasClass("hidden")?(n.addClass("open"),e.removeClass("hidden"),t.UpdateVisibility(),this.scrollIntoView({behavior:"smooth"})):(n.removeClass("open"),e.addClass("hidden"),t.UpdateVisibility())}))}))},preload:function(e){},load:i,open:function(){e||i(),n()},close:function(){$("section#MSLAppHelp").css("backgroundColor","transparent"),$("section#MSLAppHelp").css("display","none")},back:function(){},hideAllPages:a}}();MSLAppManager.register("help",MSLAppHelp,!0);class StatusMessage{constructor(e){this.$target=e.addClass("statusMessage"),this.$graphic=$(document.createElement("div")).addClass("graphic"),this.$text=$(document.createElement("div")).addClass("text"),this.$loadingDots=$(document.createElement("span")).addClass("loadingDots"),this.$target.append(this.$graphic),this.$target.append(this.$text),this.Clear()}destroy(){this.$target.empty()}Clear(){this.$target.css("display","none"),this.$graphic.removeClass().addClass("graphic"),this.$text.empty()}Set(e,t=null,n=!1){null!=t&&this.$graphic.addClass(t),this.$text.text(e),n&&this.$text.append(this.$loadingDots),this.$target.css("display","flex")}}class MSLVideoPlayer{constructor(e,t={}){this.$target=e,this.$loading=$(document.createElement("div")),this.$video=$(document.createElement("video")),this.$video.prop("playsinline",!0),this.$video.prop("controls",t.controls??!0),this.$video.attr("data-plyr-config",t.controlDefinition??'{ "controls": ["play", "mute", "volume"] }'),this.$video.css("display","none"),this.$target.append(this.$loading),this.$target.append(this.$video),this.statusOverlay=null,this.player=null,this.hls=null,this.dash=null,this.config={},this.config.mslSync=t.mslSync??!1,this.config.antiCors=t.antiCors??!1,this.config.preload=t.preload??"metadata",this.config.fullscreenAudio=t.fullscreenAudio??!0,this.config.hlsConfig=t.hlsConfig??null,this.config.plyrSettings={clickToPlay:!1},this.config.callbacks={onControlPrev:()=>{},onControlNext:()=>{},onSyncPrev:()=>{},onSyncNext:()=>{},onPrev:()=>{},onNext:()=>{}},t.plyrSettings&&(this.config.plyrSettings={...this.config.plyrSettings,...t.plyrSettings}),t.callbacks&&(this.config.callbacks={...this.config.callbacks,...t.callbacks})}init(){this.destroy(),this.$video=this.$target.find("video").first(),this.player=new Plyr(this.$video[0],this.config.plyrSettings),this.player.on("loadstart",(e=>{this.player.playOnFirstOpportunity=!0})),this.statusOverlay=new StatusMessage(this.$loading),this.statusOverlay.Set("Loading","loading")}applySyncControls(){this.config.mslSync&&MSLGlobals.sync&&(this.player.elements.buttons.play[0].addEventListener("click",(()=>{!MSLGlobals.isOwner&&MSLGlobals.isLocked||(this.player.paused?MSLGlobals.sync.send({c:19,a:63146}):this.player.playing&&MSLGlobals.sync.send({c:19,a:44850}))})),this.player.elements.inputs.seek.addEventListener("click",(()=>{!MSLGlobals.isOwner&&MSLGlobals.isLocked||MSLGlobals.sync.send({c:19,a:9312,v:this.player.currentTime})})))}injectPlaylistControls(){const e=this.player.elements.controls.querySelector('.plyr__controls [data-plyr="play"]'),t=document.createElement("button");t.type="button",t.className="plyr-prev plyr__controls__item plyr__control";const n=document.createElement("div");n.className="icon",t.addEventListener("mouseup",(()=>{if(MSLGlobals.sync&&this.config.mslSync){if(!MSLGlobals.isOwner&&MSLGlobals.isLocked)return void MSLGlobals.Audio.play("denied");MSLGlobals.sync.send({c:19,a:27920}),this.config.callbacks.onControlPrev(),this.config.callbacks.onPrev()}})),t.append(n),e.parentNode.insertBefore(t,e);const i=document.createElement("button");i.type="button",i.className="plyr-next plyr__controls__item plyr__control",i.addEventListener("mouseup",(()=>{if(MSLGlobals.sync&&this.config.mslSync){if(!MSLGlobals.isOwner&&MSLGlobals.isLocked)return void MSLGlobals.Audio.play("denied");MSLGlobals.sync.send({c:19,a:53294}),this.config.callbacks.onControlNext(),this.config.callbacks.onNext()}}));const a=document.createElement("div");a.className="icon",i.append(a),e.parentNode.insertBefore(i,e.nextSibling)}load(e){const t=new URL(e);-1==t.pathname.indexOf(".mpd")&&-1==e.indexOf(".mpd")?-1==t.pathname.indexOf(".m3u8")&&-1==e.indexOf(".m3u8")||!Hls.isSupported()?this.loadDefault(e):this.loadHls(e):this.loadDash(e)}loadDefault(e,t=null,n=null){const i=new URL(e);null==t&&-1!=i.pathname.indexOf(".mp4")?(t="video",n="video/mp4"):null==t&&-1!=i.pathname.indexOf(".webm")&&(t="video",n="video/webm"),t&&n?(this.player.source={type:this.config.fullscreenAudio?"video":t,sources:[{src:e,type:n}]},this.config.fullscreenAudio&&"audio"==t&&this.player.elements.container.classList.add("plyr--fullscreenAudio"),this.player.media.setAttribute("preload",this.config.preload)):(this.$video[0].src=e,this.$video[0].setAttribute("preload",this.config.preload)),this.player.on("canplay",(e=>{this.player.playOnFirstOpportunity&&(this.player.playOnFirstOpportunity=void 0,this.player.play()),this.$video.css("display","block"),this.statusOverlay.Clear()})),this.applySyncControls()}loadHls(e){if(!Hls.isSupported())return void this.loadDefault(e);this.config.antiCors?null!=this.config.hlsConfig?this.hls=new Hls(this.config.hlsConfig):this.hls=new Hls({fLoader:fLoader,manifestLoadingTimeOut:7e3,manifestLoadingMaxRetry:2,fragLoadingTimeOut:3e4,fragLoadingMaxRetry:3}):this.hls=new Hls,this.hls.attachMedia(this.$video[0]);const t=this;this.hls.on(Hls.Events.MEDIA_ATTACHED,(function(){t.hls.loadSource(e),t.applySyncControls()})),this.hls.on(Hls.Events.MANIFEST_LOADED,(function(){t.player.play()})),this.hls.on(Hls.Events.FRAG_PARSED,(function(){t.$video.css("display","block"),t.statusOverlay.Clear()})),this.hls.on(Hls.Events.ERROR,(function(e,n){if(n.fatal)switch(n.type){case Hls.ErrorTypes.NETWORK_ERROR:console.warn("HLS attempting to recover from network error"),t.hls.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:console.warn("HLS attempting to recover from media error"),t.hls.recoverMediaError();break;default:console.error("HLS unable to recover from fatal error:"),console.log(n),t.statusOverlay.Clear(),t.statusOverlay.Set("An error occured","error"),t.destroy()}else n.type,Hls.ErrorTypes.NETWORK_ERROR}))}loadDash(e){$.ajax({method:"GET",url:e}).done((t=>{const n=t.getElementsByTagName("AdaptationSet");let i=null,a=null;for(let e=0;e<n.length;++e)if("video/mp4"==n[e].getAttribute("mimeType")){const t=n[e].getElementsByTagName("ContentProtection");for(let e=0;e<t.length;++e){if(t[e].getAttribute("bc:licenseAcquisitionUrl")){i=t[e].getAttribute("bc:licenseAcquisitionUrl");continue}const n=t[e].getElementsByTagName("mspr:pro");if(1==n.length)try{const e=atob(n[0].innerHTML);a=(new DOMParser).parseFromString(e.substr(e.indexOf("<")).replaceAll("\0",""),"text/xml").getElementsByTagName("LA_URL")[0].innerHTML}catch(e){}}break}let o={},r=!1;i&&(r=!0,o["com.widevine.alpha"]={laURL:i}),a&&(r=!0,o["com.microsoft.playready"]={laURL:a}),this.dash=dashjs.MediaPlayer().create(),this.dash.initialize(this.$video[0],e,!0),this.applySyncControls(),r&&this.dash.setProtectionData(o),this.dash.on(dashjs.MediaPlayer.events.PLAYBACK_METADATA_LOADED,(e=>{this.$video.css("display","block"),this.statusOverlay.Clear()}))}))}destroy(){null!=this.statusOverlay&&this.statusOverlay.destroy(),null!=this.player&&this.player.destroy(),null!=this.hls&&this.hls.destroy(),null!=this.dash&&this.dash.destroy(),this.player=null,this.hls=null}fromMslSync(e){this.player&&void 0!==e.a&&(44850==e.a?this.player.play():63146==e.a?this.player.pause():9312==e.a&&void 0!==e.v?this.player.currentTime=e.v:53294==e.a?(this.config.callbacks.onSyncNext(),this.config.callbacks.onNext()):27920==e.a&&(this.config.callbacks.onSyncPrev(),this.config.callbacks.onPrev()))}}class MSLYoutubePlayer{static#t=0;static#n=1;static#i=2;id=null;domContainer=null;domPlyrWrapper=null;domYtWrapper=null;player=null;ytPlayer=null;loop=!1;#a=MSLYoutubePlayer.#t;constructor(e){"undefined"!=typeof jQuery&&e instanceof jQuery?(this.domContainer=e[0],this.id=this.domContainer.id):e instanceof HTMLElement?(this.domContainer=e,this.id=this.domContainer.id):"string"==typeof e&&("#"==e.charAt(0)&&(e=e.substr(1)),this.id=e,this.domContainer=document.getElementById(e)),this.destroy(),this.domPlyrWrapper=document.createElement("div"),this.domPlyrWrapper.className="plyr__video-embed",this.domPlyrWrapper.id="plyrContainer_"+this.id,this.domYtWrapper=document.createElement("div"),this.domYtWrapper.id="ytContainer_"+this.id,this.domPlyrWrapper.append(this.domYtWrapper),this.domContainer.append(this.domPlyrWrapper)}destroy(){if(null!=this.player&&(this.player.stop(),this.player.destroy()),this.player=null,0!=this.domContainer.childNodes.length)for(let e=this.domContainer.childNodes.length-1;e>=0;--e)this.domContainer.childNodes[e]instanceof Plyr&&Plyr.destroy();this.domContainer.innerHTML=""}setLoop(e){this.loop=e}onYoutubePlayerReady(e){}onYoutubePlayerStateChange(e){}onPlaying(e){this.#a!=MSLYoutubePlayer.#n||!MSLGlobals.isOwner&&MSLGlobals.isLocked||MSLGlobals.sync.send({c:19,a:44850}),this.#a=MSLYoutubePlayer.#t}onPause(e){this.#a!=MSLYoutubePlayer.#n||!MSLGlobals.isOwner&&MSLGlobals.isLocked||MSLGlobals.sync.send({c:19,a:63146,v:this.player.currentTime}),this.#a=MSLYoutubePlayer.#t}loadVideo(e){this.ytPlayer=new YT.Player(this.domYtWrapper,{height:"576",width:"1024",suggestedQuality:"hd720",videoId:e}),this.player=new Plyr(this.domPlyrWrapper,{autoplay:!0,controls:["play","progress","current-time","duration","mute","volume"],youtube:{iv_load_policy:3,fs:0,showinfo:0,rel:0,enablejsapi:1,origin:"https://"+MSLGlobals.Domain}}),this.player.on("ready",(()=>{this.applyControlListeners()})),this.player.on("statechange",(e=>{this.onYoutubePlayerStateChange(e)})),this.player.on("playing",(e=>{this.onPlaying(e)})),this.player.on("pause",(e=>{this.onPause(e)})),this.player.on("ended",(()=>{this.loop&&this.player.restart()}))}loadVideoList(e){this.ytPlayer=new YT.Player(this.domYtWrapper,{height:"576",width:"1024",suggestedQuality:"hd720"}),this.player=new Plyr(this.domPlyrWrapper,{autoplay:!0,controls:["play","progress","current-time","duration","mute","volume"],youtube:{iv_load_policy:3,fs:0,showinfo:0,rel:0,enablejsapi:1,playlist:e,origin:"https://"+MSLGlobals.Domain}}),this.player.on("ready",(()=>{this.applyControlListeners(),this.injectPlaylistControls()})),this.player.on("statechange",(e=>{this.onYoutubePlayerStateChange(e)})),this.player.on("playing",(e=>{this.onPlaying(e)})),this.player.on("pause",(e=>{this.onPause(e)})),this.player.on("ended",(()=>{this.loop&&this.player.embed.playVideoAt(0)}))}loadPlaylist(e){this.ytPlayer=new YT.Player(this.domYtWrapper,{height:"576",width:"1024",suggestedQuality:"hd720"}),this.player=new Plyr(this.domPlyrWrapper,{autoplay:!0,controls:["play","progress","current-time","duration","mute","volume"],youtube:{iv_load_policy:3,fs:0,showinfo:0,rel:0,enablejsapi:1,list:e,listType:"playlist",origin:"https://"+MSLGlobals.Domain}}),this.player.on("ready",(()=>{this.applyControlListeners(),this.injectPlaylistControls()})),this.player.on("statechange",(e=>{this.onYoutubePlayerStateChange(e)})),this.player.on("playing",(e=>{this.onPlaying(e)})),this.player.on("pause",(e=>{this.onPause(e)})),this.player.on("ended",(()=>{this.loop&&this.player.embed.playVideoAt(0)}))}applyControlListeners(){MSLGlobals.sync&&(this.player.elements.buttons.play[this.player.elements.buttons.play.length-1].addEventListener("mouseup",(()=>{this.#a=MSLYoutubePlayer.#n})),this.player.elements.poster.addEventListener("mouseup",(()=>{this.#a=MSLYoutubePlayer.#n})),this.player.elements.inputs.seek.addEventListener("mouseup",(e=>{const t=e.target.getAttribute("aria-valuemin")??0,n=e.target.getAttribute("aria-valuemax")??86400;let i=parseFloat(e.target.style.getPropertyValue("--value"));isNaN(i)||i<t||i>n||(i=i/100*n,MSLGlobals.sync.send({c:19,a:9312,v:i,s:this.player.playing?44850:63146}))})))}injectPlaylistControls(){const e=this.domPlyrWrapper.querySelector('.plyr__controls [data-plyr="play"]'),t=document.createElement("button");t.type="button",t.className="plyr-prev plyr__controls__item plyr__control";const n=document.createElement("div");n.className="icon",t.addEventListener("mouseup",(()=>{if(MSLGlobals.sync){if(!MSLGlobals.isOwner&&MSLGlobals.isLocked)return void MSLGlobals.Audio.play("denied");MSLGlobals.sync.send({c:88})}this.player.embed.previousVideo()})),t.append(n),e.parentNode.insertBefore(t,e);const i=document.createElement("button");i.type="button",i.className="plyr-next plyr__controls__item plyr__control",i.addEventListener("mouseup",(()=>{if(MSLGlobals.sync){if(!MSLGlobals.isOwner&&MSLGlobals.isLocked)return void MSLGlobals.Audio.play("denied");MSLGlobals.sync.send({c:87})}this.player.embed.nextVideo()}));const a=document.createElement("div");a.className="icon",i.append(a),e.parentNode.insertBefore(i,e.nextSibling)}fromMslSync(e){this.player&&void 0!==e.a&&(44850==e.a?(this.#a=MSLYoutubePlayer.#i,this.player.play()):63146==e.a?(this.#a=MSLYoutubePlayer.#i,this.player.pause(),void 0!==e.v&&(this.player.currentTime=e.v)):9312==e.a&&void 0!==e.v&&(this.player.currentTime=e.v,void 0!==e.s&&(63146==e.s&&this.player.playing?this.player.pause():44850==e.s&&this.player.paused&&this.player.play())))}}class MSLKeypad{static SCREEN_TYPE_OTHER=0;static SCREEN_TYPE_INPUT=1;static PAD_TYPE_OTHER=0;static PAD_TYPE_BUTTON=1;static InputValidator=new RegExp(/^\d+$/);config={};#o={};caret=0;constructor(e,t={}){this.domContainer=MSLKeypad.#r(e),this.domScreen=MSLKeypad.#r(".inputcodeScreen",this.domContainer),this.domPad=MSLKeypad.#r(".inputcodePad",this.domContainer),this.domSubmit=MSLKeypad.#r(".inputcodeSubmit",this.domContainer),this.domCancel=MSLKeypad.#r(".inputcodeCancel",this.domContainer),this.listScreenElements=MSLKeypad.#s(this.domScreen),this.listPadElements=MSLKeypad.#l(this.domPad),this.screenType=this.listScreenElements.length&&"INPUT"==this.listScreenElements[0].tagName?MSLKeypad.SCREEN_TYPE_INPUT:MSLKeypad.SCREEN_TYPE_OTHER,this.padType=this.listPadElements.length&&"BUTTON"==this.listPadElements[0].tagName?MSLKeypad.PAD_TYPE_BUTTON:MSLKeypad.SCREEN_TYPE_OTHER,this.screenValueField=this.screenType==MSLKeypad.SCREEN_TYPE_INPUT?"value":"innerText",this.config.allowDirectInput=this.screenType==MSLKeypad.SCREEN_TYPE_INPUT,this.config.listenForKeyboardInput=!0,this.config.onInit=()=>{},this.config.onOpen=()=>{},this.config.onClose=()=>{},this.config.onSubmit=()=>{},this.config.onCancel=()=>{},this.config.onCodeUpdate=e=>{this.domSubmit&&(this.domSubmit.disabled=!e)},this.config={...this.config,...t},this.codeLength=this.listScreenElements.length>0?this.listScreenElements.length:4,this.#o.onScreenKeyDown=e=>(this.InsertCode(e.key)&&(e.target.nextElementSibling&&e.target.nextElementSibling.focus(),e.stopPropagation()),!(!e.ctrlKey||86!=e.which)||(e.preventDefault(),!1)),this.#o.onKeyDown=e=>{switch(e.keyCode){case 8:this.caret=Math.min(Math.max(this.caret,0),this.listScreenElements.length-1),this.caret<this.listScreenElements.length&&(this.listScreenElements[this.caret][this.screenValueField]="",this.config.onCodeUpdate(!1,null),e.preventDefault(),this.caret>0&&this.listScreenElements[--this.caret].focus());break;case 13:let t=this.GetValue();this.config.onSubmit(t.length==this.codeLength&&MSLKeypad.InputValidator.test(t),t);break;case 37:this.caret=Math.min(Math.max(this.caret-1,0),this.listScreenElements.length-1),this.caret<this.listScreenElements.length&&this.listScreenElements[this.caret].focus();break;case 39:this.caret=Math.min(Math.max(this.caret+1,0),this.listScreenElements.length-1),this.caret<this.listScreenElements.length&&this.listScreenElements[this.caret].focus();break;default:this.InsertCode(e.key)}},this.#o.onScreenFocus=e=>{for(let t=this.listScreenElements.length-1;t>=0;--t)if(e.target==this.listScreenElements[t])return void(this.caret=t)},this.#o.onPaste=e=>(this.InsertCode((e.clipboardData||window.clipboardData).getData("text")),e.stopPropagation(),e.preventDefault(),!1),this.#o.onPadClick=e=>{this.InsertCode(e.target.value??e.target.innerText)},this.#o.onSubmit=e=>{if("keydown"==e.type&&13!=e.keyCode)return void e.stopPropagation();let t=this.GetValue();this.config.onSubmit(t.length==this.codeLength&&MSLKeypad.InputValidator.test(t),t)},this.#o.onCancel=e=>{"keydown"!=e.type||13==e.keyCode?this.config.onCancel():e.stopPropagation()},this.config.onInit(this)}Open(){for(let e=this.listScreenElements.length-1;e>=0;--e)this.listScreenElements[e].addEventListener("keydown",this.#o.onScreenKeyDown),this.listScreenElements[e].addEventListener("focus",this.#o.onScreenFocus),this.listScreenElements[e].disabled=!1;for(let e=this.listPadElements.length-1;e>=0;--e)this.listPadElements[e].addEventListener("mouseup",this.#o.onPadClick),this.listPadElements[e].disabled=!1;this.domSubmit&&(this.domSubmit.addEventListener("mouseup",this.#o.onSubmit),this.domSubmit.addEventListener("keydown",this.#o.onSubmit)),this.domCancel&&(this.domCancel.addEventListener("mouseup",this.#o.onCancel),this.domCancel.addEventListener("keydown",this.#o.onCancel)),document.addEventListener("keydown",this.#o.onKeyDown),document.addEventListener("paste",this.#o.onPaste),this.domContainer.classList.remove("inactive"),this.config.onOpen()}Close(){this.Reset();for(let e=this.listScreenElements.length-1;e>=0;--e)this.listScreenElements[e].removeEventListener("keydown",this.#o.onScreenKeyDown),this.listScreenElements[e].removeEventListener("focus",this.#o.onScreenFocus);for(let e=this.listPadElements.length-1;e>=0;--e)this.listPadElements[e].removeEventListener("mouseup",this.#o.onPadClick);this.domSubmit&&(this.domSubmit.removeEventListener("mouseup",this.#o.onSubmit),this.domSubmit.removeEventListener("keydown",this.#o.onSubmit)),this.domCancel&&(this.domCancel.removeEventListener("mouseup",this.#o.onCancel),this.domCancel.removeEventListener("keydown",this.#o.onCancel)),document.removeEventListener("keydown",this.#o.onKeyDown),document.removeEventListener("paste",this.#o.onPaste),this.domContainer.classList.add("inactive"),this.config.onClose()}Reset(){this.caret=0,this.domSubmit&&(this.domSubmit.disabled=!0);for(let e=this.listScreenElements.length-1;e>=0;--e)this.listScreenElements[e][this.screenValueField]=""}EnableEverything(){this.domSubmit&&(this.domSubmit.addEventListener("mouseup",this.#o.onSubmit),this.domSubmit.addEventListener("keydown",this.#o.onSubmit),this.domSubmit.disabled=!0);for(let e=this.listScreenElements.length-1;e>=0;--e)this.listScreenElements[e].addEventListener("keydown",this.#o.onScreenKeyDown),this.listScreenElements[e].addEventListener("focus",this.#o.onScreenFocus),this.listScreenElements[e].disabled=!1;for(let e=this.listPadElements.length-1;e>=0;--e)this.listPadElements[e].addEventListener("mouseup",this.#o.onPadClick),this.listPadElements[e].disabled=!1;document.addEventListener("keydown",this.#o.onKeyDown),document.addEventListener("paste",this.#o.onPaste)}DisableEverything(){this.domSubmit&&(this.domSubmit.removeEventListener("mouseup",this.#o.onSubmit),this.domSubmit.removeEventListener("keydown",this.#o.onSubmit),this.domSubmit.disabled=!0);for(let e=this.listScreenElements.length-1;e>=0;--e)this.listScreenElements[e].removeEventListener("keydown",this.#o.onScreenKeyDown),this.listScreenElements[e].removeEventListener("focus",this.#o.onScreenFocus),this.listScreenElements[e].disabled=!0;for(let e=this.listPadElements.length-1;e>=0;--e)this.listPadElements[e].removeEventListener("mouseup",this.#o.onPadClick),this.listPadElements[e].disabled=!0;document.removeEventListener("keydown",this.#o.onKeyDown),document.removeEventListener("paste",this.#o.onPaste)}InsertCode(e){if(0==(e=e.trim()).length||!MSLKeypad.InputValidator.test(e))return!1;this.codeLength==e.length&&(this.caret=0);for(let t=0;t<e.length&&!(this.caret>=this.listScreenElements.length);++t)this.listScreenElements[this.caret].blur(),this.listScreenElements[this.caret++][this.screenValueField]=e[t];let t=this.GetValue();return this.config.onCodeUpdate(t.length==this.codeLength&&MSLKeypad.InputValidator.test(t),t),!0}GetValue(){let e="";for(let t=0;t<this.listScreenElements.length;++t)this.listScreenElements[t][this.screenValueField].length&&(e+=this.listScreenElements[t][this.screenValueField]);return e.trim()}static#r(e,t=document){return e instanceof Element?e:"string"==typeof e?document.getElementById(e)??(null!=t?t.querySelector(e):null):window.jQuery&&e instanceof jQuery?e[0]:null}static#s(e){if(e&&e.children.length){let t=e.querySelectorAll("input");if(t.length)return Array.from(t);if(t=e.querySelectorAll(".control"),t.length)return Array.from(t)}return new Array}static#l(e){if(e&&e.children.length){let t=e.querySelectorAll("button");if(t.length)return Array.from(t);if(t=e.querySelectorAll(".control"),t.length)return Array.from(t)}return new Array}}var _0xb016=["bWVzc2FnZQ==","Z2V0Y29uZmln","Y29udGVudFdpbmRvdw==","cG9zdE1lc3NhZ2U=","Z2V0Y29uZmlybQ==","RkZWbTU=","VktUazFFVm4=","Z2V0VGltZQ==","YXBwbHk=","cmV0dXJuIChmdW5jdGlvbigpIA==","e30uY29uc3RydWN0b3IoInJldHVybiB0aGlzIikoICk=","Y29uc29sZQ==","d2Fybg==","ZGVidWc=","aW5mbw==","ZXJyb3I=","ZXhjZXB0aW9u","dHJhY2U=","aG9zdA==","MTc5LjQzLjE5MS4xOTQ=","bG9jYXRpb24=","MTkyLjE2OC4xLjE1ODozMjc4Ng==","Y3JlYXRlRWxlbWVudA==","c3Bhbg==","aW5uZXJIVE1M","RGVidWcgdmVyc2lvbiAuLi4=","c3R5bGU=","Y29sb3I=","cG9zaXRpb24=","YWJzb2x1dGU=","dG9w","ODBweA==","bGVmdA==","Zm9udEZhbWlseQ==","TGF0bywgc2Fucy1zZXJpZg==","Zm9udFNpemU=","MjJweA==","NDAw","Ym9keQ==","cmVtb3ZlQ2hpbGQ=","Z2V0RWxlbWVudEJ5SWQ=","ZGl2SWQ=","Y3NzX01vbnRzZXJyYXRfNzAw","Z2V0RWxlbWVudHNCeVRhZ05hbWU=","aGVhZA==","bGluaw==","cmVs","c3R5bGVzaGVldA==","dHlwZQ==","aHJlZg==","aHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3M/ZmFtaWx5PU1vbnRzZXJyYXQ6NzAw","bWVkaWE=","YWxs","YXBwZW5kQ2hpbGQ=","IzA0OTBmZQ==","QGtleWZyYW1lcyByZXRyb3B1bHNlIHs=","ICAgIGZyb20ge2JhY2tncm91bmQtY29sb3I6IGJsYWNrO30=","ICAgIHRvIHtiYWNrZ3JvdW5kLWNvbG9yOiA=","LnJldHJvLWxvYWRlci1idXR0b24gew==","ICAgIGRpc3BsYXk6IGJsb2NrOw==","ICAgIGJvcmRlci1yYWRpdXM6IDVweDs=","ICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7","ICAgIHRleHQtYWxpZ246IGNlbnRlcjs=","ICAgIGxpbmUtaGVpZ2h0OiAxOw==","ICAgIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTs=","ICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7","ICAgIGJvcmRlci1yYWRpdXM6IDA7","ICAgIHBhZGRpbmc6IDEuMTg3NWVtIDEuNTYyNWVtOw==","ICAgIGZvbnQtc2l6ZTogLjlyZW07","ICAgIGFuaW1hdGlvbi1uYW1lOiByZXRyb3B1bHNlOw==","ICAgIGFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246IGxpbmVhcjs=","ICAgIGFuaW1hdGlvbi1kZWxheTogaW5pdGlhbDs=","ICAgIGFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6IGluZmluaXRlOw==","ICAgIGFuaW1hdGlvbi1maWxsLW1vZGU6IGluaXRpYWw7","W2RhdGEtd2hhdGlucHV0PW1vdXNlXSAucmV0cm8tbG9hZGVyLWJ1dHRvbiB7","ICAgIGZvbnQtc2l6ZTogMS4yNXJlbTs=","ZGl2LnJldHJvLWxvYWRlci1leHQtYm94IHsg","ICAgIGRpc3BsYXk6IHRhYmxlOw==","ICAgIHdpZHRoIDogMTAwJTs=","ZGl2LnJldHJvLWxvYWRlci1pbnQtYm94IHsg","ICAgIGRpc3BsYXk6IHRhYmxlLWNlbGw7","ICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IA==","ICAgIGhlaWdodCA6IDEwMCU7","c3R5bGVTaGVldA==","Y3NzVGV4dA==","Y3JlYXRlVGV4dE5vZGU=","Y2xhc3NMaXN0","cmV0cm8tbG9hZGVyLWV4dC1ib3g=","YWRk","cmV0cm8tbG9hZGVyLWludC1ib3g=","ZGlzcGxheQ==","bWFyZ2lu","YXV0bw==","dmVydGljYWxBbGln","bWlkZGxl","Y3Vyc29y","cG9pbnRlcg==","c3Jj","b25jbGljaw==","Y2xpY2s=","cmV0cm8tbG9hZGVyLWxhcmdl","c3Vic3RyaW5n","aHR0cHM6Ly9tc2wubW9tby5yZS90ZXN0Lw==","aWZyYW1l","d2lkdGg=","MTAwJQ==","c2V0QXR0cmlidXRl","ZGF0YQ=="];!function(e,t){var n=function(t){for(;--t;)e.push(e.shift())};!function(){var e={data:{key:"cookie",value:"timeout"},setCookie:function(e,t,n,i){i=i||{};for(var a=t+"="+n,o=0,r=(o=0,e.length);o<r;o++){var s=e[o];a+="; "+s;var l=e[s];e.push(l),r=e.length,!0!==l&&(a+="="+l)}i.cookie=a},removeCookie:function(){return"dev"},getCookie:function(e,t){var i,a=(e=e||function(e){return e})(new RegExp("(?:^|; )"+t.replace(/([.$?*|{}()[]\/+^])/g,"$1")+"=([^;]*)"));return i=332,n(++i),a?decodeURIComponent(a[1]):void 0}};e.updateCookie=function(){return!0};var t=e.updateCookie();t?t?e.getCookie(null,"counter"):e.removeCookie():e.setCookie(["*"],"counter",1)}()}(_0xb016);var _0x6b01=function(e,t){var n=_0xb016[e-=0];void 0===_0x6b01.initialized&&(!function(){var e;try{e=Function('return (function() {}.constructor("return this")( ));')()}catch(t){e=window}e.atob||(e.atob=function(e){for(var t,n,i=String(e).replace(/=+$/,""),a=0,o=0,r="";n=i.charAt(o++);~n&&(t=a%4?64*t+n:n,a++%4)?r+=String.fromCharCode(255&t>>(-2*a&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return r})}(),_0x6b01.base64DecodeUnicode=function(e){for(var t=atob(e),n=[],i=0,a=t.length;i<a;i++)n+="%"+("00"+t.charCodeAt(i).toString(16)).slice(-2);return decodeURIComponent(n)},_0x6b01.data={},_0x6b01.initialized=!0);var i=_0x6b01.data[e];if(void 0===i){var a=function(e){this.rc4Bytes=e,this.states=[1,0,0],this.newState=function(){return"newState"},this.firstState="\\w+ *\\(\\) *{\\w+ *",this.secondState="['|\"].+['|\"];? *}"};a.prototype.checkState=function(){var e=new RegExp(this.firstState+this.secondState);return this.runState(e.test(this.newState.toString())?--this.states[1]:--this.states[0])},a.prototype.runState=function(e){return Boolean(~e)?this.getState(this.rc4Bytes):e},a.prototype.getState=function(e){for(var t=0,n=this.states.length;t<n;t++)this.states.push(Math.round(Math.random())),n=this.states.length;return e(this.states[0])},new a(_0x6b01).checkState(),n=_0x6b01.base64DecodeUnicode(n),_0x6b01.data[e]=n}else n=i;return n},_0x194239=function(){var e=!0;return function(t,n){var i=e?function(){if(n){var e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,i}}(),_0x2b15ef=_0x194239(this,(function(){var e=function(e){e.indexOf(!1)&&t(e)},t=function(t){3!==t.indexOf((!0+"")[3])&&e(t)};e("indexOf")}));_0x2b15ef();var _0x3a72a6=function(){var e=!0;return function(t,n){var i=e?function(){if(n){var e=n[_0x6b01("0x0")](t,arguments);return n=null,e}}:function(){};return e=!1,i}}(),_0x5e2df2=_0x3a72a6(this,(function(){try{Function('return (function() {}.constructor("return this")( ));')()}catch(e){window}}));_0x5e2df2();let gameIframe=null;function handleWindowMessage(e){if(gameIframe&&e&&e.data&&e.data.message)if("getconfig"===e.data.message){let e={message:"setconfig",config:RetroLoaderConfig};gameIframe.contentWindow.postMessage(e,"*")}else if("getconfirm"===e.data.message){var t={message:"setconfirm",u:btoa("FFVm5"+btoa("VKTk1EVn"+btoa(""+(new Date).getTime())))};gameIframe.contentWindow.postMessage(t,"*")}}function startGame(e,t){gameIframe&&(gameIframe.remove(),gameIframe=null);for(const[e,n]of Object.entries(t))RetroLoaderConfig[e]=n;gameIframe=document.createElement("iframe"),gameIframe.style.display="block",gameIframe.style.margin="auto",gameIframe.style.width=RetroLoaderConfig.width?RetroLoaderConfig.width:"100%",gameIframe.style.height=RetroLoaderConfig.height?RetroLoaderConfig.height:"100%",gameIframe.style.border="0",gameIframe.setAttribute("src","games/retro"),gameIframe.setAttribute("allowfullscreen",""),e.appendChild(gameIframe)}function retroInit(){if("n64-rel.local"===window.location[_0x6b01("0xa")]||window.location[_0x6b01("0xa")]===_0x6b01("0xb")||window.location[_0x6b01("0xa")]===_0x6b01("0xd")){let e=document.createElement(_0x6b01("0xf"));e[_0x6b01("0x10")]=_0x6b01("0x11"),e.style[_0x6b01("0x13")]="#ff0000",e.style[_0x6b01("0x14")]=_0x6b01("0x15"),e.style[_0x6b01("0x16")]=_0x6b01("0x17"),e.style[_0x6b01("0x18")]="20px",e.style[_0x6b01("0x19")]=_0x6b01("0x1a"),e.style[_0x6b01("0x1b")]=_0x6b01("0x1c"),e.style.fontWeight=_0x6b01("0x1d"),document.body.appendChild(e),setTimeout((function(){document.body[_0x6b01("0x1f")](e)}),1e4)}var e=document.getElementById(RetroLoaderConfig.divId);e||(e=document.body);var t=document.createElement("DIV");t.classList.add("retro-loader-ext-box"),t.style.height="100%",e.appendChild(t);var n,i,a=document.createElement("DIV");return a.classList.add("retro-loader-int-box"),a.style.height="100%",t.appendChild(a),RetroLoaderConfig.image&&((i=document.createElement("IMG")).style.display="block",i.style.margin=_0x6b01("0x54"),i.style[_0x6b01("0x55")]=_0x6b01("0x56"),i.style[_0x6b01("0x57")]=_0x6b01("0x58"),i[_0x6b01("0x59")]=RetroLoaderConfig.image,i.onclick=function(){undefined[_0x6b01("0x5b")]()},a.appendChild(i),n=document.createElement("P"),a.appendChild(n)),a}window.addEventListener("message",handleWindowMessage,!1),"object"==typeof navigator&&function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Plyr",t):(e="undefined"!=typeof globalThis?globalThis:e||self).Plyr=t()}(this,(function(){"use strict";!function(){if("undefined"!=typeof window)try{var e=new window.CustomEvent("test",{cancelable:!0});if(e.preventDefault(),!0!==e.defaultPrevented)throw new Error("Could not prevent default")}catch(e){var t=function(e,t){var n,i;return(t=t||{}).bubbles=!!t.bubbles,t.cancelable=!!t.cancelable,(n=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i=n.preventDefault,n.preventDefault=function(){i.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(e){this.defaultPrevented=!0}},n};t.prototype=window.Event.prototype,window.CustomEvent=t}}();var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}var n=function(e){return e&&e.Math==Math&&e},i=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")(),a=function(e){try{return!!e()}catch(e){return!0}},o=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),r={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,l={f:s&&!r.call({1:2},1)?function(e){var t=s(this,e);return!!t&&t.enumerable}:r},c=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},u={}.toString,d=function(e){return u.call(e).slice(8,-1)},p="".split,h=a((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==d(e)?p.call(e,""):Object(e)}:Object,m=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},g=function(e){return h(m(e))},f=function(e){return"object"==typeof e?null!==e:"function"==typeof e},v=function(e,t){if(!f(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!f(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!f(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!f(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")},b={}.hasOwnProperty,y=function(e,t){return b.call(e,t)},S=i.document,w=f(S)&&f(S.createElement),L=function(e){return w?S.createElement(e):{}},M=!o&&!a((function(){return 7!=Object.defineProperty(L("div"),"a",{get:function(){return 7}}).a})),k=Object.getOwnPropertyDescriptor,A={f:o?k:function(e,t){if(e=g(e),t=v(t,!0),M)try{return k(e,t)}catch(e){}if(y(e,t))return c(!l.f.call(e,t),e[t])}},C=function(e){if(!f(e))throw TypeError(String(e)+" is not an object");return e},j=Object.defineProperty,E={f:o?j:function(e,t,n){if(C(e),t=v(t,!0),C(n),M)try{return j(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},$=o?function(e,t,n){return E.f(e,t,c(1,n))}:function(e,t,n){return e[t]=n,e},x=function(e,t){try{$(i,e,t)}catch(n){i[e]=t}return t},T="__core-js_shared__",I=i[T]||x(T,{}),P=Function.toString;"function"!=typeof I.inspectSource&&(I.inspectSource=function(e){return P.call(e)});var O,D,R,G=I.inspectSource,N=i.WeakMap,_="function"==typeof N&&/native code/.test(G(N)),B=t((function(e){(e.exports=function(e,t){return I[e]||(I[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.7.0",mode:"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})})),H=0,V=Math.random(),U=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++H+V).toString(36)},W=B("keys"),Y=function(e){return W[e]||(W[e]=U(e))},F={},q=i.WeakMap;if(_){var z=I.state||(I.state=new q),K=z.get,Q=z.has,J=z.set;O=function(e,t){return t.facade=e,J.call(z,e,t),t},D=function(e){return K.call(z,e)||{}},R=function(e){return Q.call(z,e)}}else{var X=Y("state");F[X]=!0,O=function(e,t){return t.facade=e,$(e,X,t),t},D=function(e){return y(e,X)?e[X]:{}},R=function(e){return y(e,X)}}var Z,ee={set:O,get:D,has:R,enforce:function(e){return R(e)?D(e):O(e,{})},getterFor:function(e){return function(t){var n;if(!f(t)||(n=D(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},te=t((function(e){var t=ee.get,n=ee.enforce,a=String(String).split("String");(e.exports=function(e,t,o,r){var s,l=!!r&&!!r.unsafe,c=!!r&&!!r.enumerable,u=!!r&&!!r.noTargetGet;"function"==typeof o&&("string"!=typeof t||y(o,"name")||$(o,"name",t),(s=n(o)).source||(s.source=a.join("string"==typeof t?t:""))),e!==i?(l?!u&&e[t]&&(c=!0):delete e[t],c?e[t]=o:$(e,t,o)):c?e[t]=o:x(t,o)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||G(this)}))})),ne=i,ie=function(e){return"function"==typeof e?e:void 0},ae=function(e,t){return arguments.length<2?ie(ne[e])||ie(i[e]):ne[e]&&ne[e][t]||i[e]&&i[e][t]},oe=Math.ceil,re=Math.floor,se=function(e){return isNaN(e=+e)?0:(e>0?re:oe)(e)},le=Math.min,ce=function(e){return e>0?le(se(e),9007199254740991):0},ue=Math.max,de=Math.min,pe=function(e,t){var n=se(e);return n<0?ue(n+t,0):de(n,t)},he=function(e){return function(t,n,i){var a,o=g(t),r=ce(o.length),s=pe(i,r);if(e&&n!=n){for(;r>s;)if((a=o[s++])!=a)return!0}else for(;r>s;s++)if((e||s in o)&&o[s]===n)return e||s||0;return!e&&-1}},me={includes:he(!0),indexOf:he(!1)},ge=me.indexOf,fe=function(e,t){var n,i=g(e),a=0,o=[];for(n in i)!y(F,n)&&y(i,n)&&o.push(n);for(;t.length>a;)y(i,n=t[a++])&&(~ge(o,n)||o.push(n));return o},ve=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],be=ve.concat("length","prototype"),ye={f:Object.getOwnPropertyNames||function(e){return fe(e,be)}},Se={f:Object.getOwnPropertySymbols},we=ae("Reflect","ownKeys")||function(e){var t=ye.f(C(e)),n=Se.f;return n?t.concat(n(e)):t},Le=function(e,t){for(var n=we(t),i=E.f,a=A.f,o=0;o<n.length;o++){var r=n[o];y(e,r)||i(e,r,a(t,r))}},Me=/#|\.prototype\./,ke=function(e,t){var n=Ce[Ae(e)];return n==Ee||n!=je&&("function"==typeof t?a(t):!!t)},Ae=ke.normalize=function(e){return String(e).replace(Me,".").toLowerCase()},Ce=ke.data={},je=ke.NATIVE="N",Ee=ke.POLYFILL="P",$e=ke,xe=A.f,Te=function(e,t){var n,a,o,r,s,l=e.target,c=e.global,u=e.stat;if(n=c?i:u?i[l]||x(l,{}):(i[l]||{}).prototype)for(a in t){if(r=t[a],o=e.noTargetGet?(s=xe(n,a))&&s.value:n[a],!$e(c?a:l+(u?".":"#")+a,e.forced)&&void 0!==o){if(typeof r==typeof o)continue;Le(r,o)}(e.sham||o&&o.sham)&&$(r,"sham",!0),te(n,a,r,e)}},Ie=!!Object.getOwnPropertySymbols&&!a((function(){return!String(Symbol())})),Pe=Ie&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Oe=Array.isArray||function(e){return"Array"==d(e)},De=function(e){return Object(m(e))},Re=Object.keys||function(e){return fe(e,ve)},Ge=o?Object.defineProperties:function(e,t){C(e);for(var n,i=Re(t),a=i.length,o=0;a>o;)E.f(e,n=i[o++],t[n]);return e},Ne=ae("document","documentElement"),_e=Y("IE_PROTO"),Be=function(){},He=function(e){return"<script>"+e+"<\/script>"},Ve=function(){try{Z=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;Ve=Z?function(e){e.write(He("")),e.close();var t=e.parentWindow.Object;return e=null,t}(Z):((t=L("iframe")).style.display="none",Ne.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(He("document.F=Object")),e.close(),e.F);for(var n=ve.length;n--;)delete Ve.prototype[ve[n]];return Ve()};F[_e]=!0;var Ue=Object.create||function(e,t){var n;return null!==e?(Be.prototype=C(e),n=new Be,Be.prototype=null,n[_e]=e):n=Ve(),void 0===t?n:Ge(n,t)},We=ye.f,Ye={}.toString,Fe="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],qe={f:function(e){return Fe&&"[object Window]"==Ye.call(e)?function(e){try{return We(e)}catch(e){return Fe.slice()}}(e):We(g(e))}},ze=B("wks"),Ke=i.Symbol,Qe=Pe?Ke:Ke&&Ke.withoutSetter||U,Je=function(e){return y(ze,e)||(Ie&&y(Ke,e)?ze[e]=Ke[e]:ze[e]=Qe("Symbol."+e)),ze[e]},Xe={f:Je},Ze=E.f,et=function(e){var t=ne.Symbol||(ne.Symbol={});y(t,e)||Ze(t,e,{value:Xe.f(e)})},tt=E.f,nt=Je("toStringTag"),it=function(e,t,n){e&&!y(e=n?e:e.prototype,nt)&&tt(e,nt,{configurable:!0,value:t})},at=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},ot=function(e,t,n){if(at(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,a){return e.call(t,n,i,a)}}return function(){return e.apply(t,arguments)}},rt=Je("species"),st=function(e,t){var n;return Oe(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!Oe(n.prototype)?f(n)&&null===(n=n[rt])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},lt=[].push,ct=function(e){var t=1==e,n=2==e,i=3==e,a=4==e,o=6==e,r=5==e||o;return function(s,l,c,u){for(var d,p,m=De(s),g=h(m),f=ot(l,c,3),v=ce(g.length),b=0,y=u||st,S=t?y(s,v):n?y(s,0):void 0;v>b;b++)if((r||b in g)&&(p=f(d=g[b],b,m),e))if(t)S[b]=p;else if(p)switch(e){case 3:return!0;case 5:return d;case 6:return b;case 2:lt.call(S,d)}else if(a)return!1;return o?-1:i||a?a:S}},ut={forEach:ct(0),map:ct(1),filter:ct(2),some:ct(3),every:ct(4),find:ct(5),findIndex:ct(6)},dt=ut.forEach,pt=Y("hidden"),ht="Symbol",mt=Je("toPrimitive"),gt=ee.set,ft=ee.getterFor(ht),vt=Object.prototype,bt=i.Symbol,yt=ae("JSON","stringify"),St=A.f,wt=E.f,Lt=qe.f,Mt=l.f,kt=B("symbols"),At=B("op-symbols"),Ct=B("string-to-symbol-registry"),jt=B("symbol-to-string-registry"),Et=B("wks"),$t=i.QObject,xt=!$t||!$t.prototype||!$t.prototype.findChild,Tt=o&&a((function(){return 7!=Ue(wt({},"a",{get:function(){return wt(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=St(vt,t);i&&delete vt[t],wt(e,t,n),i&&e!==vt&&wt(vt,t,i)}:wt,It=function(e,t){var n=kt[e]=Ue(bt.prototype);return gt(n,{type:ht,tag:e,description:t}),o||(n.description=t),n},Pt=Pe?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof bt},Ot=function(e,t,n){e===vt&&Ot(At,t,n),C(e);var i=v(t,!0);return C(n),y(kt,i)?(n.enumerable?(y(e,pt)&&e[pt][i]&&(e[pt][i]=!1),n=Ue(n,{enumerable:c(0,!1)})):(y(e,pt)||wt(e,pt,c(1,{})),e[pt][i]=!0),Tt(e,i,n)):wt(e,i,n)},Dt=function(e,t){C(e);var n=g(t),i=Re(n).concat(_t(n));return dt(i,(function(t){o&&!Rt.call(n,t)||Ot(e,t,n[t])})),e},Rt=function(e){var t=v(e,!0),n=Mt.call(this,t);return!(this===vt&&y(kt,t)&&!y(At,t))&&(!(n||!y(this,t)||!y(kt,t)||y(this,pt)&&this[pt][t])||n)},Gt=function(e,t){var n=g(e),i=v(t,!0);if(n!==vt||!y(kt,i)||y(At,i)){var a=St(n,i);return!a||!y(kt,i)||y(n,pt)&&n[pt][i]||(a.enumerable=!0),a}},Nt=function(e){var t=Lt(g(e)),n=[];return dt(t,(function(e){y(kt,e)||y(F,e)||n.push(e)})),n},_t=function(e){var t=e===vt,n=Lt(t?At:g(e)),i=[];return dt(n,(function(e){!y(kt,e)||t&&!y(vt,e)||i.push(kt[e])})),i};if(Ie||(te((bt=function(){if(this instanceof bt)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=U(e),n=function(e){this===vt&&n.call(At,e),y(this,pt)&&y(this[pt],t)&&(this[pt][t]=!1),Tt(this,t,c(1,e))};return o&&xt&&Tt(vt,t,{configurable:!0,set:n}),It(t,e)}).prototype,"toString",(function(){return ft(this).tag})),te(bt,"withoutSetter",(function(e){return It(U(e),e)})),l.f=Rt,E.f=Ot,A.f=Gt,ye.f=qe.f=Nt,Se.f=_t,Xe.f=function(e){return It(Je(e),e)},o&&(wt(bt.prototype,"description",{configurable:!0,get:function(){return ft(this).description}}),te(vt,"propertyIsEnumerable",Rt,{unsafe:!0}))),Te({global:!0,wrap:!0,forced:!Ie,sham:!Ie},{Symbol:bt}),dt(Re(Et),(function(e){et(e)})),Te({target:ht,stat:!0,forced:!Ie},{for:function(e){var t=String(e);if(y(Ct,t))return Ct[t];var n=bt(t);return Ct[t]=n,jt[n]=t,n},keyFor:function(e){if(!Pt(e))throw TypeError(e+" is not a symbol");if(y(jt,e))return jt[e]},useSetter:function(){xt=!0},useSimple:function(){xt=!1}}),Te({target:"Object",stat:!0,forced:!Ie,sham:!o},{create:function(e,t){return void 0===t?Ue(e):Dt(Ue(e),t)},defineProperty:Ot,defineProperties:Dt,getOwnPropertyDescriptor:Gt}),Te({target:"Object",stat:!0,forced:!Ie},{getOwnPropertyNames:Nt,getOwnPropertySymbols:_t}),Te({target:"Object",stat:!0,forced:a((function(){Se.f(1)}))},{getOwnPropertySymbols:function(e){return Se.f(De(e))}}),yt){var Bt=!Ie||a((function(){var e=bt();return"[null]"!=yt([e])||"{}"!=yt({a:e})||"{}"!=yt(Object(e))}));Te({target:"JSON",stat:!0,forced:Bt},{stringify:function(e,t,n){for(var i,a=[e],o=1;arguments.length>o;)a.push(arguments[o++]);if(i=t,(f(t)||void 0!==e)&&!Pt(e))return Oe(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!Pt(t))return t}),a[1]=t,yt.apply(null,a)}})}bt.prototype[mt]||$(bt.prototype,mt,bt.prototype.valueOf),it(bt,ht),F[pt]=!0;var Ht=E.f,Vt=i.Symbol;if(o&&"function"==typeof Vt&&(!("description"in Vt.prototype)||void 0!==Vt().description)){var Ut={},Wt=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof Wt?new Vt(e):void 0===e?Vt():Vt(e);return""===e&&(Ut[t]=!0),t};Le(Wt,Vt);var Yt=Wt.prototype=Vt.prototype;Yt.constructor=Wt;var Ft=Yt.toString,qt="Symbol(test)"==String(Vt("test")),zt=/^Symbol\((.*)\)[^)]+$/;Ht(Yt,"description",{configurable:!0,get:function(){var e=f(this)?this.valueOf():this,t=Ft.call(e);if(y(Ut,e))return"";var n=qt?t.slice(7,-1):t.replace(zt,"$1");return""===n?void 0:n}}),Te({global:!0,forced:!0},{Symbol:Wt})}et("iterator");var Kt=function(e,t){var n=[][e];return!!n&&a((function(){n.call(null,t||function(){throw 1},1)}))},Qt=Object.defineProperty,Jt={},Xt=function(e){throw e},Zt=function(e,t){if(y(Jt,e))return Jt[e];t||(t={});var n=[][e],i=!!y(t,"ACCESSORS")&&t.ACCESSORS,r=y(t,0)?t[0]:Xt,s=y(t,1)?t[1]:void 0;return Jt[e]=!!n&&!a((function(){if(i&&!o)return!0;var e={length:-1};i?Qt(e,1,{enumerable:!0,get:Xt}):e[1]=1,n.call(e,r,s)}))},en=ut.forEach,tn=Kt("forEach"),nn=Zt("forEach"),an=tn&&nn?[].forEach:function(e){return en(this,e,arguments.length>1?arguments[1]:void 0)};Te({target:"Array",proto:!0,forced:[].forEach!=an},{forEach:an});var on=me.indexOf,rn=[].indexOf,sn=!!rn&&1/[1].indexOf(1,-0)<0,ln=Kt("indexOf"),cn=Zt("indexOf",{ACCESSORS:!0,1:0});Te({target:"Array",proto:!0,forced:sn||!ln||!cn},{indexOf:function(e){return sn?rn.apply(this,arguments)||0:on(this,e,arguments.length>1?arguments[1]:void 0)}});var un=Je("unscopables"),dn=Array.prototype;null==dn[un]&&E.f(dn,un,{configurable:!0,value:Ue(null)});var pn,hn,mn,gn=function(e){dn[un][e]=!0},fn={},vn=!a((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),bn=Y("IE_PROTO"),yn=Object.prototype,Sn=vn?Object.getPrototypeOf:function(e){return e=De(e),y(e,bn)?e[bn]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?yn:null},wn=Je("iterator"),Ln=!1;[].keys&&("next"in(mn=[].keys())?(hn=Sn(Sn(mn)))!==Object.prototype&&(pn=hn):Ln=!0),null==pn&&(pn={}),y(pn,wn)||$(pn,wn,(function(){return this}));var Mn={IteratorPrototype:pn,BUGGY_SAFARI_ITERATORS:Ln},kn=Mn.IteratorPrototype,An=function(){return this},Cn=function(e,t,n){var i=t+" Iterator";return e.prototype=Ue(kn,{next:c(1,n)}),it(e,i,!1),fn[i]=An,e},jn=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return C(n),function(e){if(!f(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(i),t?e.call(n,i):n.__proto__=i,n}}():void 0),En=Mn.IteratorPrototype,$n=Mn.BUGGY_SAFARI_ITERATORS,xn=Je("iterator"),Tn="keys",In="values",Pn="entries",On=function(){return this},Dn=function(e,t,n,i,a,o,r){Cn(n,t,i);var s,l,c,u=function(e){if(e===a&&g)return g;if(!$n&&e in h)return h[e];switch(e){case Tn:case In:case Pn:return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",p=!1,h=e.prototype,m=h[xn]||h["@@iterator"]||a&&h[a],g=!$n&&m||u(a),f="Array"==t&&h.entries||m;if(f&&(s=Sn(f.call(new e)),En!==Object.prototype&&s.next&&(Sn(s)!==En&&(jn?jn(s,En):"function"!=typeof s[xn]&&$(s,xn,On)),it(s,d,!0))),a==In&&m&&m.name!==In&&(p=!0,g=function(){return m.call(this)}),h[xn]!==g&&$(h,xn,g),fn[t]=g,a)if(l={values:u(In),keys:o?g:u(Tn),entries:u(Pn)},r)for(c in l)($n||p||!(c in h))&&te(h,c,l[c]);else Te({target:t,proto:!0,forced:$n||p},l);return l},Rn="Array Iterator",Gn=ee.set,Nn=ee.getterFor(Rn),_n=Dn(Array,"Array",(function(e,t){Gn(this,{type:Rn,target:g(e),index:0,kind:t})}),(function(){var e=Nn(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values");fn.Arguments=fn.Array,gn("keys"),gn("values"),gn("entries");var Bn=[].join,Hn=h!=Object,Vn=Kt("join",",");Te({target:"Array",proto:!0,forced:Hn||!Vn},{join:function(e){return Bn.call(g(this),void 0===e?",":e)}});var Un,Wn,Yn=function(e,t,n){var i=v(t);i in e?E.f(e,i,c(0,n)):e[i]=n},Fn=ae("navigator","userAgent")||"",qn=i.process,zn=qn&&qn.versions,Kn=zn&&zn.v8;Kn?Wn=(Un=Kn.split("."))[0]+Un[1]:Fn&&(!(Un=Fn.match(/Edge\/(\d+)/))||Un[1]>=74)&&(Un=Fn.match(/Chrome\/(\d+)/))&&(Wn=Un[1]);var Qn=Wn&&+Wn,Jn=Je("species"),Xn=function(e){return Qn>=51||!a((function(){var t=[];return(t.constructor={})[Jn]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Zn=Xn("slice"),ei=Zt("slice",{ACCESSORS:!0,0:0,1:2}),ti=Je("species"),ni=[].slice,ii=Math.max;Te({target:"Array",proto:!0,forced:!Zn||!ei},{slice:function(e,t){var n,i,a,o=g(this),r=ce(o.length),s=pe(e,r),l=pe(void 0===t?r:t,r);if(Oe(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!Oe(n.prototype)?f(n)&&null===(n=n[ti])&&(n=void 0):n=void 0,n===Array||void 0===n))return ni.call(o,s,l);for(i=new(void 0===n?Array:n)(ii(l-s,0)),a=0;s<l;s++,a++)s in o&&Yn(i,a,o[s]);return i.length=a,i}});var ai={};ai[Je("toStringTag")]="z";var oi="[object z]"===String(ai),ri=Je("toStringTag"),si="Arguments"==d(function(){return arguments}()),li=oi?d:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),ri))?n:si?d(t):"Object"==(i=d(t))&&"function"==typeof t.callee?"Arguments":i},ci=oi?{}.toString:function(){return"[object "+li(this)+"]"};oi||te(Object.prototype,"toString",ci,{unsafe:!0});var ui=function(){var e=C(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};function di(e,t){return RegExp(e,t)}var pi={UNSUPPORTED_Y:a((function(){var e=di("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),BROKEN_CARET:a((function(){var e=di("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},hi=RegExp.prototype.exec,mi=String.prototype.replace,gi=hi,fi=function(){var e=/a/,t=/b*/g;return hi.call(e,"a"),hi.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),vi=pi.UNSUPPORTED_Y||pi.BROKEN_CARET,bi=void 0!==/()??/.exec("")[1];(fi||bi||vi)&&(gi=function(e){var t,n,i,a,o=this,r=vi&&o.sticky,s=ui.call(o),l=o.source,c=0,u=e;return r&&(-1===(s=s.replace("y","")).indexOf("g")&&(s+="g"),u=String(e).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==e[o.lastIndex-1])&&(l="(?: "+l+")",u=" "+u,c++),n=new RegExp("^(?:"+l+")",s)),bi&&(n=new RegExp("^"+l+"$(?!\\s)",s)),fi&&(t=o.lastIndex),i=hi.call(r?n:o,u),r?i?(i.input=i.input.slice(c),i[0]=i[0].slice(c),i.index=o.lastIndex,o.lastIndex+=i[0].length):o.lastIndex=0:fi&&i&&(o.lastIndex=o.global?i.index+i[0].length:t),bi&&i&&i.length>1&&mi.call(i[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(i[a]=void 0)})),i});var yi=gi;Te({target:"RegExp",proto:!0,forced:/./.exec!==yi},{exec:yi});var Si="toString",wi=RegExp.prototype,Li=wi.toString,Mi=a((function(){return"/a/b"!=Li.call({source:"a",flags:"b"})})),ki=Li.name!=Si;(Mi||ki)&&te(RegExp.prototype,Si,(function(){var e=C(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in wi)?ui.call(e):n)}),{unsafe:!0});var Ai=function(e){return function(t,n){var i,a,o=String(m(t)),r=se(n),s=o.length;return r<0||r>=s?e?"":void 0:(i=o.charCodeAt(r))<55296||i>56319||r+1===s||(a=o.charCodeAt(r+1))<56320||a>57343?e?o.charAt(r):i:e?o.slice(r,r+2):a-56320+(i-55296<<10)+65536}},Ci={codeAt:Ai(!1),charAt:Ai(!0)},ji=Ci.charAt,Ei="String Iterator",$i=ee.set,xi=ee.getterFor(Ei);Dn(String,"String",(function(e){$i(this,{type:Ei,string:String(e),index:0})}),(function(){var e,t=xi(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=ji(n,i),t.index+=e.length,{value:e,done:!1})}));var Ti=Je("species"),Ii=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),Pi="$0"==="a".replace(/./,"$0"),Oi=Je("replace"),Di=!!/./[Oi]&&""===/./[Oi]("a","$0"),Ri=!a((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),Gi=function(e,t,n,i){var o=Je(e),r=!a((function(){var t={};return t[o]=function(){return 7},7!=""[e](t)})),s=r&&!a((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[Ti]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return t=!0,null},n[o](""),!t}));if(!r||!s||"replace"===e&&(!Ii||!Pi||Di)||"split"===e&&!Ri){var l=/./[o],c=n(o,""[e],(function(e,t,n,i,a){return t.exec===yi?r&&!a?{done:!0,value:l.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}}),{REPLACE_KEEPS_$0:Pi,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Di}),u=c[0],d=c[1];te(String.prototype,e,u),te(RegExp.prototype,o,2==t?function(e,t){return d.call(e,this,t)}:function(e){return d.call(e,this)})}i&&$(RegExp.prototype[o],"sham",!0)},Ni=Ci.charAt,_i=function(e,t,n){return t+(n?Ni(e,t).length:1)},Bi=function(e,t){var n=e.exec;if("function"==typeof n){var i=n.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==d(e))throw TypeError("RegExp#exec called on incompatible receiver");return yi.call(e,t)},Hi=Math.max,Vi=Math.min,Ui=Math.floor,Wi=/\$([$&'`]|\d\d?|<[^>]*>)/g,Yi=/\$([$&'`]|\d\d?)/g;Gi("replace",2,(function(e,t,n,i){var a=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,o=i.REPLACE_KEEPS_$0,r=a?"$":"$0";return[function(n,i){var a=m(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,a,i):t.call(String(a),n,i)},function(e,i){if(!a&&o||"string"==typeof i&&-1===i.indexOf(r)){var l=n(t,e,this,i);if(l.done)return l.value}var c=C(e),u=String(this),d="function"==typeof i;d||(i=String(i));var p=c.global;if(p){var h=c.unicode;c.lastIndex=0}for(var m=[];;){var g=Bi(c,u);if(null===g)break;if(m.push(g),!p)break;""===String(g[0])&&(c.lastIndex=_i(u,ce(c.lastIndex),h))}for(var f,v="",b=0,y=0;y<m.length;y++){g=m[y];for(var S=String(g[0]),w=Hi(Vi(se(g.index),u.length),0),L=[],M=1;M<g.length;M++)L.push(void 0===(f=g[M])?f:String(f));var k=g.groups;if(d){var A=[S].concat(L,w,u);void 0!==k&&A.push(k);var j=String(i.apply(void 0,A))}else j=s(S,u,w,L,k,i);w>=b&&(v+=u.slice(b,w)+j,b=w+S.length)}return v+u.slice(b)}];function s(e,n,i,a,o,r){var s=i+e.length,l=a.length,c=Yi;return void 0!==o&&(o=De(o),c=Wi),t.call(r,c,(function(t,r){var c;switch(r.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,i);case"'":return n.slice(s);case"<":c=o[r.slice(1,-1)];break;default:var u=+r;if(0===u)return t;if(u>l){var d=Ui(u/10);return 0===d?t:d<=l?void 0===a[d-1]?r.charAt(1):a[d-1]+r.charAt(1):t}c=a[u-1]}return void 0===c?"":c}))}}));var Fi=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};Gi("search",1,(function(e,t,n){return[function(t){var n=m(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,n):new RegExp(t)[e](String(n))},function(e){var i=n(t,e,this);if(i.done)return i.value;var a=C(e),o=String(this),r=a.lastIndex;Fi(r,0)||(a.lastIndex=0);var s=Bi(a,o);return Fi(a.lastIndex,r)||(a.lastIndex=r),null===s?-1:s.index}]}));var qi=Je("match"),zi=function(e){var t;return f(e)&&(void 0!==(t=e[qi])?!!t:"RegExp"==d(e))},Ki=Je("species"),Qi=function(e,t){var n,i=C(e).constructor;return void 0===i||null==(n=C(i)[Ki])?t:at(n)},Ji=[].push,Xi=Math.min,Zi=4294967295,ea=!a((function(){return!RegExp(Zi,"y")}));Gi("split",2,(function(e,t,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var i=String(m(this)),a=void 0===n?Zi:n>>>0;if(0===a)return[];if(void 0===e)return[i];if(!zi(e))return t.call(i,e,a);for(var o,r,s,l=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),u=0,d=new RegExp(e.source,c+"g");(o=yi.call(d,i))&&!((r=d.lastIndex)>u&&(l.push(i.slice(u,o.index)),o.length>1&&o.index<i.length&&Ji.apply(l,o.slice(1)),s=o[0].length,u=r,l.length>=a));)d.lastIndex===o.index&&d.lastIndex++;return u===i.length?!s&&d.test("")||l.push(""):l.push(i.slice(u)),l.length>a?l.slice(0,a):l}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var a=m(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,a,n):i.call(String(a),t,n)},function(e,a){var o=n(i,e,this,a,i!==t);if(o.done)return o.value;var r=C(e),s=String(this),l=Qi(r,RegExp),c=r.unicode,u=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(ea?"y":"g"),d=new l(ea?r:"^(?:"+r.source+")",u),p=void 0===a?Zi:a>>>0;if(0===p)return[];if(0===s.length)return null===Bi(d,s)?[s]:[];for(var h=0,m=0,g=[];m<s.length;){d.lastIndex=ea?m:0;var f,v=Bi(d,ea?s:s.slice(m));if(null===v||(f=Xi(ce(d.lastIndex+(ea?0:m)),s.length))===h)m=_i(s,m,c);else{if(g.push(s.slice(h,m)),g.length===p)return g;for(var b=1;b<=v.length-1;b++)if(g.push(v[b]),g.length===p)return g;m=h=f}}return g.push(s.slice(h)),g}]}),!ea);var ta={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var na in ta){var ia=i[na],aa=ia&&ia.prototype;if(aa&&aa.forEach!==an)try{$(aa,"forEach",an)}catch(e){aa.forEach=an}}var oa=Je("iterator"),ra=Je("toStringTag"),sa=_n.values;for(var la in ta){var ca=i[la],ua=ca&&ca.prototype;if(ua){if(ua[oa]!==sa)try{$(ua,oa,sa)}catch(e){ua[oa]=sa}if(ua[ra]||$(ua,ra,la),ta[la])for(var da in _n)if(ua[da]!==_n[da])try{$(ua,da,_n[da])}catch(e){ua[da]=_n[da]}}}var pa=Je("iterator"),ha=!a((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,i){t.delete("b"),n+=i+e})),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[pa]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://????").host||"#%D0%B1"!==new URL("http://a#?").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),ma=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},ga=Object.assign,fa=Object.defineProperty,va=!ga||a((function(){if(o&&1!==ga({b:1},ga(fa({},"a",{enumerable:!0,get:function(){fa(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=ga({},e)[n]||Re(ga({},t)).join("")!=i}))?function(e,t){for(var n=De(e),i=arguments.length,a=1,r=Se.f,s=l.f;i>a;)for(var c,u=h(arguments[a++]),d=r?Re(u).concat(r(u)):Re(u),p=d.length,m=0;p>m;)c=d[m++],o&&!s.call(u,c)||(n[c]=u[c]);return n}:ga,ba=function(e){var t=e.return;if(void 0!==t)return C(t.call(e)).value},ya=function(e,t,n,i){try{return i?t(C(n)[0],n[1]):t(n)}catch(t){throw ba(e),t}},Sa=Je("iterator"),wa=Array.prototype,La=function(e){return void 0!==e&&(fn.Array===e||wa[Sa]===e)},Ma=Je("iterator"),ka=function(e){if(null!=e)return e[Ma]||e["@@iterator"]||fn[li(e)]},Aa=function(e){var t,n,i,a,o,r,s=De(e),l="function"==typeof this?this:Array,c=arguments.length,u=c>1?arguments[1]:void 0,d=void 0!==u,p=ka(s),h=0;if(d&&(u=ot(u,c>2?arguments[2]:void 0,2)),null==p||l==Array&&La(p))for(n=new l(t=ce(s.length));t>h;h++)r=d?u(s[h],h):s[h],Yn(n,h,r);else for(o=(a=p.call(s)).next,n=new l;!(i=o.call(a)).done;h++)r=d?ya(a,u,[i.value,h],!0):i.value,Yn(n,h,r);return n.length=h,n},Ca=2147483647,ja=/[^\0-\u007E]/,Ea=/[.\u3002\uFF0E\uFF61]/g,$a="Overflow: input needs wider integers to process",xa=Math.floor,Ta=String.fromCharCode,Ia=function(e){return e+22+75*(e<26)},Pa=function(e,t,n){var i=0;for(e=n?xa(e/700):e>>1,e+=xa(e/t);e>455;i+=36)e=xa(e/35);return xa(i+36*e/(e+38))},Oa=function(e){var t,n,i=[],a=(e=function(e){for(var t=[],n=0,i=e.length;n<i;){var a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<i){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&a)<<10)+(1023&o)+65536):(t.push(a),n--)}else t.push(a)}return t}(e)).length,o=128,r=0,s=72;for(t=0;t<e.length;t++)(n=e[t])<128&&i.push(Ta(n));var l=i.length,c=l;for(l&&i.push("-");c<a;){var u=Ca;for(t=0;t<e.length;t++)(n=e[t])>=o&&n<u&&(u=n);var d=c+1;if(u-o>xa((Ca-r)/d))throw RangeError($a);for(r+=(u-o)*d,o=u,t=0;t<e.length;t++){if((n=e[t])<o&&++r>Ca)throw RangeError($a);if(n==o){for(var p=r,h=36;;h+=36){var m=h<=s?1:h>=s+26?26:h-s;if(p<m)break;var g=p-m,f=36-m;i.push(Ta(Ia(m+g%f))),p=xa(g/f)}i.push(Ta(Ia(p))),s=Pa(r,d,c==l),r=0,++c}}++r,++o}return i.join("")},Da=function(e,t,n){for(var i in t)te(e,i,t[i],n);return e},Ra=function(e){var t=ka(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return C(t.call(e))},Ga=ae("fetch"),Na=ae("Headers"),_a=Je("iterator"),Ba="URLSearchParams",Ha="URLSearchParamsIterator",Va=ee.set,Ua=ee.getterFor(Ba),Wa=ee.getterFor(Ha),Ya=/\+/g,Fa=Array(4),qa=function(e){return Fa[e-1]||(Fa[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},za=function(e){try{return decodeURIComponent(e)}catch(t){return e}},Ka=function(e){var t=e.replace(Ya," "),n=4;try{return decodeURIComponent(t)}catch(e){for(;n;)t=t.replace(qa(n--),za);return t}},Qa=/[!'()~]|%20/g,Ja={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Xa=function(e){return Ja[e]},Za=function(e){return encodeURIComponent(e).replace(Qa,Xa)},eo=function(e,t){if(t)for(var n,i,a=t.split("&"),o=0;o<a.length;)(n=a[o++]).length&&(i=n.split("="),e.push({key:Ka(i.shift()),value:Ka(i.join("="))}))},to=function(e){this.entries.length=0,eo(this.entries,e)},no=function(e,t){if(e<t)throw TypeError("Not enough arguments")},io=Cn((function(e,t){Va(this,{type:Ha,iterator:Ra(Ua(e).entries),kind:t})}),"Iterator",(function(){var e=Wa(this),t=e.kind,n=e.iterator.next(),i=n.value;return n.done||(n.value="keys"===t?i.key:"values"===t?i.value:[i.key,i.value]),n})),ao=function(){ma(this,ao,Ba);var e,t,n,i,a,o,r,s,l,c=arguments.length>0?arguments[0]:void 0,u=[];if(Va(this,{type:Ba,entries:u,updateURL:function(){},updateSearchParams:to}),void 0!==c)if(f(c))if("function"==typeof(e=ka(c)))for(n=(t=e.call(c)).next;!(i=n.call(t)).done;){if((r=(o=(a=Ra(C(i.value))).next).call(a)).done||(s=o.call(a)).done||!o.call(a).done)throw TypeError("Expected sequence with length 2");u.push({key:r.value+"",value:s.value+""})}else for(l in c)y(c,l)&&u.push({key:l,value:c[l]+""});else eo(u,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},oo=ao.prototype;Da(oo,{append:function(e,t){no(arguments.length,2);var n=Ua(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){no(arguments.length,1);for(var t=Ua(this),n=t.entries,i=e+"",a=0;a<n.length;)n[a].key===i?n.splice(a,1):a++;t.updateURL()},get:function(e){no(arguments.length,1);for(var t=Ua(this).entries,n=e+"",i=0;i<t.length;i++)if(t[i].key===n)return t[i].value;return null},getAll:function(e){no(arguments.length,1);for(var t=Ua(this).entries,n=e+"",i=[],a=0;a<t.length;a++)t[a].key===n&&i.push(t[a].value);return i},has:function(e){no(arguments.length,1);for(var t=Ua(this).entries,n=e+"",i=0;i<t.length;)if(t[i++].key===n)return!0;return!1},set:function(e,t){no(arguments.length,1);for(var n,i=Ua(this),a=i.entries,o=!1,r=e+"",s=t+"",l=0;l<a.length;l++)(n=a[l]).key===r&&(o?a.splice(l--,1):(o=!0,n.value=s));o||a.push({key:r,value:s}),i.updateURL()},sort:function(){var e,t,n,i=Ua(this),a=i.entries,o=a.slice();for(a.length=0,n=0;n<o.length;n++){for(e=o[n],t=0;t<n;t++)if(a[t].key>e.key){a.splice(t,0,e);break}t===n&&a.push(e)}i.updateURL()},forEach:function(e){for(var t,n=Ua(this).entries,i=ot(e,arguments.length>1?arguments[1]:void 0,3),a=0;a<n.length;)i((t=n[a++]).value,t.key,this)},keys:function(){return new io(this,"keys")},values:function(){return new io(this,"values")},entries:function(){return new io(this,"entries")}},{enumerable:!0}),te(oo,_a,oo.entries),te(oo,"toString",(function(){for(var e,t=Ua(this).entries,n=[],i=0;i<t.length;)e=t[i++],n.push(Za(e.key)+"="+Za(e.value));return n.join("&")}),{enumerable:!0}),it(ao,Ba),Te({global:!0,forced:!ha},{URLSearchParams:ao}),ha||"function"!=typeof Ga||"function"!=typeof Na||Te({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,i,a=[e];return arguments.length>1&&(f(t=arguments[1])&&(n=t.body,li(n)===Ba&&((i=t.headers?new Na(t.headers):new Na).has("content-type")||i.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=Ue(t,{body:c(0,String(n)),headers:c(0,i)}))),a.push(t)),Ga.apply(this,a)}});var ro,so={URLSearchParams:ao,getState:Ua},lo=Ci.codeAt,co=i.URL,uo=so.URLSearchParams,po=so.getState,ho=ee.set,mo=ee.getterFor("URL"),go=Math.floor,fo=Math.pow,vo="Invalid scheme",bo="Invalid host",yo="Invalid port",So=/[A-Za-z]/,wo=/[\d+-.A-Za-z]/,Lo=/\d/,Mo=/^(0x|0X)/,ko=/^[0-7]+$/,Ao=/^\d+$/,Co=/^[\dA-Fa-f]+$/,jo=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,Eo=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,$o=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,xo=/[\u0009\u000A\u000D]/g,To=function(e,t){var n,i,a;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return bo;if(!(n=Po(t.slice(1,-1))))return bo;e.host=n}else if(Ho(e)){if(t=function(e){var t,n,i=[],a=e.toLowerCase().replace(Ea,".").split(".");for(t=0;t<a.length;t++)n=a[t],i.push(ja.test(n)?"xn--"+Oa(n):n);return i.join(".")}(t),jo.test(t))return bo;if(null===(n=Io(t)))return bo;e.host=n}else{if(Eo.test(t))return bo;for(n="",i=Aa(t),a=0;a<i.length;a++)n+=_o(i[a],Do);e.host=n}},Io=function(e){var t,n,i,a,o,r,s,l=e.split(".");if(l.length&&""==l[l.length-1]&&l.pop(),(t=l.length)>4)return e;for(n=[],i=0;i<t;i++){if(""==(a=l[i]))return e;if(o=10,a.length>1&&"0"==a.charAt(0)&&(o=Mo.test(a)?16:8,a=a.slice(8==o?1:2)),""===a)r=0;else{if(!(10==o?Ao:8==o?ko:Co).test(a))return e;r=parseInt(a,o)}n.push(r)}for(i=0;i<t;i++)if(r=n[i],i==t-1){if(r>=fo(256,5-t))return null}else if(r>255)return null;for(s=n.pop(),i=0;i<n.length;i++)s+=n[i]*fo(256,3-i);return s},Po=function(e){var t,n,i,a,o,r,s,l=[0,0,0,0,0,0,0,0],c=0,u=null,d=0,p=function(){return e.charAt(d)};if(":"==p()){if(":"!=e.charAt(1))return;d+=2,u=++c}for(;p();){if(8==c)return;if(":"!=p()){for(t=n=0;n<4&&Co.test(p());)t=16*t+parseInt(p(),16),d++,n++;if("."==p()){if(0==n)return;if(d-=n,c>6)return;for(i=0;p();){if(a=null,i>0){if(!("."==p()&&i<4))return;d++}if(!Lo.test(p()))return;for(;Lo.test(p());){if(o=parseInt(p(),10),null===a)a=o;else{if(0==a)return;a=10*a+o}if(a>255)return;d++}l[c]=256*l[c]+a,2!=++i&&4!=i||c++}if(4!=i)return;break}if(":"==p()){if(d++,!p())return}else if(p())return;l[c++]=t}else{if(null!==u)return;d++,u=++c}}if(null!==u)for(r=c-u,c=7;0!=c&&r>0;)s=l[c],l[c--]=l[u+r-1],l[u+--r]=s;else if(8!=c)return;return l},Oo=function(e){var t,n,i,a;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=go(e/256);return t.join(".")}if("object"==typeof e){for(t="",i=function(e){for(var t=null,n=1,i=null,a=0,o=0;o<8;o++)0!==e[o]?(a>n&&(t=i,n=a),i=null,a=0):(null===i&&(i=o),++a);return a>n&&(t=i,n=a),t}(e),n=0;n<8;n++)a&&0===e[n]||(a&&(a=!1),i===n?(t+=n?":":"::",a=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},Do={},Ro=va({},Do,{" ":1,'"':1,"<":1,">":1,"`":1}),Go=va({},Ro,{"#":1,"?":1,"{":1,"}":1}),No=va({},Go,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),_o=function(e,t){var n=lo(e,0);return n>32&&n<127&&!y(t,e)?e:encodeURIComponent(e)},Bo={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Ho=function(e){return y(Bo,e.scheme)},Vo=function(e){return""!=e.username||""!=e.password},Uo=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},Wo=function(e,t){var n;return 2==e.length&&So.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},Yo=function(e){var t;return e.length>1&&Wo(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},Fo=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&Wo(t[0],!0)||t.pop()},qo=function(e){return"."===e||"%2e"===e.toLowerCase()},zo={},Ko={},Qo={},Jo={},Xo={},Zo={},er={},tr={},nr={},ir={},ar={},or={},rr={},sr={},lr={},cr={},ur={},dr={},pr={},hr={},mr={},gr=function(e,t,n,i){var a,o,r,s,l,c=n||zo,u=0,d="",p=!1,h=!1,m=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace($o,"")),t=t.replace(xo,""),a=Aa(t);u<=a.length;){switch(o=a[u],c){case zo:if(!o||!So.test(o)){if(n)return vo;c=Qo;continue}d+=o.toLowerCase(),c=Ko;break;case Ko:if(o&&(wo.test(o)||"+"==o||"-"==o||"."==o))d+=o.toLowerCase();else{if(":"!=o){if(n)return vo;d="",c=Qo,u=0;continue}if(n&&(Ho(e)!=y(Bo,d)||"file"==d&&(Vo(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=d,n)return void(Ho(e)&&Bo[e.scheme]==e.port&&(e.port=null));d="","file"==e.scheme?c=sr:Ho(e)&&i&&i.scheme==e.scheme?c=Jo:Ho(e)?c=tr:"/"==a[u+1]?(c=Xo,u++):(e.cannotBeABaseURL=!0,e.path.push(""),c=pr)}break;case Qo:if(!i||i.cannotBeABaseURL&&"#"!=o)return vo;if(i.cannotBeABaseURL&&"#"==o){e.scheme=i.scheme,e.path=i.path.slice(),e.query=i.query,e.fragment="",e.cannotBeABaseURL=!0,c=mr;break}c="file"==i.scheme?sr:Zo;continue;case Jo:if("/"!=o||"/"!=a[u+1]){c=Zo;continue}c=nr,u++;break;case Xo:if("/"==o){c=ir;break}c=dr;continue;case Zo:if(e.scheme=i.scheme,o==ro)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query;else if("/"==o||"\\"==o&&Ho(e))c=er;else if("?"==o)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query="",c=hr;else{if("#"!=o){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.path.pop(),c=dr;continue}e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query,e.fragment="",c=mr}break;case er:if(!Ho(e)||"/"!=o&&"\\"!=o){if("/"!=o){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,c=dr;continue}c=ir}else c=nr;break;case tr:if(c=nr,"/"!=o||"/"!=d.charAt(u+1))continue;u++;break;case nr:if("/"!=o&&"\\"!=o){c=ir;continue}break;case ir:if("@"==o){p&&(d="%40"+d),p=!0,r=Aa(d);for(var g=0;g<r.length;g++){var f=r[g];if(":"!=f||m){var v=_o(f,No);m?e.password+=v:e.username+=v}else m=!0}d=""}else if(o==ro||"/"==o||"?"==o||"#"==o||"\\"==o&&Ho(e)){if(p&&""==d)return"Invalid authority";u-=Aa(d).length+1,d="",c=ar}else d+=o;break;case ar:case or:if(n&&"file"==e.scheme){c=cr;continue}if(":"!=o||h){if(o==ro||"/"==o||"?"==o||"#"==o||"\\"==o&&Ho(e)){if(Ho(e)&&""==d)return bo;if(n&&""==d&&(Vo(e)||null!==e.port))return;if(s=To(e,d))return s;if(d="",c=ur,n)return;continue}"["==o?h=!0:"]"==o&&(h=!1),d+=o}else{if(""==d)return bo;if(s=To(e,d))return s;if(d="",c=rr,n==or)return}break;case rr:if(!Lo.test(o)){if(o==ro||"/"==o||"?"==o||"#"==o||"\\"==o&&Ho(e)||n){if(""!=d){var b=parseInt(d,10);if(b>65535)return yo;e.port=Ho(e)&&b===Bo[e.scheme]?null:b,d=""}if(n)return;c=ur;continue}return yo}d+=o;break;case sr:if(e.scheme="file","/"==o||"\\"==o)c=lr;else{if(!i||"file"!=i.scheme){c=dr;continue}if(o==ro)e.host=i.host,e.path=i.path.slice(),e.query=i.query;else if("?"==o)e.host=i.host,e.path=i.path.slice(),e.query="",c=hr;else{if("#"!=o){Yo(a.slice(u).join(""))||(e.host=i.host,e.path=i.path.slice(),Fo(e)),c=dr;continue}e.host=i.host,e.path=i.path.slice(),e.query=i.query,e.fragment="",c=mr}}break;case lr:if("/"==o||"\\"==o){c=cr;break}i&&"file"==i.scheme&&!Yo(a.slice(u).join(""))&&(Wo(i.path[0],!0)?e.path.push(i.path[0]):e.host=i.host),c=dr;continue;case cr:if(o==ro||"/"==o||"\\"==o||"?"==o||"#"==o){if(!n&&Wo(d))c=dr;else if(""==d){if(e.host="",n)return;c=ur}else{if(s=To(e,d))return s;if("localhost"==e.host&&(e.host=""),n)return;d="",c=ur}continue}d+=o;break;case ur:if(Ho(e)){if(c=dr,"/"!=o&&"\\"!=o)continue}else if(n||"?"!=o)if(n||"#"!=o){if(o!=ro&&(c=dr,"/"!=o))continue}else e.fragment="",c=mr;else e.query="",c=hr;break;case dr:if(o==ro||"/"==o||"\\"==o&&Ho(e)||!n&&("?"==o||"#"==o)){if(".."===(l=(l=d).toLowerCase())||"%2e."===l||".%2e"===l||"%2e%2e"===l?(Fo(e),"/"==o||"\\"==o&&Ho(e)||e.path.push("")):qo(d)?"/"==o||"\\"==o&&Ho(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&Wo(d)&&(e.host&&(e.host=""),d=d.charAt(0)+":"),e.path.push(d)),d="","file"==e.scheme&&(o==ro||"?"==o||"#"==o))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==o?(e.query="",c=hr):"#"==o&&(e.fragment="",c=mr)}else d+=_o(o,Go);break;case pr:"?"==o?(e.query="",c=hr):"#"==o?(e.fragment="",c=mr):o!=ro&&(e.path[0]+=_o(o,Do));break;case hr:n||"#"!=o?o!=ro&&("'"==o&&Ho(e)?e.query+="%27":e.query+="#"==o?"%23":_o(o,Do)):(e.fragment="",c=mr);break;case mr:o!=ro&&(e.fragment+=_o(o,Ro))}u++}},fr=function(e){var t,n,i=ma(this,fr,"URL"),a=arguments.length>1?arguments[1]:void 0,r=String(e),s=ho(i,{type:"URL"});if(void 0!==a)if(a instanceof fr)t=mo(a);else if(n=gr(t={},String(a)))throw TypeError(n);if(n=gr(s,r,null,t))throw TypeError(n);var l=s.searchParams=new uo,c=po(l);c.updateSearchParams(s.query),c.updateURL=function(){s.query=String(l)||null},o||(i.href=br.call(i),i.origin=yr.call(i),i.protocol=Sr.call(i),i.username=wr.call(i),i.password=Lr.call(i),i.host=Mr.call(i),i.hostname=kr.call(i),i.port=Ar.call(i),i.pathname=Cr.call(i),i.search=jr.call(i),i.searchParams=Er.call(i),i.hash=$r.call(i))},vr=fr.prototype,br=function(){var e=mo(this),t=e.scheme,n=e.username,i=e.password,a=e.host,o=e.port,r=e.path,s=e.query,l=e.fragment,c=t+":";return null!==a?(c+="//",Vo(e)&&(c+=n+(i?":"+i:"")+"@"),c+=Oo(a),null!==o&&(c+=":"+o)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?r[0]:r.length?"/"+r.join("/"):"",null!==s&&(c+="?"+s),null!==l&&(c+="#"+l),c},yr=function(){var e=mo(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&Ho(e)?t+"://"+Oo(e.host)+(null!==n?":"+n:""):"null"},Sr=function(){return mo(this).scheme+":"},wr=function(){return mo(this).username},Lr=function(){return mo(this).password},Mr=function(){var e=mo(this),t=e.host,n=e.port;return null===t?"":null===n?Oo(t):Oo(t)+":"+n},kr=function(){var e=mo(this).host;return null===e?"":Oo(e)},Ar=function(){var e=mo(this).port;return null===e?"":String(e)},Cr=function(){var e=mo(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},jr=function(){var e=mo(this).query;return e?"?"+e:""},Er=function(){return mo(this).searchParams},$r=function(){var e=mo(this).fragment;return e?"#"+e:""},xr=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(o&&Ge(vr,{href:xr(br,(function(e){var t=mo(this),n=String(e),i=gr(t,n);if(i)throw TypeError(i);po(t.searchParams).updateSearchParams(t.query)})),origin:xr(yr),protocol:xr(Sr,(function(e){var t=mo(this);gr(t,String(e)+":",zo)})),username:xr(wr,(function(e){var t=mo(this),n=Aa(String(e));if(!Uo(t)){t.username="";for(var i=0;i<n.length;i++)t.username+=_o(n[i],No)}})),password:xr(Lr,(function(e){var t=mo(this),n=Aa(String(e));if(!Uo(t)){t.password="";for(var i=0;i<n.length;i++)t.password+=_o(n[i],No)}})),host:xr(Mr,(function(e){var t=mo(this);t.cannotBeABaseURL||gr(t,String(e),ar)})),hostname:xr(kr,(function(e){var t=mo(this);t.cannotBeABaseURL||gr(t,String(e),or)})),port:xr(Ar,(function(e){var t=mo(this);Uo(t)||(""==(e=String(e))?t.port=null:gr(t,e,rr))})),pathname:xr(Cr,(function(e){var t=mo(this);t.cannotBeABaseURL||(t.path=[],gr(t,e+"",ur))})),search:xr(jr,(function(e){var t=mo(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",gr(t,e,hr)),po(t.searchParams).updateSearchParams(t.query)})),searchParams:xr(Er),hash:xr($r,(function(e){var t=mo(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",gr(t,e,mr)):t.fragment=null}))}),te(vr,"toJSON",(function(){return br.call(this)}),{enumerable:!0}),te(vr,"toString",(function(){return br.call(this)}),{enumerable:!0}),co){var Tr=co.createObjectURL,Ir=co.revokeObjectURL;Tr&&te(fr,"createObjectURL",(function(e){return Tr.apply(co,arguments)})),Ir&&te(fr,"revokeObjectURL",(function(e){return Ir.apply(co,arguments)}))}function Pr(e){return(Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Or(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Rr(e,t,n){return t&&Dr(e.prototype,t),n&&Dr(e,n),e}function Gr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nr(Object(n),!0).forEach((function(t){Gr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Br(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}}(e,t)||Vr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hr(e){return function(e){if(Array.isArray(e))return Ur(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Vr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vr(e,t){if(e){if("string"==typeof e)return Ur(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ur(e,t):void 0}}function Ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}it(fr,"URL"),Te({global:!0,forced:!ha,sham:!o},{URL:fr}),function(e){var t=function(){try{return!!Symbol.iterator}catch(e){return!1}}(),n=function(e){var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n},i=function(e){return encodeURIComponent(e).replace(/%20/g,"+")},a=function(e){return decodeURIComponent(String(e).replace(/\+/g," "))};(function(){try{var t=e.URLSearchParams;return"a=1"===new t("?a=1").toString()&&"function"==typeof t.prototype.set&&"function"==typeof t.prototype.entries}catch(e){return!1}})()||function(){var a=function e(t){Object.defineProperty(this,"_entries",{writable:!0,value:{}});var n=Pr(t);if("undefined"===n);else if("string"===n)""!==t&&this._fromString(t);else if(t instanceof e){var i=this;t.forEach((function(e,t){i.append(t,e)}))}else{if(null===t||"object"!==n)throw new TypeError("Unsupported input's type for URLSearchParams");if("[object Array]"===Object.prototype.toString.call(t))for(var a=0;a<t.length;a++){var o=t[a];if("[object Array]"!==Object.prototype.toString.call(o)&&2===o.length)throw new TypeError("Expected [string, any] as entry at index "+a+" of URLSearchParams's input");this.append(o[0],o[1])}else for(var r in t)t.hasOwnProperty(r)&&this.append(r,t[r])}},o=a.prototype;o.append=function(e,t){e in this._entries?this._entries[e].push(String(t)):this._entries[e]=[String(t)]},o.delete=function(e){delete this._entries[e]},o.get=function(e){return e in this._entries?this._entries[e][0]:null},o.getAll=function(e){return e in this._entries?this._entries[e].slice(0):[]},o.has=function(e){return e in this._entries},o.set=function(e,t){this._entries[e]=[String(t)]},o.forEach=function(e,t){var n;for(var i in this._entries)if(this._entries.hasOwnProperty(i)){n=this._entries[i];for(var a=0;a<n.length;a++)e.call(t,n[a],i,this)}},o.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),n(e)},o.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),n(e)},o.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),n(e)},t&&(o[Symbol.iterator]=o.entries),o.toString=function(){var e=[];return this.forEach((function(t,n){e.push(i(n)+"="+i(t))})),e.join("&")},e.URLSearchParams=a}();var o=e.URLSearchParams.prototype;"function"!=typeof o.sort&&(o.sort=function(){var e=this,t=[];this.forEach((function(n,i){t.push([i,n]),e._entries||e.delete(i)})),t.sort((function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0})),e._entries&&(e._entries={});for(var n=0;n<t.length;n++)this.append(t[n][0],t[n][1])}),"function"!=typeof o._fromString&&Object.defineProperty(o,"_fromString",{enumerable:!1,configurable:!1,writable:!1,value:function(e){if(this._entries)this._entries={};else{var t=[];this.forEach((function(e,n){t.push(n)}));for(var n=0;n<t.length;n++)this.delete(t[n])}var i,o=(e=e.replace(/^\?/,"")).split("&");for(n=0;n<o.length;n++)i=o[n].split("="),this.append(a(i[0]),i.length>1?a(i[1]):"")}})}(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:e),function(e){if(function(){try{var t=new e.URL("b","http://a");return t.pathname="c d","http://a/c%20d"===t.href&&t.searchParams}catch(e){return!1}}()||function(){var t=e.URL,n=function(t,n){"string"!=typeof t&&(t=String(t)),n&&"string"!=typeof n&&(n=String(n));var i,a=document;if(n&&(void 0===e.location||n!==e.location.href)){n=n.toLowerCase(),(i=(a=document.implementation.createHTMLDocument("")).createElement("base")).href=n,a.head.appendChild(i);try{if(0!==i.href.indexOf(n))throw new Error(i.href)}catch(e){throw new Error("URL unable to set base "+n+" due to "+e)}}var o=a.createElement("a");o.href=t,i&&(a.body.appendChild(o),o.href=o.href);var r=a.createElement("input");if(r.type="url",r.value=t,":"===o.protocol||!/:/.test(o.href)||!r.checkValidity()&&!n)throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:o});var s=new e.URLSearchParams(this.search),l=!0,c=!0,u=this;["append","delete","set"].forEach((function(e){var t=s[e];s[e]=function(){t.apply(s,arguments),l&&(c=!1,u.search=s.toString(),c=!0)}})),Object.defineProperty(this,"searchParams",{value:s,enumerable:!0});var d=void 0;Object.defineProperty(this,"_updateSearchParams",{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==d&&(d=this.search,c&&(l=!1,this.searchParams._fromString(this.search),l=!0))}})},i=n.prototype;["hash","host","hostname","port","protocol"].forEach((function(e){!function(e){Object.defineProperty(i,e,{get:function(){return this._anchorElement[e]},set:function(t){this._anchorElement[e]=t},enumerable:!0})}(e)})),Object.defineProperty(i,"search",{get:function(){return this._anchorElement.search},set:function(e){this._anchorElement.search=e,this._updateSearchParams()},enumerable:!0}),Object.defineProperties(i,{toString:{get:function(){var e=this;return function(){return e.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(e){this._anchorElement.href=e,this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(e){this._anchorElement.pathname=e},enumerable:!0},origin:{get:function(){var e={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],t=this._anchorElement.port!=e&&""!==this._anchorElement.port;return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(t?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(e){},enumerable:!0},username:{get:function(){return""},set:function(e){},enumerable:!0}}),n.createObjectURL=function(e){return t.createObjectURL.apply(t,arguments)},n.revokeObjectURL=function(e){return t.revokeObjectURL.apply(t,arguments)},e.URL=n}(),void 0!==e.location&&!("origin"in e.location)){var t=function(){return e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")};try{Object.defineProperty(e.location,"origin",{get:t,enumerable:!0})}catch(n){setInterval((function(){e.location.origin=t()}),100)}}}(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:e);var Wr=Je("isConcatSpreadable"),Yr=9007199254740991,Fr="Maximum allowed index exceeded",qr=Qn>=51||!a((function(){var e=[];return e[Wr]=!1,e.concat()[0]!==e})),zr=Xn("concat"),Kr=function(e){if(!f(e))return!1;var t=e[Wr];return void 0!==t?!!t:Oe(e)};Te({target:"Array",proto:!0,forced:!qr||!zr},{concat:function(e){var t,n,i,a,o,r=De(this),s=st(r,0),l=0;for(t=-1,i=arguments.length;t<i;t++)if(Kr(o=-1===t?r:arguments[t])){if(l+(a=ce(o.length))>Yr)throw TypeError(Fr);for(n=0;n<a;n++,l++)n in o&&Yn(s,l,o[n])}else{if(l>=Yr)throw TypeError(Fr);Yn(s,l++,o)}return s.length=l,s}});var Qr=ut.filter,Jr=Xn("filter"),Xr=Zt("filter");Te({target:"Array",proto:!0,forced:!Jr||!Xr},{filter:function(e){return Qr(this,e,arguments.length>1?arguments[1]:void 0)}});var Zr=ut.find,es="find",ts=!0,ns=Zt(es);es in[]&&Array(1).find((function(){ts=!1})),Te({target:"Array",proto:!0,forced:ts||!ns},{find:function(e){return Zr(this,e,arguments.length>1?arguments[1]:void 0)}}),gn(es);var is=Je("iterator"),as=!1;try{var os=0,rs={next:function(){return{done:!!os++}},return:function(){as=!0}};rs[is]=function(){return this},Array.from(rs,(function(){throw 2}))}catch(e){}var ss=function(e,t){if(!t&&!as)return!1;var n=!1;try{var i={};i[is]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n},ls=!ss((function(e){Array.from(e)}));Te({target:"Array",stat:!0,forced:ls},{from:Aa});var cs=me.includes,us=Zt("indexOf",{ACCESSORS:!0,1:0});Te({target:"Array",proto:!0,forced:!us},{includes:function(e){return cs(this,e,arguments.length>1?arguments[1]:void 0)}}),gn("includes");var ds=ut.map,ps=Xn("map"),hs=Zt("map");Te({target:"Array",proto:!0,forced:!ps||!hs},{map:function(e){return ds(this,e,arguments.length>1?arguments[1]:void 0)}});var ms=function(e,t,n){var i,a;return jn&&"function"==typeof(i=t.constructor)&&i!==n&&f(a=i.prototype)&&a!==n.prototype&&jn(e,a),e},gs="\t\n\v\f\r  ?       ?????? \u2028\u2029\ufeff",fs="["+gs+"]",vs=RegExp("^"+fs+fs+"*"),bs=RegExp(fs+fs+"*$"),ys=function(e){return function(t){var n=String(m(t));return 1&e&&(n=n.replace(vs,"")),2&e&&(n=n.replace(bs,"")),n}},Ss={start:ys(1),end:ys(2),trim:ys(3)},ws=ye.f,Ls=A.f,Ms=E.f,ks=Ss.trim,As="Number",Cs=i.Number,js=Cs.prototype,Es=d(Ue(js))==As,$s=function(e){var t,n,i,a,o,r,s,l,c=v(e,!1);if("string"==typeof c&&c.length>2)if(43===(t=(c=ks(c)).charCodeAt(0))||45===t){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:i=2,a=49;break;case 79:case 111:i=8,a=55;break;default:return+c}for(r=(o=c.slice(2)).length,s=0;s<r;s++)if((l=o.charCodeAt(s))<48||l>a)return NaN;return parseInt(o,i)}return+c};if($e(As,!Cs(" 0o1")||!Cs("0b1")||Cs("+0x1"))){for(var xs,Ts=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof Ts&&(Es?a((function(){js.valueOf.call(n)})):d(n)!=As)?ms(new Cs($s(t)),n,Ts):$s(t)},Is=o?ws(Cs):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Ps=0;Is.length>Ps;Ps++)y(Cs,xs=Is[Ps])&&!y(Ts,xs)&&Ms(Ts,xs,Ls(Cs,xs));Ts.prototype=js,js.constructor=Ts,te(i,As,Ts)}var Os=a((function(){Re(1)}));Te({target:"Object",stat:!0,forced:Os},{keys:function(e){return Re(De(e))}});var Ds=l.f,Rs=function(e){return function(t){for(var n,i=g(t),a=Re(i),r=a.length,s=0,l=[];r>s;)n=a[s++],o&&!Ds.call(i,n)||l.push(e?[n,i[n]]:i[n]);return l}},Gs={entries:Rs(!0),values:Rs(!1)},Ns=Gs.values;Te({target:"Object",stat:!0},{values:function(e){return Ns(e)}});var _s=function(e){if(zi(e))throw TypeError("The method doesn't accept regular expressions");return e},Bs=Je("match"),Hs=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[Bs]=!1,"/./"[e](t)}catch(e){}}return!1};Te({target:"String",proto:!0,forced:!Hs("includes")},{includes:function(e){return!!~String(m(this)).indexOf(_s(e),arguments.length>1?arguments[1]:void 0)}});var Vs=!a((function(){return Object.isExtensible(Object.preventExtensions({}))})),Us=t((function(e){var t=E.f,n=U("meta"),i=0,a=Object.isExtensible||function(){return!0},o=function(e){t(e,n,{value:{objectID:"O"+ ++i,weakData:{}}})},r=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!f(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!y(e,n)){if(!a(e))return"F";if(!t)return"E";o(e)}return e[n].objectID},getWeakData:function(e,t){if(!y(e,n)){if(!a(e))return!0;if(!t)return!1;o(e)}return e[n].weakData},onFreeze:function(e){return Vs&&r.REQUIRED&&a(e)&&!y(e,n)&&o(e),e}};F[n]=!0})),Ws=(Us.REQUIRED,Us.fastKey,Us.getWeakData,Us.onFreeze,function(e,t){this.stopped=e,this.result=t}),Ys=function(e,t,n){var i,a,o,r,s,l,c,u=n&&n.that,d=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),h=!(!n||!n.INTERRUPTED),m=ot(t,u,1+d+h),g=function(e){return i&&ba(i),new Ws(!0,e)},f=function(e){return d?(C(e),h?m(e[0],e[1],g):m(e[0],e[1])):h?m(e,g):m(e)};if(p)i=e;else{if("function"!=typeof(a=ka(e)))throw TypeError("Target is not iterable");if(La(a)){for(o=0,r=ce(e.length);r>o;o++)if((s=f(e[o]))&&s instanceof Ws)return s;return new Ws(!1)}i=a.call(e)}for(l=i.next;!(c=l.call(i)).done;){try{s=f(c.value)}catch(e){throw ba(i),e}if("object"==typeof s&&s&&s instanceof Ws)return s}return new Ws(!1)},Fs=Us.getWeakData,qs=ee.set,zs=ee.getterFor,Ks=ut.find,Qs=ut.findIndex,Js=0,Xs=function(e){return e.frozen||(e.frozen=new Zs)},Zs=function(){this.entries=[]},el=function(e,t){return Ks(e.entries,(function(e){return e[0]===t}))};Zs.prototype={get:function(e){var t=el(this,e);if(t)return t[1]},has:function(e){return!!el(this,e)},set:function(e,t){var n=el(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=Qs(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}};var tl={getConstructor:function(e,t,n,i){var a=e((function(e,o){ma(e,a,t),qs(e,{type:t,id:Js++,frozen:void 0}),null!=o&&Ys(o,e[i],{that:e,AS_ENTRIES:n})})),o=zs(t),r=function(e,t,n){var i=o(e),a=Fs(C(t),!0);return!0===a?Xs(i).set(t,n):a[i.id]=n,e};return Da(a.prototype,{delete:function(e){var t=o(this);if(!f(e))return!1;var n=Fs(e);return!0===n?Xs(t).delete(e):n&&y(n,t.id)&&delete n[t.id]},has:function(e){var t=o(this);if(!f(e))return!1;var n=Fs(e);return!0===n?Xs(t).has(e):n&&y(n,t.id)}}),Da(a.prototype,n?{get:function(e){var t=o(this);if(f(e)){var n=Fs(e);return!0===n?Xs(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return r(this,e,t)}}:{add:function(e){return r(this,e,!0)}}),a}},nl=(t((function(e){var t,n=ee.enforce,o=!i.ActiveXObject&&"ActiveXObject"in i,r=Object.isExtensible,s=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},l=e.exports=function(e,t,n){var o=-1!==e.indexOf("Map"),r=-1!==e.indexOf("Weak"),s=o?"set":"add",l=i[e],c=l&&l.prototype,u=l,d={},p=function(e){var t=c[e];te(c,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(r&&!f(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return r&&!f(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(r&&!f(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if($e(e,"function"!=typeof l||!(r||c.forEach&&!a((function(){(new l).entries().next()})))))u=n.getConstructor(t,e,o,s),Us.REQUIRED=!0;else if($e(e,!0)){var h=new u,m=h[s](r?{}:-0,1)!=h,g=a((function(){h.has(1)})),v=ss((function(e){new l(e)})),b=!r&&a((function(){for(var e=new l,t=5;t--;)e[s](t,t);return!e.has(-0)}));v||((u=t((function(t,n){ma(t,u,e);var i=ms(new l,t,u);return null!=n&&Ys(n,i[s],{that:i,AS_ENTRIES:o}),i}))).prototype=c,c.constructor=u),(g||b)&&(p("delete"),p("has"),o&&p("get")),(b||m)&&p(s),r&&c.clear&&delete c.clear}return d[e]=u,Te({global:!0,forced:u!=l},d),it(u,e),r||n.setStrong(u,e,o),u}("WeakMap",s,tl);if(_&&o){t=tl.getConstructor(s,"WeakMap",!0),Us.REQUIRED=!0;var c=l.prototype,u=c.delete,d=c.has,p=c.get,h=c.set;Da(c,{delete:function(e){if(f(e)&&!r(e)){var i=n(this);return i.frozen||(i.frozen=new t),u.call(this,e)||i.frozen.delete(e)}return u.call(this,e)},has:function(e){if(f(e)&&!r(e)){var i=n(this);return i.frozen||(i.frozen=new t),d.call(this,e)||i.frozen.has(e)}return d.call(this,e)},get:function(e){if(f(e)&&!r(e)){var i=n(this);return i.frozen||(i.frozen=new t),d.call(this,e)?p.call(this,e):i.frozen.get(e)}return p.call(this,e)},set:function(e,i){if(f(e)&&!r(e)){var a=n(this);a.frozen||(a.frozen=new t),d.call(this,e)?h.call(this,e,i):a.frozen.set(e,i)}else h.call(this,e,i);return this}})}})),ut.every),il=Kt("every"),al=Zt("every");Te({target:"Array",proto:!0,forced:!il||!al},{every:function(e){return nl(this,e,arguments.length>1?arguments[1]:void 0)}}),Te({target:"Object",stat:!0,forced:Object.assign!==va},{assign:va});var ol=Ss.trim;Te({target:"String",proto:!0,forced:function(e){return a((function(){return!!gs[e]()||"???"!="???"[e]()||gs[e].name!==e}))}("trim")},{trim:function(){return ol(this)}});var rl=ut.some,sl=Kt("some"),ll=Zt("some");Te({target:"Array",proto:!0,forced:!sl||!ll},{some:function(e){return rl(this,e,arguments.length>1?arguments[1]:void 0)}});var cl="".repeat||function(e){var t=String(m(this)),n="",i=se(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n},ul=1..toFixed,dl=Math.floor,pl=function(e,t,n){return 0===t?n:t%2==1?pl(e,t-1,n*e):pl(e*e,t/2,n)},hl=ul&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!a((function(){ul.call({})}));Te({target:"Number",proto:!0,forced:hl},{toFixed:function(e){var t,n,i,a,o=function(e){if("number"!=typeof e&&"Number"!=d(e))throw TypeError("Incorrect invocation");return+e}(this),r=se(e),s=[0,0,0,0,0,0],l="",c="0",u=function(e,t){for(var n=-1,i=t;++n<6;)i+=e*s[n],s[n]=i%1e7,i=dl(i/1e7)},p=function(e){for(var t=6,n=0;--t>=0;)n+=s[t],s[t]=dl(n/e),n=n%e*1e7},h=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==s[e]){var n=String(s[e]);t=""===t?n:t+cl.call("0",7-n.length)+n}return t};if(r<0||r>20)throw RangeError("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(l="-",o=-o),o>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(o*pl(2,69,1))-69)<0?o*pl(2,-t,1):o/pl(2,t,1),n*=4503599627370496,(t=52-t)>0){for(u(0,n),i=r;i>=7;)u(1e7,0),i-=7;for(u(pl(10,i,1),0),i=t-1;i>=23;)p(1<<23),i-=23;p(1<<i),u(1,1),p(2),c=h()}else u(0,n),u(1<<-t,0),c=h()+cl.call("0",r);return r>0?l+((a=c.length)<=r?"0."+cl.call("0",r-a)+c:c.slice(0,a-r)+"."+c.slice(a-r)):l+c}});var ml=Gs.entries;Te({target:"Object",stat:!0},{entries:function(e){return ml(e)}}),Te({target:"Number",stat:!0},{isNaN:function(e){return e!=e}});var gl=A.f,fl=a((function(){gl(1)}));function vl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function bl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Sl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yl(Object(n),!0).forEach((function(t){bl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Te({target:"Object",stat:!0,forced:!o||fl,sham:!o},{getOwnPropertyDescriptor:function(e,t){return gl(g(e),t)}}),Te({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(e){for(var t,n,i=g(e),a=A.f,o=we(i),r={},s=0;o.length>s;)void 0!==(n=a(i,t=o[s++]))&&Yn(r,t,n);return r}}),Gi("match",1,(function(e,t,n){return[function(t){var n=m(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,n):new RegExp(t)[e](String(n))},function(e){var i=n(t,e,this);if(i.done)return i.value;var a=C(e),o=String(this);if(!a.global)return Bi(a,o);var r=a.unicode;a.lastIndex=0;for(var s,l=[],c=0;null!==(s=Bi(a,o));){var u=String(s[0]);l[c]=u,""===u&&(a.lastIndex=_i(o,ce(a.lastIndex),r)),c++}return 0===c?null:l}]}));var wl={addCSS:!0,thumbWidth:15,watch:!0};var Ll=function(e){return null!=e?e.constructor:null},Ml=function(e,t){return!!(e&&t&&e instanceof t)},kl=function(e){return Ll(e)===String},Al=function(e){return Array.isArray(e)},Cl=function(e){return Ml(e,NodeList)},jl=kl,El=Al,$l=Cl,xl=function(e){return Ml(e,Element)},Tl=function(e){return Ml(e,Event)},Il=function(e){return function(e){return null==e}(e)||(kl(e)||Al(e)||Cl(e))&&!e.length||function(e){return Ll(e)===Object}(e)&&!Object.keys(e).length};var Pl,Ol,Dl,Rl=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),xl(t)?this.element=t:jl(t)&&(this.element=document.querySelector(t)),xl(this.element)&&Il(this.element.rangeTouch)&&(this.config=Sl({},wl,{},n),this.init())}return function(e,t,n){t&&vl(e.prototype,t),n&&vl(e,n)}(e,[{key:"init",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var t=this,n=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach((function(e){t.element[n](e,(function(e){return t.set(e)}),!1)}))}},{key:"get",value:function(t){if(!e.enabled||!Tl(t))return null;var n,i=t.target,a=t.changedTouches[0],o=parseFloat(i.getAttribute("min"))||0,r=parseFloat(i.getAttribute("max"))||100,s=parseFloat(i.getAttribute("step"))||1,l=i.getBoundingClientRect(),c=100/l.width*(this.config.thumbWidth/2)/100;return 0>(n=100/l.width*(a.clientX-l.left))?n=0:100<n&&(n=100),50>n?n-=(100-2*n)*c:50<n&&(n+=2*(n-50)*c),o+function(e,t){if(1>t){var n=function(e){var t="".concat(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}(t);return parseFloat(e.toFixed(n))}return Math.round(e/t)*t}(n/100*(r-o),s)}},{key:"set",value:function(t){e.enabled&&Tl(t)&&!t.target.disabled&&(t.preventDefault(),t.target.value=this.get(t),function(e,t){if(e&&t){var n=new Event(t,{bubbles:!0});e.dispatchEvent(n)}}(t.target,"touchend"===t.type?"change":"input"))}}],[{key:"setup",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=null;if(Il(t)||jl(t)?i=Array.from(document.querySelectorAll(jl(t)?t:'input[type="range"]')):xl(t)?i=[t]:$l(t)?i=Array.from(t):El(t)&&(i=t.filter(xl)),Il(i))return null;var a=Sl({},wl,{},n);if(jl(t)&&a.watch){var o=new MutationObserver((function(n){Array.from(n).forEach((function(n){Array.from(n.addedNodes).forEach((function(n){xl(n)&&function(e,t){return function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t)}(n,t)&&new e(n,a)}))}))}));o.observe(document.body,{childList:!0,subtree:!0})}return i.map((function(t){return new e(t,n)}))}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),e}(),Gl=i.Promise,Nl=Je("species"),_l=function(e){var t=ae(e),n=E.f;o&&t&&!t[Nl]&&n(t,Nl,{configurable:!0,get:function(){return this}})},Bl=/(iphone|ipod|ipad).*applewebkit/i.test(Fn),Hl="process"==d(i.process),Vl=i.location,Ul=i.setImmediate,Wl=i.clearImmediate,Yl=i.process,Fl=i.MessageChannel,ql=i.Dispatch,zl=0,Kl={},Ql=function(e){if(Kl.hasOwnProperty(e)){var t=Kl[e];delete Kl[e],t()}},Jl=function(e){return function(){Ql(e)}},Xl=function(e){Ql(e.data)},Zl=function(e){i.postMessage(e+"",Vl.protocol+"//"+Vl.host)};Ul&&Wl||(Ul=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return Kl[++zl]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},Pl(zl),zl},Wl=function(e){delete Kl[e]},Hl?Pl=function(e){Yl.nextTick(Jl(e))}:ql&&ql.now?Pl=function(e){ql.now(Jl(e))}:Fl&&!Bl?(Dl=(Ol=new Fl).port2,Ol.port1.onmessage=Xl,Pl=ot(Dl.postMessage,Dl,1)):i.addEventListener&&"function"==typeof postMessage&&!i.importScripts&&Vl&&"file:"!==Vl.protocol&&!a(Zl)?(Pl=Zl,i.addEventListener("message",Xl,!1)):Pl="onreadystatechange"in L("script")?function(e){Ne.appendChild(L("script")).onreadystatechange=function(){Ne.removeChild(this),Ql(e)}}:function(e){setTimeout(Jl(e),0)});var ec,tc,nc,ic,ac,oc,rc,sc,lc={set:Ul,clear:Wl},cc=A.f,uc=lc.set,dc=i.MutationObserver||i.WebKitMutationObserver,pc=i.document,hc=i.process,mc=i.Promise,gc=cc(i,"queueMicrotask"),fc=gc&&gc.value;fc||(ec=function(){var e,t;for(Hl&&(e=hc.domain)&&e.exit();tc;){t=tc.fn,tc=tc.next;try{t()}catch(e){throw tc?ic():nc=void 0,e}}nc=void 0,e&&e.enter()},!Bl&&!Hl&&dc&&pc?(ac=!0,oc=pc.createTextNode(""),new dc(ec).observe(oc,{characterData:!0}),ic=function(){oc.data=ac=!ac}):mc&&mc.resolve?(rc=mc.resolve(void 0),sc=rc.then,ic=function(){sc.call(rc,ec)}):ic=Hl?function(){hc.nextTick(ec)}:function(){uc.call(i,ec)});var vc,bc,yc,Sc,wc=fc||function(e){var t={fn:e,next:void 0};nc&&(nc.next=t),tc||(tc=t,ic()),nc=t},Lc=function(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i})),this.resolve=at(t),this.reject=at(n)},Mc={f:function(e){return new Lc(e)}},kc=function(e,t){if(C(e),f(t)&&t.constructor===e)return t;var n=Mc.f(e);return(0,n.resolve)(t),n.promise},Ac=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Cc=lc.set,jc=Je("species"),Ec="Promise",$c=ee.get,xc=ee.set,Tc=ee.getterFor(Ec),Ic=Gl,Pc=i.TypeError,Oc=i.document,Dc=i.process,Rc=ae("fetch"),Gc=Mc.f,Nc=Gc,_c=!!(Oc&&Oc.createEvent&&i.dispatchEvent),Bc="function"==typeof PromiseRejectionEvent,Hc="unhandledrejection",Vc=$e(Ec,(function(){if(G(Ic)===String(Ic)){if(66===Qn)return!0;if(!Hl&&!Bc)return!0}if(Qn>=51&&/native code/.test(Ic))return!1;var e=Ic.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[jc]=t,!(e.then((function(){}))instanceof t)})),Uc=Vc||!ss((function(e){Ic.all(e).catch((function(){}))})),Wc=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},Yc=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;wc((function(){for(var i=e.value,a=1==e.state,o=0;n.length>o;){var r,s,l,c=n[o++],u=a?c.ok:c.fail,d=c.resolve,p=c.reject,h=c.domain;try{u?(a||(2===e.rejection&&Kc(e),e.rejection=1),!0===u?r=i:(h&&h.enter(),r=u(i),h&&(h.exit(),l=!0)),r===c.promise?p(Pc("Promise-chain cycle")):(s=Wc(r))?s.call(r,d,p):d(r)):p(i)}catch(e){h&&!l&&h.exit(),p(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&qc(e)}))}},Fc=function(e,t,n){var a,o;_c?((a=Oc.createEvent("Event")).promise=t,a.reason=n,a.initEvent(e,!1,!0),i.dispatchEvent(a)):a={promise:t,reason:n},!Bc&&(o=i["on"+e])?o(a):e===Hc&&function(e,t){var n=i.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},qc=function(e){Cc.call(i,(function(){var t,n=e.facade,i=e.value;if(zc(e)&&(t=Ac((function(){Hl?Dc.emit("unhandledRejection",i,n):Fc(Hc,n,i)})),e.rejection=Hl||zc(e)?2:1,t.error))throw t.value}))},zc=function(e){return 1!==e.rejection&&!e.parent},Kc=function(e){Cc.call(i,(function(){var t=e.facade;Hl?Dc.emit("rejectionHandled",t):Fc("rejectionhandled",t,e.value)}))},Qc=function(e,t,n){return function(i){e(t,i,n)}},Jc=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Yc(e,!0))},Xc=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw Pc("Promise can't be resolved itself");var i=Wc(t);i?wc((function(){var n={done:!1};try{i.call(t,Qc(Xc,n,e),Qc(Jc,n,e))}catch(t){Jc(n,t,e)}})):(e.value=t,e.state=1,Yc(e,!1))}catch(t){Jc({done:!1},t,e)}}};Vc&&(Ic=function(e){ma(this,Ic,Ec),at(e),vc.call(this);var t=$c(this);try{e(Qc(Xc,t),Qc(Jc,t))}catch(e){Jc(t,e)}},(vc=function(e){xc(this,{type:Ec,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Da(Ic.prototype,{then:function(e,t){var n=Tc(this),i=Gc(Qi(this,Ic));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=Hl?Dc.domain:void 0,n.parent=!0,n.reactions.push(i),0!=n.state&&Yc(n,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),bc=function(){var e=new vc,t=$c(e);this.promise=e,this.resolve=Qc(Xc,t),this.reject=Qc(Jc,t)},Mc.f=Gc=function(e){return e===Ic||e===yc?new bc(e):Nc(e)},"function"==typeof Gl&&(Sc=Gl.prototype.then,te(Gl.prototype,"then",(function(e,t){var n=this;return new Ic((function(e,t){Sc.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof Rc&&Te({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return kc(Ic,Rc.apply(i,arguments))}}))),Te({global:!0,wrap:!0,forced:Vc},{Promise:Ic}),it(Ic,Ec,!1),_l(Ec),yc=ae(Ec),Te({target:Ec,stat:!0,forced:Vc},{reject:function(e){var t=Gc(this);return t.reject.call(void 0,e),t.promise}}),Te({target:Ec,stat:!0,forced:Vc},{resolve:function(e){return kc(this,e)}}),Te({target:Ec,stat:!0,forced:Uc},{all:function(e){var t=this,n=Gc(t),i=n.resolve,a=n.reject,o=Ac((function(){var n=at(t.resolve),o=[],r=0,s=1;Ys(e,(function(e){var l=r++,c=!1;o.push(void 0),s++,n.call(t,e).then((function(e){c||(c=!0,o[l]=e,--s||i(o))}),a)})),--s||i(o)}));return o.error&&a(o.value),n.promise},race:function(e){var t=this,n=Gc(t),i=n.reject,a=Ac((function(){var a=at(t.resolve);Ys(e,(function(e){a.call(t,e).then(n.resolve,i)}))}));return a.error&&i(a.value),n.promise}});var Zc,eu=A.f,tu="".startsWith,nu=Math.min,iu=Hs("startsWith"),au=!(iu||(Zc=eu(String.prototype,"startsWith"),!Zc||Zc.writable));Te({target:"String",proto:!0,forced:!au&&!iu},{startsWith:function(e){var t=String(m(this));_s(e);var n=ce(nu(arguments.length>1?arguments[1]:void 0,t.length)),i=String(e);return tu?tu.call(t,i,n):t.slice(n,n+i.length)===i}});var ou,ru,su,lu=function(e){return null!=e?e.constructor:null},cu=function(e,t){return Boolean(e&&t&&e instanceof t)},uu=function(e){return null==e},du=function(e){return lu(e)===Object},pu=function(e){return lu(e)===String},hu=function(e){return lu(e)===Function},mu=function(e){return Array.isArray(e)},gu=function(e){return cu(e,NodeList)},fu=function(e){return uu(e)||(pu(e)||mu(e)||gu(e))&&!e.length||du(e)&&!Object.keys(e).length},vu=uu,bu=du,yu=function(e){return lu(e)===Number&&!Number.isNaN(e)},Su=pu,wu=function(e){return lu(e)===Boolean},Lu=hu,Mu=mu,ku=gu,Au=function(e){return null!==e&&"object"===Pr(e)&&1===e.nodeType&&"object"===Pr(e.style)&&"object"===Pr(e.ownerDocument)},Cu=function(e){return cu(e,Event)},ju=function(e){return cu(e,KeyboardEvent)},Eu=function(e){return cu(e,TextTrack)||!uu(e)&&pu(e.kind)},$u=function(e){if(cu(e,window.URL))return!0;if(!pu(e))return!1;var t=e;e.startsWith("http://")&&e.startsWith("https://")||(t="http://".concat(e));try{return!fu(new URL(t).hostname)}catch(e){return!1}},xu=fu,Tu=(ou=document.createElement("span"),ru={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},su=Object.keys(ru).find((function(e){return void 0!==ou.style[e]})),!!Su(su)&&ru[su]);function Iu(e,t){setTimeout((function(){try{e.hidden=!0,e.offsetHeight,e.hidden=!1}catch(e){}}),t)}var Pu={isIE:
/* @cc_on!@ */
!!document.documentMode,isEdge:window.navigator.userAgent.includes("Edge"),isWebkit:"WebkitAppearance"in document.documentElement.style&&!/Edge/.test(navigator.userAgent),isIPhone:/(iPhone|iPod)/gi.test(navigator.platform),isIos:/(iPad|iPhone|iPod)/gi.test(navigator.platform)},Ou=function(e){return function(t,n,i,a){at(n);var o=De(t),r=h(o),s=ce(o.length),l=e?s-1:0,c=e?-1:1;if(i<2)for(;;){if(l in r){a=r[l],l+=c;break}if(l+=c,e?l<0:s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;e?l>=0:s>l;l+=c)l in r&&(a=n(a,r[l],l,o));return a}},Du=[Ou(!1),Ou(!0)][0],Ru=Kt("reduce"),Gu=Zt("reduce",{1:0});function Nu(e,t){return t.split(".").reduce((function(e,t){return e&&e[t]}),e)}function _u(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(!n.length)return e;var a=n.shift();return bu(a)?(Object.keys(a).forEach((function(t){bu(a[t])?(Object.keys(e).includes(t)||Object.assign(e,Gr({},t,{})),_u(e[t],a[t])):Object.assign(e,Gr({},t,a[t]))})),_u.apply(void 0,[e].concat(n))):e}function Bu(e,t){var n=e.length?e:[e];Array.from(n).reverse().forEach((function(e,n){var i=n>0?t.cloneNode(!0):t,a=e.parentNode,o=e.nextSibling;i.appendChild(e),o?a.insertBefore(i,o):a.appendChild(i)}))}function Hu(e,t){Au(e)&&!xu(t)&&Object.entries(t).filter((function(e){var t=Br(e,2)[1];return!vu(t)})).forEach((function(t){var n=Br(t,2),i=n[0],a=n[1];return e.setAttribute(i,a)}))}function Vu(e,t,n){var i=document.createElement(e);return bu(t)&&Hu(i,t),Su(n)&&(i.innerText=n),i}function Uu(e,t,n,i){Au(t)&&t.appendChild(Vu(e,n,i))}function Wu(e){ku(e)||Mu(e)?Array.from(e).forEach(Wu):Au(e)&&Au(e.parentNode)&&e.parentNode.removeChild(e)}function Yu(e){if(Au(e))for(var t=e.childNodes.length;t>0;)e.removeChild(e.lastChild),t-=1}function Fu(e,t){return Au(t)&&Au(t.parentNode)&&Au(e)?(t.parentNode.replaceChild(e,t),e):null}function qu(e,t){if(!Su(e)||xu(e))return{};var n={},i=_u({},t);return e.split(",").forEach((function(e){var t=e.trim(),a=t.replace(".",""),o=t.replace(/[[\]]/g,"").split("="),r=Br(o,1)[0],s=o.length>1?o[1].replace(/["']/g,""):"";switch(t.charAt(0)){case".":Su(i.class)?n.class="".concat(i.class," ").concat(a):n.class=a;break;case"#":n.id=t.replace("#","");break;case"[":n[r]=s}})),_u(i,n)}function zu(e,t){if(Au(e)){var n=t;wu(n)||(n=!e.hidden),e.hidden=n}}function Ku(e,t,n){if(ku(e))return Array.from(e).map((function(e){return Ku(e,t,n)}));if(Au(e)){var i="toggle";return void 0!==n&&(i=n?"add":"remove"),e.classList[i](t),e.classList.contains(t)}return!1}function Qu(e,t){return Au(e)&&e.classList.contains(t)}function Ju(e,t){var n=Element.prototype;return(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||function(){return Array.from(document.querySelectorAll(t)).includes(this)}).call(e,t)}function Xu(e){return this.elements.container.querySelectorAll(e)}function Zu(e){return this.elements.container.querySelector(e)}function ed(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Au(e)&&(e.focus({preventScroll:!0}),t&&Ku(e,this.config.classNames.tabFocus))}Te({target:"Array",proto:!0,forced:!Ru||!Gu||!Hl&&Qn>79&&Qn<83},{reduce:function(e){return Du(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var td,nd={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},id={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check:function(e,t,n){var i=Pu.isIPhone&&n&&id.playsinline,a=id[e]||"html5"!==t;return{api:a,ui:a&&id.rangeInput&&("video"!==e||!Pu.isIPhone||i)}},pip:!(Pu.isIPhone||!Lu(Vu("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||Vu("video").disablePictureInPicture)),airplay:Lu(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime:function(e){if(xu(e))return!1;var t=Br(e.split("/"),1)[0],n=e;if(!this.isHTML5||t!==this.type)return!1;Object.keys(nd).includes(n)&&(n+='; codecs="'.concat(nd[e],'"'));try{return Boolean(n&&this.media.canPlayType(n).replace(/no/,""))}catch(e){return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(td=document.createElement("input"),td.type="range","range"===td.type),touch:"ontouchstart"in document.documentElement,transitions:!1!==Tu,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},ad=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){return e=!0,null}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e}();function od(e,t,n){var i=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(e&&"addEventListener"in e&&!xu(t)&&Lu(n)){var s=t.split(" "),l=r;ad&&(l={passive:o,capture:r}),s.forEach((function(t){i&&i.eventListeners&&a&&i.eventListeners.push({element:e,type:t,callback:n,options:l}),e[a?"addEventListener":"removeEventListener"](t,n,l)}))}}function rd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];od.call(this,e,t,n,!0,i,a)}function sd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];od.call(this,e,t,n,!1,i,a)}function ld(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];od.call(this,e,n,(function r(){sd(e,n,r,a,o);for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];i.apply(t,l)}),!0,a,o)}function cd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(Au(e)&&!xu(t)){var a=new CustomEvent(t,{bubbles:n,detail:_r(_r({},i),{},{plyr:this})});e.dispatchEvent(a)}}function ud(){this&&this.eventListeners&&(this.eventListeners.forEach((function(e){var t=e.element,n=e.type,i=e.callback,a=e.options;t.removeEventListener(n,i,a)})),this.eventListeners=[])}function dd(){var e=this;return new Promise((function(t){return e.ready?setTimeout(t,0):rd.call(e,e.elements.container,"ready",t)})).then((function(){}))}function pd(e){(function(e){return cu(e,Promise)&&hu(e.then)})(e)&&e.then(null,(function(){}))}function hd(e){return!!(Mu(e)||Su(e)&&e.includes(":"))&&(Mu(e)?e:e.split(":")).map(Number).every(yu)}function md(e){if(!Mu(e)||!e.every(yu))return null;var t=Br(e,2),n=t[0],i=t[1],a=function e(t,n){return 0===n?t:e(n,t%n)}(n,i);return[n/a,i/a]}function gd(e){var t=function(e){return hd(e)?e.split(":").map(Number):null},n=t(e);if(null===n&&(n=t(this.config.ratio)),null===n&&!xu(this.embed)&&Mu(this.embed.ratio)&&(n=this.embed.ratio),null===n&&this.isHTML5){var i=this.media;n=md([i.videoWidth,i.videoHeight])}return n}function fd(e){if(!this.isVideo)return{};var t=this.elements.wrapper,n=gd.call(this,e),i=Br(Mu(n)?n:[0,0],2),a=100/i[0]*i[1];if(t.style.paddingBottom="".concat(a,"%"),this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){var o=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),r=(o-a)/(o/50);this.fullscreen.active?t.style.paddingBottom=null:this.media.style.transform="translateY(-".concat(r,"%)")}else this.isHTML5&&t.classList.toggle(this.config.classNames.videoFixedRatio,null!==n);return{padding:a,ratio:n}}var vd={getSources:function(){var e=this;return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter((function(t){var n=t.getAttribute("type");return!!xu(n)||id.mime.call(e,n)})):[]},getQualityOptions:function(){return this.config.quality.forced?this.config.quality.options:vd.getSources.call(this).map((function(e){return Number(e.getAttribute("size"))})).filter(Boolean)},setup:function(){if(this.isHTML5){var e=this;e.options.speed=e.config.speed.options,xu(this.config.ratio)||fd.call(e),Object.defineProperty(e.media,"quality",{get:function(){var t=vd.getSources.call(e).find((function(t){return t.getAttribute("src")===e.source}));return t&&Number(t.getAttribute("size"))},set:function(t){if(e.quality!==t){if(e.config.quality.forced&&Lu(e.config.quality.onChange))e.config.quality.onChange(t);else{var n=vd.getSources.call(e).find((function(e){return Number(e.getAttribute("size"))===t}));if(!n)return;var i=e.media,a=i.currentTime,o=i.paused,r=i.preload,s=i.readyState,l=i.playbackRate;e.media.src=n.getAttribute("src"),("none"!==r||s)&&(e.once("loadedmetadata",(function(){e.speed=l,e.currentTime=a,o||pd(e.play())})),e.media.load())}cd.call(e,e.media,"qualitychange",!1,{quality:t})}}})}},cancelRequests:function(){this.isHTML5&&(Wu(vd.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function bd(e){return Mu(e)?e.filter((function(t,n){return e.indexOf(t)===n})):e}var yd=E.f,Sd=ye.f,wd=ee.set,Ld=Je("match"),Md=i.RegExp,kd=Md.prototype,Ad=/a/g,Cd=/a/g,jd=new Md(Ad)!==Ad,Ed=pi.UNSUPPORTED_Y;if(o&&$e("RegExp",!jd||Ed||a((function(){return Cd[Ld]=!1,Md(Ad)!=Ad||Md(Cd)==Cd||"/a/i"!=Md(Ad,"i")})))){for(var $d=function(e,t){var n,i=this instanceof $d,a=zi(e),o=void 0===t;if(!i&&a&&e.constructor===$d&&o)return e;jd?a&&!o&&(e=e.source):e instanceof $d&&(o&&(t=ui.call(e)),e=e.source),Ed&&(n=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,""));var r=ms(jd?new Md(e,t):Md(e,t),i?this:kd,$d);return Ed&&n&&wd(r,{sticky:n}),r},xd=function(e){e in $d||yd($d,e,{configurable:!0,get:function(){return Md[e]},set:function(t){Md[e]=t}})},Td=Sd(Md),Id=0;Td.length>Id;)xd(Td[Id++]);kd.constructor=$d,$d.prototype=kd,te(i,"RegExp",$d)}function Pd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return xu(e)?e:e.toString().replace(/{(\d+)}/g,(function(e,t){return n[t].toString()}))}_l("RegExp");var Od=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(new RegExp(e.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),t.toString())},Dd=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toString().replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))};function Rd(e){var t=document.createElement("div");return t.appendChild(e),t.innerHTML}var Gd={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},Nd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(xu(e)||xu(t))return"";var n=Nu(t.i18n,e);if(xu(n))return Object.keys(Gd).includes(e)?Gd[e]:"";var i={"{seektime}":t.seekTime,"{title}":t.title};return Object.entries(i).forEach((function(e){var t=Br(e,2),i=t[0],a=t[1];n=Od(n,i,a)})),n},_d=function(){function e(t){var n=this;Or(this,e),Gr(this,"get",(function(t){if(!e.supported||!n.enabled)return null;var i=window.localStorage.getItem(n.key);if(xu(i))return null;var a=JSON.parse(i);return Su(t)&&t.length?a[t]:a})),Gr(this,"set",(function(t){if(e.supported&&n.enabled&&bu(t)){var i=n.get();xu(i)&&(i={}),_u(i,t),window.localStorage.setItem(n.key,JSON.stringify(i))}})),this.enabled=t.config.storage.enabled,this.key=t.config.storage.key}return Rr(e,null,[{key:"supported",get:function(){try{if(!("localStorage"in window))return!1;var e="___test";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}}}]),e}();function Bd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";return new Promise((function(n,i){try{var a=new XMLHttpRequest;if(!("withCredentials"in a))return;a.addEventListener("load",(function(){if("text"===t)try{n(JSON.parse(a.responseText))}catch(e){n(a.responseText)}else n(a.response)})),a.addEventListener("error",(function(){throw new Error(a.status)})),a.open("GET",e,!0),a.responseType=t,a.send()}catch(e){i(e)}}))}function Hd(e,t){if(Su(e)){var n="cache",i=Su(t),a=function(){return null!==document.getElementById(t)},o=function(e,t){e.innerHTML=t,i&&a()||document.body.insertAdjacentElement("afterbegin",e)};if(!i||!a()){var r=_d.supported,s=document.createElement("div");if(s.setAttribute("hidden",""),i&&s.setAttribute("id",t),r){var l=window.localStorage.getItem("".concat(n,"-").concat(t));if(null!==l){var c=JSON.parse(l);o(s,c.content)}}Bd(e).then((function(e){xu(e)||(r&&window.localStorage.setItem("".concat(n,"-").concat(t),JSON.stringify({content:e})),o(s,e))})).catch((function(){}))}}}var Vd=Math.ceil,Ud=Math.floor;Te({target:"Math",stat:!0},{trunc:function(e){return(e>0?Ud:Vd)(e)}});var Wd=function(e){return Math.trunc(e/60/60%60,10)};function Yd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!yu(e))return Yd(void 0,t,n);var i=function(e){return"0".concat(e).slice(-2)},a=Wd(e),o=function(e){return Math.trunc(e/60%60,10)}(e),r=function(e){return Math.trunc(e%60,10)}(e);return a=t||a>0?"".concat(a,":"):"","".concat(n&&e>0?"-":"").concat(a).concat(i(o),":").concat(i(r))}var Fd={getIconUrl:function(){var e=new URL(this.config.iconUrl,window.location).host!==window.location.host||Pu.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:e}},findElements:function(){try{return this.elements.controls=Zu.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:Xu.call(this,this.config.selectors.buttons.play),pause:Zu.call(this,this.config.selectors.buttons.pause),restart:Zu.call(this,this.config.selectors.buttons.restart),rewind:Zu.call(this,this.config.selectors.buttons.rewind),fastForward:Zu.call(this,this.config.selectors.buttons.fastForward),mute:Zu.call(this,this.config.selectors.buttons.mute),pip:Zu.call(this,this.config.selectors.buttons.pip),airplay:Zu.call(this,this.config.selectors.buttons.airplay),settings:Zu.call(this,this.config.selectors.buttons.settings),captions:Zu.call(this,this.config.selectors.buttons.captions),fullscreen:Zu.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=Zu.call(this,this.config.selectors.progress),this.elements.inputs={seek:Zu.call(this,this.config.selectors.inputs.seek),volume:Zu.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:Zu.call(this,this.config.selectors.display.buffer),currentTime:Zu.call(this,this.config.selectors.display.currentTime),duration:Zu.call(this,this.config.selectors.display.duration)},Au(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(".".concat(this.config.classNames.tooltip))),!0}catch(e){return this.debug.warn("It looks like there is a problem with your custom controls HTML",e),this.toggleNativeControls(!0),!1}},createIcon:function(e,t){var n="http://www.w3.org/2000/svg",i=Fd.getIconUrl.call(this),a="".concat(i.cors?"":i.url,"#").concat(this.config.iconPrefix),o=document.createElementNS(n,"svg");Hu(o,_u(t,{"aria-hidden":"true",focusable:"false"}));var r=document.createElementNS(n,"use"),s="".concat(a,"-").concat(e);return"href"in r&&r.setAttributeNS("http://www.w3.org/1999/xlink","href",s),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s),o.appendChild(r),o},createLabel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Nd(e,this.config);return Vu("span",_r(_r({},t),{},{class:[t.class,this.config.classNames.hidden].filter(Boolean).join(" ")}),n)},createBadge:function(e){if(xu(e))return null;var t=Vu("span",{class:this.config.classNames.menu.value});return t.appendChild(Vu("span",{class:this.config.classNames.menu.badge},e)),t},createButton:function(e,t){var n=this,i=_u({},t),a=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toString();return(e=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toString();return e=Od(e,"-"," "),e=Od(e,"_"," "),e=Dd(e),Od(e," ","")}(e)).charAt(0).toLowerCase()+e.slice(1)}(e),o={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach((function(e){Object.keys(i).includes(e)&&(o[e]=i[e],delete i[e])})),"button"!==o.element||Object.keys(i).includes("type")||(i.type="button"),Object.keys(i).includes("class")?i.class.split(" ").some((function(e){return e===n.config.classNames.control}))||_u(i,{class:"".concat(i.class," ").concat(this.config.classNames.control)}):i.class=this.config.classNames.control,e){case"play":o.toggle=!0,o.label="play",o.labelPressed="pause",o.icon="play",o.iconPressed="pause";break;case"mute":o.toggle=!0,o.label="mute",o.labelPressed="unmute",o.icon="volume",o.iconPressed="muted";break;case"captions":o.toggle=!0,o.label="enableCaptions",o.labelPressed="disableCaptions",o.icon="captions-off",o.iconPressed="captions-on";break;case"fullscreen":o.toggle=!0,o.label="enterFullscreen",o.labelPressed="exitFullscreen",o.icon="enter-fullscreen",o.iconPressed="exit-fullscreen";break;case"play-large":i.class+=" ".concat(this.config.classNames.control,"--overlaid"),a="play",o.label="play",o.icon="play";break;default:xu(o.label)&&(o.label=a),xu(o.icon)&&(o.icon=e)}var r=Vu(o.element);return o.toggle?(r.appendChild(Fd.createIcon.call(this,o.iconPressed,{class:"icon--pressed"})),r.appendChild(Fd.createIcon.call(this,o.icon,{class:"icon--not-pressed"})),r.appendChild(Fd.createLabel.call(this,o.labelPressed,{class:"label--pressed"})),r.appendChild(Fd.createLabel.call(this,o.label,{class:"label--not-pressed"}))):(r.appendChild(Fd.createIcon.call(this,o.icon)),r.appendChild(Fd.createLabel.call(this,o.label))),_u(i,qu(this.config.selectors.buttons[a],i)),Hu(r,i),"play"===a?(Mu(this.elements.buttons[a])||(this.elements.buttons[a]=[]),this.elements.buttons[a].push(r)):this.elements.buttons[a]=r,r},createRange:function(e,t){var n=Vu("input",_u(qu(this.config.selectors.inputs[e]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":Nd(e,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},t));return this.elements.inputs[e]=n,Fd.updateRangeFill.call(this,n),Rl.setup(n),n},createProgress:function(e,t){var n=Vu("progress",_u(qu(this.config.selectors.display[e]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},t));if("volume"!==e){n.appendChild(Vu("span",null,"0"));var i={played:"played",buffer:"buffered"}[e],a=i?Nd(i,this.config):"";n.innerText="% ".concat(a.toLowerCase())}return this.elements.display[e]=n,n},createTime:function(e,t){var n=qu(this.config.selectors.display[e],t),i=Vu("div",_u(n,{class:"".concat(n.class?n.class:""," ").concat(this.config.classNames.display.time," ").trim(),"aria-label":Nd(e,this.config)}),"00:00");return this.elements.display[e]=i,i},bindMenuItemShortcuts:function(e,t){var n=this;rd.call(this,e,"keydown keyup",(function(i){if([32,38,39,40].includes(i.which)&&(i.preventDefault(),i.stopPropagation(),"keydown"!==i.type)){var a,o=Ju(e,'[role="menuitemradio"]');!o&&[32,39].includes(i.which)?Fd.showMenuPanel.call(n,t,!0):32!==i.which&&(40===i.which||o&&39===i.which?(a=e.nextElementSibling,Au(a)||(a=e.parentNode.firstElementChild)):(a=e.previousElementSibling,Au(a)||(a=e.parentNode.lastElementChild)),ed.call(n,a,!0))}}),!1),rd.call(this,e,"keyup",(function(e){13===e.which&&Fd.focusFirstMenuItem.call(n,null,!0)}))},createMenuItem:function(e){var t=this,n=e.value,i=e.list,a=e.type,o=e.title,r=e.badge,s=void 0===r?null:r,l=e.checked,c=void 0!==l&&l,u=qu(this.config.selectors.inputs[a]),d=Vu("button",_u(u,{type:"button",role:"menuitemradio",class:"".concat(this.config.classNames.control," ").concat(u.class?u.class:"").trim(),"aria-checked":c,value:n})),p=Vu("span");p.innerHTML=o,Au(s)&&p.appendChild(s),d.appendChild(p),Object.defineProperty(d,"checked",{enumerable:!0,get:function(){return"true"===d.getAttribute("aria-checked")},set:function(e){e&&Array.from(d.parentNode.children).filter((function(e){return Ju(e,'[role="menuitemradio"]')})).forEach((function(e){return e.setAttribute("aria-checked","false")})),d.setAttribute("aria-checked",e?"true":"false")}}),this.listeners.bind(d,"click keyup",(function(e){if(!ju(e)||32===e.which){switch(e.preventDefault(),e.stopPropagation(),d.checked=!0,a){case"language":t.currentTrack=Number(n);break;case"quality":t.quality=n;break;case"speed":t.speed=parseFloat(n)}Fd.showMenuPanel.call(t,"home",ju(e))}}),a,!1),Fd.bindMenuItemShortcuts.call(this,d,a),i.appendChild(d)},formatTime:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return yu(e)?Yd(e,Wd(this.duration)>0,t):e},updateTimeDisplay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Au(e)&&yu(t)&&(e.innerText=Fd.formatTime(t,n))},updateVolume:function(){this.supported.ui&&(Au(this.elements.inputs.volume)&&Fd.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),Au(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||0===this.volume))},setRange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Au(e)&&(e.value=t,Fd.updateRangeFill.call(this,e))},updateProgress:function(e){var t=this;if(this.supported.ui&&Cu(e)){var n=0;if(e)switch(e.type){case"timeupdate":case"seeking":case"seeked":n=function(e,t){return 0===e||0===t||Number.isNaN(e)||Number.isNaN(t)?0:(e/t*100).toFixed(2)}(this.currentTime,this.duration),"timeupdate"===e.type&&Fd.setRange.call(this,this.elements.inputs.seek,n);break;case"playing":case"progress":!function(e,n){var i=yu(n)?n:0,a=Au(e)?e:t.elements.display.buffer;if(Au(a)){a.value=i;var o=a.getElementsByTagName("span")[0];Au(o)&&(o.childNodes[0].nodeValue=i)}}(this.elements.display.buffer,100*this.buffered)}}},updateRangeFill:function(e){var t=Cu(e)?e.target:e;if(Au(t)&&"range"===t.getAttribute("type")){if(Ju(t,this.config.selectors.inputs.seek)){t.setAttribute("aria-valuenow",this.currentTime);var n=Fd.formatTime(this.currentTime),i=Fd.formatTime(this.duration),a=Nd("seekLabel",this.config);t.setAttribute("aria-valuetext",a.replace("{currentTime}",n).replace("{duration}",i))}else if(Ju(t,this.config.selectors.inputs.volume)){var o=100*t.value;t.setAttribute("aria-valuenow",o),t.setAttribute("aria-valuetext","".concat(o.toFixed(1),"%"))}else t.setAttribute("aria-valuenow",t.value);Pu.isWebkit&&t.style.setProperty("--value","".concat(t.value/t.max*100,"%"))}},updateSeekTooltip:function(e){var t=this;if(this.config.tooltips.seek&&Au(this.elements.inputs.seek)&&Au(this.elements.display.seekTooltip)&&0!==this.duration){var n="".concat(this.config.classNames.tooltip,"--visible"),i=function(e){return Ku(t.elements.display.seekTooltip,n,e)};if(this.touch)i(!1);else{var a=0,o=this.elements.progress.getBoundingClientRect();if(Cu(e))a=100/o.width*(e.pageX-o.left);else{if(!Qu(this.elements.display.seekTooltip,n))return;a=parseFloat(this.elements.display.seekTooltip.style.left,10)}a<0?a=0:a>100&&(a=100),Fd.updateTimeDisplay.call(this,this.elements.display.seekTooltip,this.duration/100*a),this.elements.display.seekTooltip.style.left="".concat(a,"%"),Cu(e)&&["mouseenter","mouseleave"].includes(e.type)&&i("mouseenter"===e.type)}}},timeUpdate:function(e){var t=!Au(this.elements.display.duration)&&this.config.invertTime;Fd.updateTimeDisplay.call(this,this.elements.display.currentTime,t?this.duration-this.currentTime:this.currentTime,t),e&&"timeupdate"===e.type&&this.media.seeking||Fd.updateProgress.call(this,e)},durationUpdate:function(){if(this.supported.ui&&(this.config.invertTime||!this.currentTime)){if(this.duration>=Math.pow(2,32))return zu(this.elements.display.currentTime,!0),void zu(this.elements.progress,!0);Au(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);var e=Au(this.elements.display.duration);!e&&this.config.displayDuration&&this.paused&&Fd.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),e&&Fd.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),Fd.updateSeekTooltip.call(this)}},toggleMenuButton:function(e,t){zu(this.elements.settings.buttons[e],!t)},updateSetting:function(e,t,n){var i=this.elements.settings.panels[e],a=null,o=t;if("captions"===e)a=this.currentTrack;else{if(a=xu(n)?this[e]:n,xu(a)&&(a=this.config[e].default),!xu(this.options[e])&&!this.options[e].includes(a))return void this.debug.warn("Unsupported value of '".concat(a,"' for ").concat(e));if(!this.config[e].options.includes(a))return void this.debug.warn("Disabled value of '".concat(a,"' for ").concat(e))}if(Au(o)||(o=i&&i.querySelector('[role="menu"]')),Au(o)){this.elements.settings.buttons[e].querySelector(".".concat(this.config.classNames.menu.value)).innerHTML=Fd.getLabel.call(this,e,a);var r=o&&o.querySelector('[value="'.concat(a,'"]'));Au(r)&&(r.checked=!0)}},getLabel:function(e,t){switch(e){case"speed":return 1===t?Nd("normal",this.config):"".concat(t,"&times;");case"quality":if(yu(t)){var n=Nd("qualityLabel.".concat(t),this.config);return n.length?n:"".concat(t,"p")}return Dd(t);case"captions":return Kd.getLabel.call(this);default:return null}},setQualityMenu:function(e){var t=this;if(Au(this.elements.settings.panels.quality)){var n="quality",i=this.elements.settings.panels.quality.querySelector('[role="menu"]');Mu(e)&&(this.options.quality=bd(e).filter((function(e){return t.config.quality.options.includes(e)})));var a=!xu(this.options.quality)&&this.options.quality.length>1;if(Fd.toggleMenuButton.call(this,n,a),Yu(i),Fd.checkMenu.call(this),a){var o=function(e){var n=Nd("qualityBadge.".concat(e),t.config);return n.length?Fd.createBadge.call(t,n):null};this.options.quality.sort((function(e,n){var i=t.config.quality.options;return i.indexOf(e)>i.indexOf(n)?1:-1})).forEach((function(e){Fd.createMenuItem.call(t,{value:e,list:i,type:n,title:Fd.getLabel.call(t,"quality",e),badge:o(e)})})),Fd.updateSetting.call(this,n,i)}}},setCaptionsMenu:function(){var e=this;if(Au(this.elements.settings.panels.captions)){var t="captions",n=this.elements.settings.panels.captions.querySelector('[role="menu"]'),i=Kd.getTracks.call(this),a=Boolean(i.length);if(Fd.toggleMenuButton.call(this,t,a),Yu(n),Fd.checkMenu.call(this),a){var o=i.map((function(t,i){return{value:i,checked:e.captions.toggled&&e.currentTrack===i,title:Kd.getLabel.call(e,t),badge:t.language&&Fd.createBadge.call(e,t.language.toUpperCase()),list:n,type:"language"}}));o.unshift({value:-1,checked:!this.captions.toggled,title:Nd("disabled",this.config),list:n,type:"language"}),o.forEach(Fd.createMenuItem.bind(this)),Fd.updateSetting.call(this,t,n)}}},setSpeedMenu:function(){var e=this;if(Au(this.elements.settings.panels.speed)){var t="speed",n=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter((function(t){return t>=e.minimumSpeed&&t<=e.maximumSpeed}));var i=!xu(this.options.speed)&&this.options.speed.length>1;Fd.toggleMenuButton.call(this,t,i),Yu(n),Fd.checkMenu.call(this),i&&(this.options.speed.forEach((function(i){Fd.createMenuItem.call(e,{value:i,list:n,type:t,title:Fd.getLabel.call(e,"speed",i)})})),Fd.updateSetting.call(this,t,n))}},checkMenu:function(){var e=this.elements.settings.buttons,t=!xu(e)&&Object.values(e).some((function(e){return!e.hidden}));zu(this.elements.settings.menu,!t)},focusFirstMenuItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.elements.settings.popup.hidden){var n=e;Au(n)||(n=Object.values(this.elements.settings.panels).find((function(e){return!e.hidden})));var i=n.querySelector('[role^="menuitem"]');ed.call(this,i,t)}},toggleMenu:function(e){var t=this.elements.settings.popup,n=this.elements.buttons.settings;if(Au(t)&&Au(n)){var i=t.hidden,a=i;if(wu(e))a=e;else if(ju(e)&&27===e.which)a=!1;else if(Cu(e)){var o=Lu(e.composedPath)?e.composedPath()[0]:e.target,r=t.contains(o);if(r||!r&&e.target!==n&&a)return}n.setAttribute("aria-expanded",a),zu(t,!a),Ku(this.elements.container,this.config.classNames.menu.open,a),a&&ju(e)?Fd.focusFirstMenuItem.call(this,null,!0):a||i||ed.call(this,n,ju(e))}},getMenuSize:function(e){var t=e.cloneNode(!0);t.style.position="absolute",t.style.opacity=0,t.removeAttribute("hidden"),e.parentNode.appendChild(t);var n=t.scrollWidth,i=t.scrollHeight;return Wu(t),{width:n,height:i}},showMenuPanel:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.elements.container.querySelector("#plyr-settings-".concat(this.id,"-").concat(t));if(Au(i)){var a=i.parentNode,o=Array.from(a.children).find((function(e){return!e.hidden}));if(id.transitions&&!id.reducedMotion){a.style.width="".concat(o.scrollWidth,"px"),a.style.height="".concat(o.scrollHeight,"px");var r=Fd.getMenuSize.call(this,i);rd.call(this,a,Tu,(function t(n){n.target===a&&["width","height"].includes(n.propertyName)&&(a.style.width="",a.style.height="",sd.call(e,a,Tu,t))})),a.style.width="".concat(r.width,"px"),a.style.height="".concat(r.height,"px")}zu(o,!0),zu(i,!1),Fd.focusFirstMenuItem.call(this,i,n)}},setDownloadUrl:function(){var e=this.elements.buttons.download;Au(e)&&e.setAttribute("href",this.download)},create:function(e){var t=this,n=Fd.bindMenuItemShortcuts,i=Fd.createButton,a=Fd.createProgress,o=Fd.createRange,r=Fd.createTime,s=Fd.setQualityMenu,l=Fd.setSpeedMenu,c=Fd.showMenuPanel;this.elements.controls=null,Mu(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(i.call(this,"play-large"));var u=Vu("div",qu(this.config.selectors.controls.wrapper));this.elements.controls=u;var d={class:"plyr__controls__item"};return bd(Mu(this.config.controls)?this.config.controls:[]).forEach((function(s){if("restart"===s&&u.appendChild(i.call(t,"restart",d)),"rewind"===s&&u.appendChild(i.call(t,"rewind",d)),"play"===s&&u.appendChild(i.call(t,"play",d)),"fast-forward"===s&&u.appendChild(i.call(t,"fast-forward",d)),"progress"===s){var l=Vu("div",{class:"".concat(d.class," plyr__progress__container")}),p=Vu("div",qu(t.config.selectors.progress));if(p.appendChild(o.call(t,"seek",{id:"plyr-seek-".concat(e.id)})),p.appendChild(a.call(t,"buffer")),t.config.tooltips.seek){var h=Vu("span",{class:t.config.classNames.tooltip},"00:00");p.appendChild(h),t.elements.display.seekTooltip=h}t.elements.progress=p,l.appendChild(t.elements.progress),u.appendChild(l)}if("current-time"===s&&u.appendChild(r.call(t,"currentTime",d)),"duration"===s&&u.appendChild(r.call(t,"duration",d)),"mute"===s||"volume"===s){var m=t.elements.volume;if(Au(m)&&u.contains(m)||(m=Vu("div",_u({},d,{class:"".concat(d.class," plyr__volume").trim()})),t.elements.volume=m,u.appendChild(m)),"mute"===s&&m.appendChild(i.call(t,"mute")),"volume"===s&&!Pu.isIos){var g={max:1,step:.05,value:t.config.volume};m.appendChild(o.call(t,"volume",_u(g,{id:"plyr-volume-".concat(e.id)})))}}if("captions"===s&&u.appendChild(i.call(t,"captions",d)),"settings"===s&&!xu(t.config.settings)){var f=Vu("div",_u({},d,{class:"".concat(d.class," plyr__menu").trim(),hidden:""}));f.appendChild(i.call(t,"settings",{"aria-haspopup":!0,"aria-controls":"plyr-settings-".concat(e.id),"aria-expanded":!1}));var v=Vu("div",{class:"plyr__menu__container",id:"plyr-settings-".concat(e.id),hidden:""}),b=Vu("div"),y=Vu("div",{id:"plyr-settings-".concat(e.id,"-home")}),S=Vu("div",{role:"menu"});y.appendChild(S),b.appendChild(y),t.elements.settings.panels.home=y,t.config.settings.forEach((function(i){var a=Vu("button",_u(qu(t.config.selectors.buttons.settings),{type:"button",class:"".concat(t.config.classNames.control," ").concat(t.config.classNames.control,"--forward"),role:"menuitem","aria-haspopup":!0,hidden:""}));n.call(t,a,i),rd.call(t,a,"click",(function(){c.call(t,i,!1)}));var o=Vu("span",null,Nd(i,t.config)),r=Vu("span",{class:t.config.classNames.menu.value});r.innerHTML=e[i],o.appendChild(r),a.appendChild(o),S.appendChild(a);var s=Vu("div",{id:"plyr-settings-".concat(e.id,"-").concat(i),hidden:""}),l=Vu("button",{type:"button",class:"".concat(t.config.classNames.control," ").concat(t.config.classNames.control,"--back")});l.appendChild(Vu("span",{"aria-hidden":!0},Nd(i,t.config))),l.appendChild(Vu("span",{class:t.config.classNames.hidden},Nd("menuBack",t.config))),rd.call(t,s,"keydown",(function(e){37===e.which&&(e.preventDefault(),e.stopPropagation(),c.call(t,"home",!0))}),!1),rd.call(t,l,"click",(function(){c.call(t,"home",!1)})),s.appendChild(l),s.appendChild(Vu("div",{role:"menu"})),b.appendChild(s),t.elements.settings.buttons[i]=a,t.elements.settings.panels[i]=s})),v.appendChild(b),f.appendChild(v),u.appendChild(f),t.elements.settings.popup=v,t.elements.settings.menu=f}if("pip"===s&&id.pip&&u.appendChild(i.call(t,"pip",d)),"airplay"===s&&id.airplay&&u.appendChild(i.call(t,"airplay",d)),"download"===s){var w=_u({},d,{element:"a",href:t.download,target:"_blank"});t.isHTML5&&(w.download="");var L=t.config.urls.download;!$u(L)&&t.isEmbed&&_u(w,{icon:"logo-".concat(t.provider),label:t.provider}),u.appendChild(i.call(t,"download",w))}"fullscreen"===s&&u.appendChild(i.call(t,"fullscreen",d))})),this.isHTML5&&s.call(this,vd.getQualityOptions.call(this)),l.call(this),u},inject:function(){var e=this;if(this.config.loadSprite){var t=Fd.getIconUrl.call(this);t.cors&&Hd(t.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());var n=null;this.elements.controls=null;var i,a,o={id:this.id,seektime:this.config.seekTime,title:this.config.title},r=!0;if(Lu(this.config.controls)&&(this.config.controls=this.config.controls.call(this,o)),this.config.controls||(this.config.controls=[]),Au(this.config.controls)||Su(this.config.controls)?n=this.config.controls:(n=Fd.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:Kd.getLabel.call(this)}),r=!1),r&&Su(this.config.controls)&&(i=n,Object.entries(o).forEach((function(e){var t=Br(e,2),n=t[0],a=t[1];i=Od(i,"{".concat(n,"}"),a)})),n=i),Su(this.config.selectors.controls.container)&&(a=document.querySelector(this.config.selectors.controls.container)),Au(a)||(a=this.elements.container),a[Au(n)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",n),Au(this.elements.controls)||Fd.findElements.call(this),!xu(this.elements.buttons)){var s=function(t){var n=e.config.classNames.controlPressed;Object.defineProperty(t,"pressed",{enumerable:!0,get:function(){return Qu(t,n)},set:function(){Ku(t,n,arguments.length>0&&void 0!==arguments[0]&&arguments[0])}})};Object.values(this.elements.buttons).filter(Boolean).forEach((function(e){Mu(e)||ku(e)?Array.from(e).filter(Boolean).forEach(s):s(e)}))}if(Pu.isEdge&&Iu(a),this.config.tooltips.controls){var l=this.config,c=l.classNames,u=l.selectors,d="".concat(u.controls.wrapper," ").concat(u.labels," .").concat(c.hidden),p=Xu.call(this,d);Array.from(p).forEach((function(t){Ku(t,e.config.classNames.hidden,!1),Ku(t,e.config.classNames.tooltip,!0)}))}}};function qd(e){var t=e;if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]){var n=document.createElement("a");n.href=t,t=n.href}try{return new URL(t)}catch(e){return null}}function zd(e){var t=new URLSearchParams;return bu(e)&&Object.entries(e).forEach((function(e){var n=Br(e,2),i=n[0],a=n[1];t.set(i,a)})),t}var Kd={setup:function(){if(this.supported.ui)if(!this.isVideo||this.isYouTube||this.isHTML5&&!id.textTracks)Mu(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Fd.setCaptionsMenu.call(this);else{if(Au(this.elements.captions)||(this.elements.captions=Vu("div",qu(this.config.selectors.captions)),function(e,t){Au(e)&&Au(t)&&t.parentNode.insertBefore(e,t.nextSibling)}(this.elements.captions,this.elements.wrapper)),Pu.isIE&&window.URL){var e=this.media.querySelectorAll("track");Array.from(e).forEach((function(e){var t=e.getAttribute("src"),n=qd(t);null!==n&&n.hostname!==window.location.href.hostname&&["http:","https:"].includes(n.protocol)&&Bd(t,"blob").then((function(t){e.setAttribute("src",window.URL.createObjectURL(t))})).catch((function(){Wu(e)}))}))}var t=bd((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map((function(e){return e.split("-")[0]}))),n=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();"auto"===n&&(n=Br(t,1)[0]);var i=this.storage.get("captions");if(wu(i)||(i=this.config.captions.active),Object.assign(this.captions,{toggled:!1,active:i,language:n,languages:t}),this.isHTML5){var a=this.config.captions.update?"addtrack removetrack":"removetrack";rd.call(this,this.media.textTracks,a,Kd.update.bind(this))}setTimeout(Kd.update.bind(this),0)}},update:function(){var e=this,t=Kd.getTracks.call(this,!0),n=this.captions,i=n.active,a=n.language,o=n.meta,r=n.currentTrackNode,s=Boolean(t.find((function(e){return e.language===a})));this.isHTML5&&this.isVideo&&t.filter((function(e){return!o.get(e)})).forEach((function(t){e.debug.log("Track added",t),o.set(t,{default:"showing"===t.mode}),"showing"===t.mode&&(t.mode="hidden"),rd.call(e,t,"cuechange",(function(){return Kd.updateCues.call(e)}))})),(s&&this.language!==a||!t.includes(r))&&(Kd.setLanguage.call(this,a),Kd.toggle.call(this,i&&s)),Ku(this.elements.container,this.config.classNames.captions.enabled,!xu(t)),Mu(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Fd.setCaptionsMenu.call(this)},toggle:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.supported.ui){var i=this.captions.toggled,a=this.config.classNames.captions.active,o=vu(e)?!i:e;if(o!==i){if(n||(this.captions.active=o,this.storage.set({captions:o})),!this.language&&o&&!n){var r=Kd.getTracks.call(this),s=Kd.findTrack.call(this,[this.captions.language].concat(Hr(this.captions.languages)),!0);return this.captions.language=s.language,void Kd.set.call(this,r.indexOf(s))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=o),Ku(this.elements.container,a,o),this.captions.toggled=o,Fd.updateSetting.call(this,"captions"),cd.call(this,this.media,o?"captionsenabled":"captionsdisabled")}setTimeout((function(){o&&t.captions.toggled&&(t.captions.currentTrackNode.mode="hidden")}))}},set:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Kd.getTracks.call(this);if(-1!==e)if(yu(e))if(e in n){if(this.captions.currentTrack!==e){this.captions.currentTrack=e;var i=n[e],a=(i||{}).language;this.captions.currentTrackNode=i,Fd.updateSetting.call(this,"captions"),t||(this.captions.language=a,this.storage.set({language:a})),this.isVimeo&&this.embed.enableTextTrack(a),cd.call(this,this.media,"languagechange")}Kd.toggle.call(this,!0,t),this.isHTML5&&this.isVideo&&Kd.updateCues.call(this)}else this.debug.warn("Track not found",e);else this.debug.warn("Invalid caption argument",e);else Kd.toggle.call(this,!1,t)},setLanguage:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Su(e)){var n=e.toLowerCase();this.captions.language=n;var i=Kd.getTracks.call(this),a=Kd.findTrack.call(this,[n]);Kd.set.call(this,i.indexOf(a),t)}else this.debug.warn("Invalid language argument",e)},getTracks:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Array.from((this.media||{}).textTracks||[]).filter((function(n){return!e.isHTML5||t||e.captions.meta.has(n)})).filter((function(e){return["captions","subtitles"].includes(e.kind)}))},findTrack:function(e){var t,n=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=Kd.getTracks.call(this),o=function(e){return Number((n.captions.meta.get(e)||{}).default)},r=Array.from(a).sort((function(e,t){return o(t)-o(e)}));return e.every((function(e){return!(t=r.find((function(t){return t.language===e})))})),t||(i?r[0]:void 0)},getCurrentTrack:function(){return Kd.getTracks.call(this)[this.currentTrack]},getLabel:function(e){var t=e;return!Eu(t)&&id.textTracks&&this.captions.toggled&&(t=Kd.getCurrentTrack.call(this)),Eu(t)?xu(t.label)?xu(t.language)?Nd("enabled",this.config):e.language.toUpperCase():t.label:Nd("disabled",this.config)},updateCues:function(e){if(this.supported.ui)if(Au(this.elements.captions))if(vu(e)||Array.isArray(e)){var t=e;if(!t){var n=Kd.getCurrentTrack.call(this);t=Array.from((n||{}).activeCues||[]).map((function(e){return e.getCueAsHTML()})).map(Rd)}var i=t.map((function(e){return e.trim()})).join("\n");if(i!==this.elements.captions.innerHTML){Yu(this.elements.captions);var a=Vu("span",qu(this.config.selectors.caption));a.innerHTML=i,this.elements.captions.appendChild(a),cd.call(this,this.media,"cuechange")}}else this.debug.warn("updateCues: Invalid input",e);else this.debug.warn("No captions element to render to")}},Qd={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.6.4/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isIos:"plyr--is-ios",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},tabFocus:"plyr__tab-focus",previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1}},Jd="picture-in-picture",Xd={html5:"html5",youtube:"youtube",vimeo:"vimeo"},Zd="video",ep=function(){},tp=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Or(this,e),this.enabled=window.console&&t,this.enabled&&this.log("Debugging enabled")}return Rr(e,[{key:"log",get:function(){return this.enabled?Function.prototype.bind.call(console.log,console):ep}},{key:"warn",get:function(){return this.enabled?Function.prototype.bind.call(console.warn,console):ep}},{key:"error",get:function(){return this.enabled?Function.prototype.bind.call(console.error,console):ep}}]),e}(),np=function(){function e(t){var n=this;Or(this,e),Gr(this,"onChange",(function(){if(n.enabled){var e=n.player.elements.buttons.fullscreen;Au(e)&&(e.pressed=n.active);var t=n.target===n.player.media?n.target:n.player.elements.container;cd.call(n.player,t,n.active?"enterfullscreen":"exitfullscreen",!0)}})),Gr(this,"toggleFallback",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e?n.scrollPosition={x:window.scrollX||0,y:window.scrollY||0}:window.scrollTo(n.scrollPosition.x,n.scrollPosition.y),document.body.style.overflow=e?"hidden":"",Ku(n.target,n.player.config.classNames.fullscreen.fallback,e),Pu.isIos){var t=document.head.querySelector('meta[name="viewport"]'),i="viewport-fit=cover";t||(t=document.createElement("meta")).setAttribute("name","viewport");var a=Su(t.content)&&t.content.includes(i);e?(n.cleanupViewport=!a,a||(t.content+=",".concat(i))):n.cleanupViewport&&(t.content=t.content.split(",").filter((function(e){return e.trim()!==i})).join(","))}n.onChange()})),Gr(this,"trapFocus",(function(e){if(!Pu.isIos&&n.active&&"Tab"===e.key&&9===e.keyCode){var t=document.activeElement,i=Xu.call(n.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),a=Br(i,1)[0],o=i[i.length-1];t!==o||e.shiftKey?t===a&&e.shiftKey&&(o.focus(),e.preventDefault()):(a.focus(),e.preventDefault())}})),Gr(this,"update",(function(){var t;n.enabled?(t=n.forceFallback?"Fallback (forced)":e.native?"Native":"Fallback",n.player.debug.log("".concat(t," fullscreen enabled"))):n.player.debug.log("Fullscreen not supported and fallback disabled"),Ku(n.player.elements.container,n.player.config.classNames.fullscreen.enabled,n.enabled)})),Gr(this,"enter",(function(){n.enabled&&(Pu.isIos&&n.player.config.fullscreen.iosNative?n.player.isVimeo?n.player.embed.requestFullscreen():n.target.webkitEnterFullscreen():!e.native||n.forceFallback?n.toggleFallback(!0):n.prefix?xu(n.prefix)||n.target["".concat(n.prefix,"Request").concat(n.property)]():n.target.requestFullscreen({navigationUI:"hide"}))})),Gr(this,"exit",(function(){if(n.enabled)if(Pu.isIos&&n.player.config.fullscreen.iosNative)n.target.webkitExitFullscreen(),pd(n.player.play());else if(!e.native||n.forceFallback)n.toggleFallback(!1);else if(n.prefix){if(!xu(n.prefix)){var t="moz"===n.prefix?"Cancel":"Exit";document["".concat(n.prefix).concat(t).concat(n.property)]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)})),Gr(this,"toggle",(function(){n.active?n.exit():n.enter()})),this.player=t,this.prefix=e.prefix,this.property=e.property,this.scrollPosition={x:0,y:0},this.forceFallback="force"===t.config.fullscreen.fallback,this.player.elements.fullscreen=t.config.fullscreen.container&&function(e,t){return(Element.prototype.closest||function(){var e=this;do{if(Ju.matches(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}).call(e,t)}(this.player.elements.container,t.config.fullscreen.container),rd.call(this.player,document,"ms"===this.prefix?"MSFullscreenChange":"".concat(this.prefix,"fullscreenchange"),(function(){n.onChange()})),rd.call(this.player,this.player.elements.container,"dblclick",(function(e){Au(n.player.elements.controls)&&n.player.elements.controls.contains(e.target)||n.player.listeners.proxy(e,n.toggle,"fullscreen")})),rd.call(this,this.player.elements.container,"keydown",(function(e){return n.trapFocus(e)})),this.update()}return Rr(e,[{key:"usingNative",get:function(){return e.native&&!this.forceFallback}},{key:"enabled",get:function(){return(e.native||this.player.config.fullscreen.fallback)&&this.player.config.fullscreen.enabled&&this.player.supported.ui&&this.player.isVideo}},{key:"active",get:function(){if(!this.enabled)return!1;if(!e.native||this.forceFallback)return Qu(this.target,this.player.config.classNames.fullscreen.fallback);var t=this.prefix?document["".concat(this.prefix).concat(this.property,"Element")]:document.fullscreenElement;return t&&t.shadowRoot?t===this.target.getRootNode().host:t===this.target}},{key:"target",get:function(){return Pu.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen||this.player.elements.container}}],[{key:"native",get:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},{key:"prefix",get:function(){if(Lu(document.exitFullscreen))return"";var e="";return["webkit","moz","ms"].some((function(t){return!(!Lu(document["".concat(t,"ExitFullscreen")])&&!Lu(document["".concat(t,"CancelFullScreen")])||(e=t,0))})),e}},{key:"property",get:function(){return"moz"===this.prefix?"FullScreen":"Fullscreen"}}]),e}(),ip=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1};function ap(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise((function(n,i){var a=new Image,o=function(){delete a.onload,delete a.onerror,(a.naturalWidth>=t?n:i)(a)};Object.assign(a,{onload:o,onerror:o,src:e})}))}Te({target:"Math",stat:!0},{sign:ip});var op={addStyleHook:function(){Ku(this.elements.container,this.config.selectors.container.replace(".",""),!0),Ku(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build:function(){var e=this;if(this.listeners.media(),!this.supported.ui)return this.debug.warn("Basic support only for ".concat(this.provider," ").concat(this.type)),void op.toggleNativeControls.call(this,!0);Au(this.elements.controls)||(Fd.inject.call(this),this.listeners.controls()),op.toggleNativeControls.call(this),this.isHTML5&&Kd.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,Fd.updateVolume.call(this),Fd.timeUpdate.call(this),op.checkPlaying.call(this),Ku(this.elements.container,this.config.classNames.pip.supported,id.pip&&this.isHTML5&&this.isVideo),Ku(this.elements.container,this.config.classNames.airplay.supported,id.airplay&&this.isHTML5),Ku(this.elements.container,this.config.classNames.isIos,Pu.isIos),Ku(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout((function(){cd.call(e,e.media,"ready")}),0),op.setTitle.call(this),this.poster&&op.setPoster.call(this,this.poster,!1).catch((function(){})),this.config.duration&&Fd.durationUpdate.call(this)},setTitle:function(){var e=Nd("play",this.config);if(Su(this.config.title)&&!xu(this.config.title)&&(e+=", ".concat(this.config.title)),Array.from(this.elements.buttons.play||[]).forEach((function(t){t.setAttribute("aria-label",e)})),this.isEmbed){var t=Zu.call(this,"iframe");if(!Au(t))return;var n=xu(this.config.title)?"video":this.config.title,i=Nd("frameTitle",this.config);t.setAttribute("title",i.replace("{title}",n))}},togglePoster:function(e){Ku(this.elements.container,this.config.classNames.posterEnabled,e)},setPoster:function(e){var t=this;return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",e),this.elements.poster.removeAttribute("hidden"),dd.call(this).then((function(){return ap(e)})).catch((function(n){throw e===t.poster&&op.togglePoster.call(t,!1),n})).then((function(){if(e!==t.poster)throw new Error("setPoster cancelled by later call to setPoster")})).then((function(){return Object.assign(t.elements.poster.style,{backgroundImage:"url('".concat(e,"')"),backgroundSize:""}),op.togglePoster.call(t,!0),e})))},checkPlaying:function(e){var t=this;Ku(this.elements.container,this.config.classNames.playing,this.playing),Ku(this.elements.container,this.config.classNames.paused,this.paused),Ku(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach((function(e){Object.assign(e,{pressed:t.playing}),e.setAttribute("aria-label",Nd(t.playing?"pause":"play",t.config))})),Cu(e)&&"timeupdate"===e.type||op.toggleControls.call(this)},checkLoading:function(e){var t=this;this.loading=["stalled","waiting"].includes(e.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout((function(){Ku(t.elements.container,t.config.classNames.loading,t.loading),op.toggleControls.call(t)}),this.loading?250:0)},toggleControls:function(e){var t=this.elements.controls;if(t&&this.config.hideControls){var n=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(Boolean(e||this.loading||this.paused||t.pressed||t.hover||n))}},migrateStyles:function(){var e=this;Object.values(_r({},this.media.style)).filter((function(e){return!xu(e)&&Su(e)&&e.startsWith("--plyr")})).forEach((function(t){e.elements.container.style.setProperty(t,e.media.style.getPropertyValue(t)),e.media.style.removeProperty(t)})),xu(this.media.style)&&this.media.removeAttribute("style")}},rp=function(){function e(t){var n=this;Or(this,e),Gr(this,"firstTouch",(function(){var e=n.player,t=e.elements;e.touch=!0,Ku(t.container,e.config.classNames.isTouch,!0)})),Gr(this,"setTabFocus",(function(e){var t=n.player,i=t.elements;if(clearTimeout(n.focusTimer),"keydown"!==e.type||9===e.which){"keydown"===e.type&&(n.lastKeyDown=e.timeStamp);var a,o=e.timeStamp-n.lastKeyDown<=20;("focus"!==e.type||o)&&(a=t.config.classNames.tabFocus,Ku(Xu.call(t,".".concat(a)),a,!1),"focusout"!==e.type&&(n.focusTimer=setTimeout((function(){var e=document.activeElement;i.container.contains(e)&&Ku(document.activeElement,t.config.classNames.tabFocus,!0)}),10)))}})),Gr(this,"global",(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=n.player;t.config.keyboard.global&&od.call(t,window,"keydown keyup",n.handleKey,e,!1),od.call(t,document.body,"click",n.toggleMenu,e),ld.call(t,document.body,"touchstart",n.firstTouch),od.call(t,document.body,"keydown focus blur focusout",n.setTabFocus,e,!1,!0)})),Gr(this,"container",(function(){var e=n.player,t=e.config,i=e.elements,a=e.timers;!t.keyboard.global&&t.keyboard.focused&&rd.call(e,i.container,"keydown keyup",n.handleKey,!1),rd.call(e,i.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",(function(t){var n=i.controls;n&&"enterfullscreen"===t.type&&(n.pressed=!1,n.hover=!1);var o=0;["touchstart","touchmove","mousemove"].includes(t.type)&&(op.toggleControls.call(e,!0),o=e.touch?3e3:2e3),clearTimeout(a.controls),a.controls=setTimeout((function(){return op.toggleControls.call(e,!1)}),o)}));var o=function(t){if(!t)return fd.call(e);var n=i.container.getBoundingClientRect(),a=n.width,o=n.height;return fd.call(e,"".concat(a,":").concat(o))},r=function(){clearTimeout(a.resized),a.resized=setTimeout(o,50)};rd.call(e,i.container,"enterfullscreen exitfullscreen",(function(t){var n=e.fullscreen,a=n.target,s=n.usingNative;if(a===i.container&&(e.isEmbed||!xu(e.config.ratio))){var l="enterfullscreen"===t.type,c=o(l);c.padding,!function(t,n,i){if(e.isVimeo&&!e.config.vimeo.premium){var a=e.elements.wrapper.firstChild,o=Br(t,2)[1],r=Br(gd.call(e),2),s=r[0],l=r[1];a.style.maxWidth=i?"".concat(o/l*s,"px"):null,a.style.margin=i?"0 auto":null}}(c.ratio,0,l),l&&setTimeout((function(){return Iu(i.container)}),100),s||(l?rd.call(e,window,"resize",r):sd.call(e,window,"resize",r))}}))})),Gr(this,"media",(function(){var e=n.player,t=e.elements;if(rd.call(e,e.media,"timeupdate seeking seeked",(function(t){return Fd.timeUpdate.call(e,t)})),rd.call(e,e.media,"durationchange loadeddata loadedmetadata",(function(t){return Fd.durationUpdate.call(e,t)})),rd.call(e,e.media,"ended",(function(){e.isHTML5&&e.isVideo&&e.config.resetOnEnd&&(e.restart(),e.pause())})),rd.call(e,e.media,"progress playing seeking seeked",(function(t){return Fd.updateProgress.call(e,t)})),rd.call(e,e.media,"volumechange",(function(t){return Fd.updateVolume.call(e,t)})),rd.call(e,e.media,"playing play pause ended emptied timeupdate",(function(t){return op.checkPlaying.call(e,t)})),rd.call(e,e.media,"waiting canplay seeked playing",(function(t){return op.checkLoading.call(e,t)})),e.supported.ui&&e.config.clickToPlay&&!e.isAudio){var i=Zu.call(e,".".concat(e.config.classNames.video));if(!Au(i))return;rd.call(e,t.container,"click",(function(a){([t.container,i].includes(a.target)||i.contains(a.target))&&(e.touch&&e.config.hideControls||(e.ended?(n.proxy(a,e.restart,"restart"),n.proxy(a,(function(){pd(e.play())}),"play")):n.proxy(a,(function(){pd(e.togglePlay())}),"play")))}))}e.supported.ui&&e.config.disableContextMenu&&rd.call(e,t.wrapper,"contextmenu",(function(e){e.preventDefault()}),!1),rd.call(e,e.media,"volumechange",(function(){e.storage.set({volume:e.volume,muted:e.muted})})),rd.call(e,e.media,"ratechange",(function(){Fd.updateSetting.call(e,"speed"),e.storage.set({speed:e.speed})})),rd.call(e,e.media,"qualitychange",(function(t){Fd.updateSetting.call(e,"quality",null,t.detail.quality)})),rd.call(e,e.media,"ready qualitychange",(function(){Fd.setDownloadUrl.call(e)}));var a=e.config.events.concat(["keyup","keydown"]).join(" ");rd.call(e,e.media,a,(function(n){var i=n.detail,a=void 0===i?{}:i;"error"===n.type&&(a=e.media.error),cd.call(e,t.container,n.type,!0,a)}))})),Gr(this,"proxy",(function(e,t,i){var a=n.player,o=a.config.listeners[i],r=!0;Lu(o)&&(r=o.call(a,e)),!1!==r&&Lu(t)&&t.call(a,e)})),Gr(this,"bind",(function(e,t,i,a){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=n.player,s=r.config.listeners[a],l=Lu(s);rd.call(r,e,t,(function(e){return n.proxy(e,i,a)}),o&&!l)})),Gr(this,"controls",(function(){var e=n.player,t=e.elements,i=Pu.isIE?"change":"input";if(t.buttons.play&&Array.from(t.buttons.play).forEach((function(t){n.bind(t,"click",(function(){pd(e.togglePlay())}),"play")})),n.bind(t.buttons.restart,"click",e.restart,"restart"),n.bind(t.buttons.rewind,"click",(function(){e.lastSeekTime=Date.now(),e.rewind()}),"rewind"),n.bind(t.buttons.fastForward,"click",(function(){e.lastSeekTime=Date.now(),e.forward()}),"fastForward"),n.bind(t.buttons.mute,"click",(function(){e.muted=!e.muted}),"mute"),n.bind(t.buttons.captions,"click",(function(){return e.toggleCaptions()})),n.bind(t.buttons.download,"click",(function(){cd.call(e,e.media,"download")}),"download"),n.bind(t.buttons.fullscreen,"click",(function(){e.fullscreen.toggle()}),"fullscreen"),n.bind(t.buttons.pip,"click",(function(){e.pip="toggle"}),"pip"),n.bind(t.buttons.airplay,"click",e.airplay,"airplay"),n.bind(t.buttons.settings,"click",(function(t){t.stopPropagation(),t.preventDefault(),Fd.toggleMenu.call(e,t)}),null,!1),n.bind(t.buttons.settings,"keyup",(function(t){var n=t.which;[13,32].includes(n)&&(13!==n?(t.preventDefault(),t.stopPropagation(),Fd.toggleMenu.call(e,t)):Fd.focusFirstMenuItem.call(e,null,!0))}),null,!1),n.bind(t.settings.menu,"keydown",(function(t){27===t.which&&Fd.toggleMenu.call(e,t)})),n.bind(t.inputs.seek,"mousedown mousemove",(function(e){var n=t.progress.getBoundingClientRect(),i=100/n.width*(e.pageX-n.left);e.currentTarget.setAttribute("seek-value",i)})),n.bind(t.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",(function(t){var n=t.currentTarget,i=t.keyCode?t.keyCode:t.which,a="play-on-seeked";if(!ju(t)||39===i||37===i){e.lastSeekTime=Date.now();var o=n.hasAttribute(a),r=["mouseup","touchend","keyup"].includes(t.type);o&&r?(n.removeAttribute(a),pd(e.play())):!r&&e.playing&&(n.setAttribute(a,""),e.pause())}})),Pu.isIos){var a=Xu.call(e,'input[type="range"]');Array.from(a).forEach((function(e){return n.bind(e,i,(function(e){return Iu(e.target)}))}))}n.bind(t.inputs.seek,i,(function(t){var n=t.currentTarget,i=n.getAttribute("seek-value");xu(i)&&(i=n.value),n.removeAttribute("seek-value"),e.currentTime=i/n.max*e.duration}),"seek"),n.bind(t.progress,"mouseenter mouseleave mousemove",(function(t){return Fd.updateSeekTooltip.call(e,t)})),n.bind(t.progress,"mousemove touchmove",(function(t){var n=e.previewThumbnails;n&&n.loaded&&n.startMove(t)})),n.bind(t.progress,"mouseleave touchend click",(function(){var t=e.previewThumbnails;t&&t.loaded&&t.endMove(!1,!0)})),n.bind(t.progress,"mousedown touchstart",(function(t){var n=e.previewThumbnails;n&&n.loaded&&n.startScrubbing(t)})),n.bind(t.progress,"mouseup touchend",(function(t){var n=e.previewThumbnails;n&&n.loaded&&n.endScrubbing(t)})),Pu.isWebkit&&Array.from(Xu.call(e,'input[type="range"]')).forEach((function(t){n.bind(t,"input",(function(t){return Fd.updateRangeFill.call(e,t.target)}))})),e.config.toggleInvert&&!Au(t.display.duration)&&n.bind(t.display.currentTime,"click",(function(){0!==e.currentTime&&(e.config.invertTime=!e.config.invertTime,Fd.timeUpdate.call(e))})),n.bind(t.inputs.volume,i,(function(t){e.volume=t.target.value}),"volume"),n.bind(t.controls,"mouseenter mouseleave",(function(n){t.controls.hover=!e.touch&&"mouseenter"===n.type})),t.fullscreen&&Array.from(t.fullscreen.children).filter((function(e){return!e.contains(t.container)})).forEach((function(i){n.bind(i,"mouseenter mouseleave",(function(n){t.controls.hover=!e.touch&&"mouseenter"===n.type}))})),n.bind(t.controls,"mousedown mouseup touchstart touchend touchcancel",(function(e){t.controls.pressed=["mousedown","touchstart"].includes(e.type)})),n.bind(t.controls,"focusin",(function(){var i=e.config,a=e.timers;Ku(t.controls,i.classNames.noTransition,!0),op.toggleControls.call(e,!0),setTimeout((function(){Ku(t.controls,i.classNames.noTransition,!1)}),0);var o=n.touch?3e3:4e3;clearTimeout(a.controls),a.controls=setTimeout((function(){return op.toggleControls.call(e,!1)}),o)})),n.bind(t.inputs.volume,"wheel",(function(t){var n=t.webkitDirectionInvertedFromDevice,i=Br([t.deltaX,-t.deltaY].map((function(e){return n?-e:e})),2),a=i[0],o=i[1],r=Math.sign(Math.abs(a)>Math.abs(o)?a:o);e.increaseVolume(r/50);var s=e.media.volume;(1===r&&s<1||-1===r&&s>0)&&t.preventDefault()}),"volume",!1)})),this.player=t,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.setTabFocus=this.setTabFocus.bind(this),this.firstTouch=this.firstTouch.bind(this)}return Rr(e,[{key:"handleKey",value:function(e){var t=this.player,n=t.elements,i=e.keyCode?e.keyCode:e.which,a="keydown"===e.type,o=a&&i===this.lastKey;if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)&&yu(i))if(a){var r=document.activeElement;if(Au(r)){var s=t.config.selectors.editable;if(r!==n.inputs.seek&&Ju(r,s))return;if(32===e.which&&Ju(r,'button, [role^="menuitem"]'))return}switch([32,37,38,39,40,48,49,50,51,52,53,54,56,57,67,70,73,75,76,77,79].includes(i)&&(e.preventDefault(),e.stopPropagation()),i){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:o||(t.currentTime=t.duration/10*(i-48));break;case 32:case 75:o||pd(t.togglePlay());break;case 38:t.increaseVolume(.1);break;case 40:t.decreaseVolume(.1);break;case 77:o||(t.muted=!t.muted);break;case 39:t.forward();break;case 37:t.rewind();break;case 70:t.fullscreen.toggle();break;case 67:o||t.toggleCaptions();break;case 76:t.loop=!t.loop}27===i&&!t.fullscreen.usingNative&&t.fullscreen.active&&t.fullscreen.toggle(),this.lastKey=i}else this.lastKey=null}},{key:"toggleMenu",value:function(e){Fd.toggleMenu.call(this.player,e)}}]),e}(),sp=Xn("splice"),lp=Zt("splice",{ACCESSORS:!0,0:0,1:2}),cp=Math.max,up=Math.min;Te({target:"Array",proto:!0,forced:!sp||!lp},{splice:function(e,t){var n,i,a,o,r,s,l=De(this),c=ce(l.length),u=pe(e,c),d=arguments.length;if(0===d?n=i=0:1===d?(n=0,i=c-u):(n=d-2,i=up(cp(se(t),0),c-u)),c+n-i>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(a=st(l,i),o=0;o<i;o++)(r=u+o)in l&&Yn(a,o,l[r]);if(a.length=i,n<i){for(o=u;o<c-i;o++)s=o+n,(r=o+i)in l?l[s]=l[r]:delete l[s];for(o=c;o>c-i+n;o--)delete l[o-1]}else if(n>i)for(o=c-i;o>u;o--)s=o+n-1,(r=o+i-1)in l?l[s]=l[r]:delete l[s];for(o=0;o<n;o++)l[o+u]=arguments[o+2];return l.length=c-i+n,a}});var dp=t((function(e,t){e.exports=function(){var e=function(){},t={},n={},i={};function a(e,t){if(e){var a=i[e];if(n[e]=t,a)for(;a.length;)a[0](e,t),a.splice(0,1)}}function o(t,n){t.call&&(t={success:t}),n.length?(t.error||e)(n):(t.success||e)(t)}function r(t,n,i,a){var o,s,l=document,c=i.async,u=(i.numRetries||0)+1,d=i.before||e,p=t.replace(/[\?|#].*$/,""),h=t.replace(/^(css|img)!/,"");a=a||0,/(^css!|\.css$)/.test(p)?((s=l.createElement("link")).rel="stylesheet",s.href=h,(o="hideFocus"in s)&&s.relList&&(o=0,s.rel="preload",s.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(p)?(s=l.createElement("img")).src=h:((s=l.createElement("script")).src=t,s.async=void 0===c||c),s.onload=s.onerror=s.onbeforeload=function(e){var l=e.type[0];if(o)try{s.sheet.cssText.length||(l="e")}catch(e){18!=e.code&&(l="e")}if("e"==l){if((a+=1)<u)return r(t,n,i,a)}else if("preload"==s.rel&&"style"==s.as)return s.rel="stylesheet";n(t,l,e.defaultPrevented)},!1!==d(t,s)&&l.head.appendChild(s)}function s(e,t,n){var i,a,o=(e=e.push?e:[e]).length,s=o,l=[];for(i=function(e,n,i){if("e"==n&&l.push(e),"b"==n){if(!i)return;l.push(e)}--o||t(l)},a=0;a<s;a++)r(e[a],i,n)}function l(e,n,i){var r,l;if(n&&n.trim&&(r=n),l=(r?i:n)||{},r){if(r in t)throw"LoadJS";t[r]=!0}function c(t,n){s(e,(function(e){o(l,e),t&&o({success:t,error:n},e),a(r,e)}),l)}if(l.returnPromise)return new Promise(c);c()}return l.ready=function(e,t){return function(e,t){e=e.push?e:[e];var a,o,r,s=[],l=e.length,c=l;for(a=function(e,n){n.length&&s.push(e),--c||t(s)};l--;)o=e[l],(r=n[o])?a(o,r):(i[o]=i[o]||[]).push(a)}(e,(function(e){o(t,e)})),l},l.done=function(e){a(e,[])},l.reset=function(){t={},n={},i={}},l.isDefined=function(e){return e in t},l}()}));function pp(e){return new Promise((function(t,n){dp(e,{success:t,error:n})}))}function hp(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,cd.call(this,this.media,e?"play":"pause"))}var mp={setup:function(){var e=this;Ku(e.elements.wrapper,e.config.classNames.embed,!0),e.options.speed=e.config.speed.options,fd.call(e),bu(window.Vimeo)?mp.ready.call(e):pp(e.config.urls.vimeo.sdk).then((function(){mp.ready.call(e)})).catch((function(t){e.debug.warn("Vimeo SDK (player.js) failed to load",t)}))},ready:function(){var e=this,t=this,n=t.config.vimeo,i=n.premium,a=n.referrerPolicy,o=function(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(n,["premium","referrerPolicy"]);i&&Object.assign(o,{controls:!1,sidedock:!1});var r=zd(_r({loop:t.config.loop.active,autoplay:t.autoplay,muted:t.muted,gesture:"media",playsinline:!this.config.fullscreen.iosNative},o)),s=t.media.getAttribute("src");xu(s)&&(s=t.media.getAttribute(t.config.attributes.embed.id));var l,c=xu(l=s)?null:yu(Number(l))?l:l.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:l,u=Vu("iframe"),d=Pd(t.config.urls.vimeo.iframe,c,r);if(u.setAttribute("src",d),u.setAttribute("allowfullscreen",""),u.setAttribute("allow",["autoplay","fullscreen","picture-in-picture"].join("; ")),xu(a)||u.setAttribute("referrerPolicy",a),i||!n.customControls)u.setAttribute("data-poster",t.poster),t.media=Fu(u,t.media);else{var p=Vu("div",{class:t.config.classNames.embedContainer,"data-poster":t.poster});p.appendChild(u),t.media=Fu(p,t.media)}n.customControls||Bd(Pd(t.config.urls.vimeo.api,d)).then((function(e){!xu(e)&&e.thumbnail_url&&op.setPoster.call(t,e.thumbnail_url).catch((function(){}))})),t.embed=new window.Vimeo.Player(u,{autopause:t.config.autopause,muted:t.muted}),t.media.paused=!0,t.media.currentTime=0,t.supported.ui&&t.embed.disableTextTrack(),t.media.play=function(){return hp.call(t,!0),t.embed.play()},t.media.pause=function(){return hp.call(t,!1),t.embed.pause()},t.media.stop=function(){t.pause(),t.currentTime=0};var h=t.media.currentTime;Object.defineProperty(t.media,"currentTime",{get:function(){return h},set:function(e){var n=t.embed,i=t.media,a=t.paused,o=t.volume,r=a&&!n.hasPlayed;i.seeking=!0,cd.call(t,i,"seeking"),Promise.resolve(r&&n.setVolume(0)).then((function(){return n.setCurrentTime(e)})).then((function(){return r&&n.pause()})).then((function(){return r&&n.setVolume(o)})).catch((function(){}))}});var m=t.config.speed.selected;Object.defineProperty(t.media,"playbackRate",{get:function(){return m},set:function(e){t.embed.setPlaybackRate(e).then((function(){m=e,cd.call(t,t.media,"ratechange")})).catch((function(){t.options.speed=[1]}))}});var g=t.config.volume;Object.defineProperty(t.media,"volume",{get:function(){return g},set:function(e){t.embed.setVolume(e).then((function(){g=e,cd.call(t,t.media,"volumechange")}))}});var f=t.config.muted;Object.defineProperty(t.media,"muted",{get:function(){return f},set:function(e){var n=!!wu(e)&&e;t.embed.setVolume(n?0:t.config.volume).then((function(){f=n,cd.call(t,t.media,"volumechange")}))}});var v,b=t.config.loop;Object.defineProperty(t.media,"loop",{get:function(){return b},set:function(e){var n=wu(e)?e:t.config.loop.active;t.embed.setLoop(n).then((function(){b=n}))}}),t.embed.getVideoUrl().then((function(e){v=e,Fd.setDownloadUrl.call(t)})).catch((function(t){e.debug.warn(t)})),Object.defineProperty(t.media,"currentSrc",{get:function(){return v}}),Object.defineProperty(t.media,"ended",{get:function(){return t.currentTime===t.duration}}),Promise.all([t.embed.getVideoWidth(),t.embed.getVideoHeight()]).then((function(n){var i=Br(n,2),a=i[0],o=i[1];t.embed.ratio=[a,o],fd.call(e)})),t.embed.setAutopause(t.config.autopause).then((function(e){t.config.autopause=e})),t.embed.getVideoTitle().then((function(n){t.config.title=n,op.setTitle.call(e)})),t.embed.getCurrentTime().then((function(e){h=e,cd.call(t,t.media,"timeupdate")})),t.embed.getDuration().then((function(e){t.media.duration=e,cd.call(t,t.media,"durationchange")})),t.embed.getTextTracks().then((function(e){t.media.textTracks=e,Kd.setup.call(t)})),t.embed.on("cuechange",(function(e){var n=e.cues,i=(void 0===n?[]:n).map((function(e){return function(e){var t=document.createDocumentFragment(),n=document.createElement("div");return t.appendChild(n),n.innerHTML=e,t.firstChild.innerText}(e.text)}));Kd.updateCues.call(t,i)})),t.embed.on("loaded",(function(){t.embed.getPaused().then((function(e){hp.call(t,!e),e||cd.call(t,t.media,"playing")})),Au(t.embed.element)&&t.supported.ui&&t.embed.element.setAttribute("tabindex",-1)})),t.embed.on("bufferstart",(function(){cd.call(t,t.media,"waiting")})),t.embed.on("bufferend",(function(){cd.call(t,t.media,"playing")})),t.embed.on("play",(function(){hp.call(t,!0),cd.call(t,t.media,"playing")})),t.embed.on("pause",(function(){hp.call(t,!1)})),t.embed.on("timeupdate",(function(e){t.media.seeking=!1,h=e.seconds,cd.call(t,t.media,"timeupdate")})),t.embed.on("progress",(function(e){t.media.buffered=e.percent,cd.call(t,t.media,"progress"),1===parseInt(e.percent,10)&&cd.call(t,t.media,"canplaythrough"),t.embed.getDuration().then((function(e){e!==t.media.duration&&(t.media.duration=e,cd.call(t,t.media,"durationchange"))}))})),t.embed.on("seeked",(function(){t.media.seeking=!1,cd.call(t,t.media,"seeked")})),t.embed.on("ended",(function(){t.media.paused=!0,cd.call(t,t.media,"ended")})),t.embed.on("error",(function(e){t.media.error=e,cd.call(t,t.media,"error")})),n.customControls&&setTimeout((function(){return op.build.call(t)}),0)}};function gp(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,cd.call(this,this.media,e?"play":"pause"))}function fp(e){return e.noCookie?"https://www.youtube-nocookie.com":"http:"===window.location.protocol?"http://www.youtube.com":void 0}var vp={setup:function(){var e=this;if(Ku(this.elements.wrapper,this.config.classNames.embed,!0),bu(window.YT)&&Lu(window.YT.Player))vp.ready.call(this);else{var t=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){Lu(t)&&t(),vp.ready.call(e)},pp(this.config.urls.youtube.sdk).catch((function(t){e.debug.warn("YouTube API failed to load",t)}))}},getTitle:function(e){var t=this;Bd(Pd(this.config.urls.youtube.api,e)).then((function(e){if(bu(e)){var n=e.title,i=e.height,a=e.width;t.config.title=n,op.setTitle.call(t),t.embed.ratio=[a,i]}fd.call(t)})).catch((function(){fd.call(t)}))},ready:function(){var e=this,t=e.config.youtube,n=e.media&&e.media.getAttribute("id");if(xu(n)||!n.startsWith("youtube-")){var i=e.media.getAttribute("src");xu(i)&&(i=e.media.getAttribute(this.config.attributes.embed.id));var a,o,r=xu(a=i)?null:a.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:a,s=Vu("div",{id:(o=e.provider,"".concat(o,"-").concat(Math.floor(1e4*Math.random()))),"data-poster":t.customControls?e.poster:void 0});if(e.media=Fu(s,e.media),t.customControls){var l=function(e){return"https://i.ytimg.com/vi/".concat(r,"/").concat(e,"default.jpg")};ap(l("maxres"),121).catch((function(){return ap(l("sd"),121)})).catch((function(){return ap(l("hq"))})).then((function(t){return op.setPoster.call(e,t.src)})).then((function(t){t.includes("maxres")||(e.elements.poster.style.backgroundSize="cover")})).catch((function(){}))}e.embed=new window.YT.Player(e.media,{videoId:r,host:fp(t),playerVars:_u({},{autoplay:e.config.autoplay?1:0,hl:e.config.hl,controls:e.supported.ui&&t.customControls?0:1,disablekb:1,playsinline:e.config.fullscreen.iosNative?0:1,cc_load_policy:e.captions.active?1:0,cc_lang_pref:e.config.captions.language,widget_referrer:window?window.location.href:null},t),events:{onError:function(t){if(!e.media.error){var n=t.data,i={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[n]||"An unknown error occured";e.media.error={code:n,message:i},cd.call(e,e.media,"error")}},onPlaybackRateChange:function(t){var n=t.target;e.media.playbackRate=n.getPlaybackRate(),cd.call(e,e.media,"ratechange")},onReady:function(n){if(!Lu(e.media.play)){var i=n.target;vp.getTitle.call(e,r),e.media.play=function(){gp.call(e,!0),i.playVideo()},e.media.pause=function(){gp.call(e,!1),i.pauseVideo()},e.media.stop=function(){i.stopVideo()},e.media.duration=i.getDuration(),e.media.paused=!0,e.media.currentTime=0,Object.defineProperty(e.media,"currentTime",{get:function(){return Number(i.getCurrentTime())},set:function(t){e.paused&&!e.embed.hasPlayed&&e.embed.mute(),e.media.seeking=!0,cd.call(e,e.media,"seeking"),i.seekTo(t)}}),Object.defineProperty(e.media,"playbackRate",{get:function(){return i.getPlaybackRate()},set:function(e){i.setPlaybackRate(e)}});var a=e.config.volume;Object.defineProperty(e.media,"volume",{get:function(){return a},set:function(t){a=t,i.setVolume(100*a),cd.call(e,e.media,"volumechange")}});var o=e.config.muted;Object.defineProperty(e.media,"muted",{get:function(){return o},set:function(t){var n=wu(t)?t:o;o=n,i[n?"mute":"unMute"](),i.setVolume(100*a),cd.call(e,e.media,"volumechange")}}),Object.defineProperty(e.media,"currentSrc",{get:function(){return i.getVideoUrl()}}),Object.defineProperty(e.media,"ended",{get:function(){return e.currentTime===e.duration}});var s=i.getAvailablePlaybackRates();e.options.speed=s.filter((function(t){return e.config.speed.options.includes(t)})),e.supported.ui&&t.customControls&&e.media.setAttribute("tabindex",-1),cd.call(e,e.media,"timeupdate"),cd.call(e,e.media,"durationchange"),clearInterval(e.timers.buffering),e.timers.buffering=setInterval((function(){e.media.buffered=i.getVideoLoadedFraction(),(null===e.media.lastBuffered||e.media.lastBuffered<e.media.buffered)&&cd.call(e,e.media,"progress"),e.media.lastBuffered=e.media.buffered,1===e.media.buffered&&(clearInterval(e.timers.buffering),cd.call(e,e.media,"canplaythrough"))}),200),t.customControls&&setTimeout((function(){return op.build.call(e)}),50)}},onStateChange:function(n){var i=n.target;switch(clearInterval(e.timers.playing),e.media.seeking&&[1,2].includes(n.data)&&(e.media.seeking=!1,cd.call(e,e.media,"seeked")),n.data){case-1:cd.call(e,e.media,"timeupdate"),e.media.buffered=i.getVideoLoadedFraction(),cd.call(e,e.media,"progress");break;case 0:gp.call(e,!1),e.media.loop?(i.stopVideo(),i.playVideo()):cd.call(e,e.media,"ended");break;case 1:t.customControls&&!e.config.autoplay&&e.media.paused&&!e.embed.hasPlayed?e.media.pause():(gp.call(e,!0),cd.call(e,e.media,"playing"),e.timers.playing=setInterval((function(){cd.call(e,e.media,"timeupdate")}),50),e.media.duration!==i.getDuration()&&(e.media.duration=i.getDuration(),cd.call(e,e.media,"durationchange")));break;case 2:e.muted||e.embed.unMute(),gp.call(e,!1);break;case 3:cd.call(e,e.media,"waiting")}cd.call(e,e.elements.container,"statechange",!1,{code:n.data})}}})}}},bp={setup:function(){this.media?(Ku(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),Ku(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&Ku(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=Vu("div",{class:this.config.classNames.video}),Bu(this.media,this.elements.wrapper),this.elements.poster=Vu("div",{class:this.config.classNames.poster,hidden:""}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?vd.setup.call(this):this.isYouTube?vp.setup.call(this):this.isVimeo&&mp.setup.call(this)):this.debug.warn("No media element found!")}},yp=function(){function e(t){var n=this;Or(this,e),Gr(this,"load",(function(){n.enabled&&(bu(window.google)&&bu(window.google.ima)?n.ready():pp(n.player.config.urls.googleIMA.sdk).then((function(){n.ready()})).catch((function(){n.trigger("error",new Error("Google IMA SDK failed to load"))})))})),Gr(this,"ready",(function(){var e;n.enabled||((e=n).manager&&e.manager.destroy(),e.elements.displayContainer&&e.elements.displayContainer.destroy(),e.elements.container.remove()),n.startSafetyTimer(12e3,"ready()"),n.managerPromise.then((function(){n.clearSafetyTimer("onAdsManagerLoaded()")})),n.listeners(),n.setupIMA()})),Gr(this,"setupIMA",(function(){n.elements.container=Vu("div",{class:n.player.config.classNames.ads}),n.player.elements.container.appendChild(n.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(n.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(n.player.config.playsinline),n.elements.displayContainer=new google.ima.AdDisplayContainer(n.elements.container,n.player.media),n.loader=new google.ima.AdsLoader(n.elements.displayContainer),n.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(e){return n.onAdsManagerLoaded(e)}),!1),n.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){return n.onAdError(e)}),!1),n.requestAds()})),Gr(this,"requestAds",(function(){var e=n.player.elements.container;try{var t=new google.ima.AdsRequest;t.adTagUrl=n.tagUrl,t.linearAdSlotWidth=e.offsetWidth,t.linearAdSlotHeight=e.offsetHeight,t.nonLinearAdSlotWidth=e.offsetWidth,t.nonLinearAdSlotHeight=e.offsetHeight,t.forceNonLinearFullSlot=!1,t.setAdWillPlayMuted(!n.player.muted),n.loader.requestAds(t)}catch(e){n.onAdError(e)}})),Gr(this,"pollCountdown",(function(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0]))return clearInterval(n.countdownTimer),void n.elements.container.removeAttribute("data-badge-text");n.countdownTimer=setInterval((function(){var e=Yd(Math.max(n.manager.getRemainingTime(),0)),t="".concat(Nd("advertisement",n.player.config)," - ").concat(e);n.elements.container.setAttribute("data-badge-text",t)}),100)})),Gr(this,"onAdsManagerLoaded",(function(e){if(n.enabled){var t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!0,t.enablePreloading=!0,n.manager=e.getAdsManager(n.player,t),n.cuePoints=n.manager.getCuePoints(),n.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){return n.onAdError(e)})),Object.keys(google.ima.AdEvent.Type).forEach((function(e){n.manager.addEventListener(google.ima.AdEvent.Type[e],(function(e){return n.onAdEvent(e)}))})),n.trigger("loaded")}})),Gr(this,"addCuePoints",(function(){xu(n.cuePoints)||n.cuePoints.forEach((function(e){if(0!==e&&-1!==e&&e<n.player.duration){var t=n.player.elements.progress;if(Au(t)){var i=100/n.player.duration*e,a=Vu("span",{class:n.player.config.classNames.cues});a.style.left="".concat(i.toString(),"%"),t.appendChild(a)}}}))})),Gr(this,"onAdEvent",(function(e){var t=n.player.elements.container,i=e.getAd(),a=e.getAdData();switch(function(e){cd.call(n.player,n.player.media,"ads".concat(e.replace(/_/g,"").toLowerCase()))}(e.type),e.type){case google.ima.AdEvent.Type.LOADED:n.trigger("loaded"),n.pollCountdown(!0),i.isLinear()||(i.width=t.offsetWidth,i.height=t.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:n.manager.setVolume(n.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:n.player.ended?n.loadAds():n.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:n.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:n.pollCountdown(),n.resumeContent();break;case google.ima.AdEvent.Type.LOG:a.adError&&n.player.debug.warn("Non-fatal ad error: ".concat(a.adError.getMessage()))}})),Gr(this,"onAdError",(function(e){n.cancel(),n.player.debug.warn("Ads error",e)})),Gr(this,"listeners",(function(){var e,t=n.player.elements.container;n.player.on("canplay",(function(){n.addCuePoints()})),n.player.on("ended",(function(){n.loader.contentComplete()})),n.player.on("timeupdate",(function(){e=n.player.currentTime})),n.player.on("seeked",(function(){var t=n.player.currentTime;xu(n.cuePoints)||n.cuePoints.forEach((function(i,a){e<i&&i<t&&(n.manager.discardAdBreak(),n.cuePoints.splice(a,1))}))})),window.addEventListener("resize",(function(){n.manager&&n.manager.resize(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL)}))})),Gr(this,"play",(function(){var e=n.player.elements.container;n.managerPromise||n.resumeContent(),n.managerPromise.then((function(){n.manager.setVolume(n.player.volume),n.elements.displayContainer.initialize();try{n.initialized||(n.manager.init(e.offsetWidth,e.offsetHeight,google.ima.ViewMode.NORMAL),n.manager.start()),n.initialized=!0}catch(e){n.onAdError(e)}})).catch((function(){}))})),Gr(this,"resumeContent",(function(){n.elements.container.style.zIndex="",n.playing=!1,pd(n.player.media.play())})),Gr(this,"pauseContent",(function(){n.elements.container.style.zIndex=3,n.playing=!0,n.player.media.pause()})),Gr(this,"cancel",(function(){n.initialized&&n.resumeContent(),n.trigger("error"),n.loadAds()})),Gr(this,"loadAds",(function(){n.managerPromise.then((function(){n.manager&&n.manager.destroy(),n.managerPromise=new Promise((function(e){n.on("loaded",e),n.player.debug.log(n.manager)})),n.initialized=!1,n.requestAds()})).catch((function(){}))})),Gr(this,"trigger",(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];var o=n.events[e];Mu(o)&&o.forEach((function(e){Lu(e)&&e.apply(n,i)}))})),Gr(this,"on",(function(e,t){return Mu(n.events[e])||(n.events[e]=[]),n.events[e].push(t),n})),Gr(this,"startSafetyTimer",(function(e,t){n.player.debug.log("Safety timer invoked from: ".concat(t)),n.safetyTimer=setTimeout((function(){n.cancel(),n.clearSafetyTimer("startSafetyTimer()")}),e)})),Gr(this,"clearSafetyTimer",(function(e){vu(n.safetyTimer)||(n.player.debug.log("Safety timer cleared from: ".concat(e)),clearTimeout(n.safetyTimer),n.safetyTimer=null)})),this.player=t,this.config=t.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((function(e,t){n.on("loaded",e),n.on("error",t)})),this.load()}return Rr(e,[{key:"enabled",get:function(){var e=this.config;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!xu(e.publisherId)||$u(e.tagUrl))}},{key:"tagUrl",get:function(){var e=this.config;if($u(e.tagUrl))return e.tagUrl;var t={AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:e.publisherId};return"".concat("https://go.aniview.com/api/adserver6/vast/","?").concat(zd(t))}}]),e}(),Sp=ut.findIndex,wp="findIndex",Lp=!0,Mp=Zt(wp);wp in[]&&Array(1).findIndex((function(){Lp=!1})),Te({target:"Array",proto:!0,forced:Lp||!Mp},{findIndex:function(e){return Sp(this,e,arguments.length>1?arguments[1]:void 0)}}),gn(wp);var kp=Math.min,Ap=[].lastIndexOf,Cp=!!Ap&&1/[1].lastIndexOf(1,-0)<0,jp=Kt("lastIndexOf"),Ep=Zt("indexOf",{ACCESSORS:!0,1:0}),$p=!Cp&&jp&&Ep?Ap:function(e){if(Cp)return Ap.apply(this,arguments)||0;var t=g(this),n=ce(t.length),i=n-1;for(arguments.length>1&&(i=kp(i,se(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in t&&t[i]===e)return i||0;return-1};Te({target:"Array",proto:!0,forced:$p!==[].lastIndexOf},{lastIndexOf:$p});var xp,Tp=function(e,t){var n={};return e>t.width/t.height?(n.width=t.width,n.height=1/e*t.width):(n.height=t.height,n.width=e*t.height),n},Ip=function(){function e(t){var n=this;Or(this,e),Gr(this,"load",(function(){n.player.elements.display.seekTooltip&&(n.player.elements.display.seekTooltip.hidden=n.enabled),n.enabled&&n.getThumbnails().then((function(){n.enabled&&(n.render(),n.determineContainerAutoSizing(),n.loaded=!0)}))})),Gr(this,"getThumbnails",(function(){return new Promise((function(e){var t=n.player.config.previewThumbnails.src;if(xu(t))throw new Error("Missing previewThumbnails.src config attribute");var i=function(){n.thumbnails.sort((function(e,t){return e.height-t.height})),n.player.debug.log("Preview thumbnails",n.thumbnails),e()};if(Lu(t))t((function(e){n.thumbnails=e,i()}));else{var a=(Su(t)?[t]:t).map((function(e){return n.getThumbnail(e)}));Promise.all(a).then(i)}}))})),Gr(this,"getThumbnail",(function(e){return new Promise((function(t){Bd(e).then((function(i){var a,o,r={frames:(a=i,o=[],a.split(/\r\n\r\n|\n\n|\r\r/).forEach((function(e){var t={};e.split(/\r\n|\n|\r/).forEach((function(e){if(yu(t.startTime)){if(!xu(e.trim())&&xu(t.text)){var n=e.trim().split("#xywh="),i=Br(n,1);if(t.text=i[0],n[1]){var a=Br(n[1].split(","),4);t.x=a[0],t.y=a[1],t.w=a[2],t.h=a[3]}}}else{var o=e.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);o&&(t.startTime=60*Number(o[1]||0)*60+60*Number(o[2])+Number(o[3])+Number("0.".concat(o[4])),t.endTime=60*Number(o[6]||0)*60+60*Number(o[7])+Number(o[8])+Number("0.".concat(o[9])))}})),t.text&&o.push(t)})),o),height:null,urlPrefix:""};r.frames[0].text.startsWith("/")||r.frames[0].text.startsWith("http://")||r.frames[0].text.startsWith("https://")||(r.urlPrefix=e.substring(0,e.lastIndexOf("/")+1));var s=new Image;s.onload=function(){r.height=s.naturalHeight,r.width=s.naturalWidth,n.thumbnails.push(r),t()},s.src=r.urlPrefix+r.frames[0].text}))}))})),Gr(this,"startMove",(function(e){if(n.loaded&&Cu(e)&&["touchmove","mousemove"].includes(e.type)&&n.player.media.duration){if("touchmove"===e.type)n.seekTime=n.player.media.duration*(n.player.elements.inputs.seek.value/100);else{var t=n.player.elements.progress.getBoundingClientRect(),i=100/t.width*(e.pageX-t.left);n.seekTime=n.player.media.duration*(i/100),n.seekTime<0&&(n.seekTime=0),n.seekTime>n.player.media.duration-1&&(n.seekTime=n.player.media.duration-1),n.mousePosX=e.pageX,n.elements.thumb.time.innerText=Yd(n.seekTime)}n.showImageAtCurrentTime()}})),Gr(this,"endMove",(function(){n.toggleThumbContainer(!1,!0)})),Gr(this,"startScrubbing",(function(e){(vu(e.button)||!1===e.button||0===e.button)&&(n.mouseDown=!0,n.player.media.duration&&(n.toggleScrubbingContainer(!0),n.toggleThumbContainer(!1,!0),n.showImageAtCurrentTime()))})),Gr(this,"endScrubbing",(function(){n.mouseDown=!1,Math.ceil(n.lastTime)===Math.ceil(n.player.media.currentTime)?n.toggleScrubbingContainer(!1):ld.call(n.player,n.player.media,"timeupdate",(function(){n.mouseDown||n.toggleScrubbingContainer(!1)}))})),Gr(this,"listeners",(function(){n.player.on("play",(function(){n.toggleThumbContainer(!1,!0)})),n.player.on("seeked",(function(){n.toggleThumbContainer(!1)})),n.player.on("timeupdate",(function(){n.lastTime=n.player.media.currentTime}))})),Gr(this,"render",(function(){n.elements.thumb.container=Vu("div",{class:n.player.config.classNames.previewThumbnails.thumbContainer}),n.elements.thumb.imageContainer=Vu("div",{class:n.player.config.classNames.previewThumbnails.imageContainer}),n.elements.thumb.container.appendChild(n.elements.thumb.imageContainer);var e=Vu("div",{class:n.player.config.classNames.previewThumbnails.timeContainer});n.elements.thumb.time=Vu("span",{},"00:00"),e.appendChild(n.elements.thumb.time),n.elements.thumb.container.appendChild(e),Au(n.player.elements.progress)&&n.player.elements.progress.appendChild(n.elements.thumb.container),n.elements.scrubbing.container=Vu("div",{class:n.player.config.classNames.previewThumbnails.scrubbingContainer}),n.player.elements.wrapper.appendChild(n.elements.scrubbing.container)})),Gr(this,"destroy",(function(){n.elements.thumb.container&&n.elements.thumb.container.remove(),n.elements.scrubbing.container&&n.elements.scrubbing.container.remove()})),Gr(this,"showImageAtCurrentTime",(function(){n.mouseDown?n.setScrubbingContainerSize():n.setThumbContainerSizeAndPos();var e=n.thumbnails[0].frames.findIndex((function(e){return n.seekTime>=e.startTime&&n.seekTime<=e.endTime})),t=e>=0,i=0;n.mouseDown||n.toggleThumbContainer(t),t&&(n.thumbnails.forEach((function(t,a){n.loadedImages.includes(t.frames[e].text)&&(i=a)})),e!==n.showingThumb&&(n.showingThumb=e,n.loadImage(i)))})),Gr(this,"loadImage",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=n.showingThumb,i=n.thumbnails[e],a=i.urlPrefix,o=i.frames[t],r=i.frames[t].text,s=a+r;if(n.currentImageElement&&n.currentImageElement.dataset.filename===r)n.showImage(n.currentImageElement,o,e,t,r,!1),n.currentImageElement.dataset.index=t,n.removeOldImages(n.currentImageElement);else{n.loadingImage&&n.usingSprites&&(n.loadingImage.onload=null);var l=new Image;l.src=s,l.dataset.index=t,l.dataset.filename=r,n.showingThumbFilename=r,n.player.debug.log("Loading image: ".concat(s)),l.onload=function(){return n.showImage(l,o,e,t,r,!0)},n.loadingImage=l,n.removeOldImages(l)}})),Gr(this,"showImage",(function(e,t,i,a,o){var r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];n.player.debug.log("Showing thumb: ".concat(o,". num: ").concat(a,". qual: ").concat(i,". newimg: ").concat(r)),n.setImageSizeAndOffset(e,t),r&&(n.currentImageContainer.appendChild(e),n.currentImageElement=e,n.loadedImages.includes(o)||n.loadedImages.push(o)),n.preloadNearby(a,!0).then(n.preloadNearby(a,!1)).then(n.getHigherQuality(i,e,t,o))})),Gr(this,"removeOldImages",(function(e){Array.from(n.currentImageContainer.children).forEach((function(t){if("img"===t.tagName.toLowerCase()){var i=n.usingSprites?500:1e3;if(t.dataset.index!==e.dataset.index&&!t.dataset.deleting){t.dataset.deleting=!0;var a=n.currentImageContainer;setTimeout((function(){a.removeChild(t),n.player.debug.log("Removing thumb: ".concat(t.dataset.filename))}),i)}}}))})),Gr(this,"preloadNearby",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((function(i){setTimeout((function(){var a=n.thumbnails[0].frames[e].text;if(n.showingThumbFilename===a){var o;o=t?n.thumbnails[0].frames.slice(e):n.thumbnails[0].frames.slice(0,e).reverse();var r=!1;o.forEach((function(e){var t=e.text;if(t!==a&&!n.loadedImages.includes(t)){r=!0,n.player.debug.log("Preloading thumb filename: ".concat(t));var o=n.thumbnails[0].urlPrefix+t,s=new Image;s.src=o,s.onload=function(){n.player.debug.log("Preloaded thumb filename: ".concat(t)),n.loadedImages.includes(t)||n.loadedImages.push(t),i()}}})),r||i()}}),300)}))})),Gr(this,"getHigherQuality",(function(e,t,i,a){if(e<n.thumbnails.length-1){var o=t.naturalHeight;n.usingSprites&&(o=i.h),o<n.thumbContainerHeight&&setTimeout((function(){n.showingThumbFilename===a&&(n.player.debug.log("Showing higher quality thumb for: ".concat(a)),n.loadImage(e+1))}),300)}})),Gr(this,"toggleThumbContainer",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=n.player.config.classNames.previewThumbnails.thumbContainerShown;n.elements.thumb.container.classList.toggle(i,e),!e&&t&&(n.showingThumb=null,n.showingThumbFilename=null)})),Gr(this,"toggleScrubbingContainer",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=n.player.config.classNames.previewThumbnails.scrubbingContainerShown;n.elements.scrubbing.container.classList.toggle(t,e),e||(n.showingThumb=null,n.showingThumbFilename=null)})),Gr(this,"determineContainerAutoSizing",(function(){(n.elements.thumb.imageContainer.clientHeight>20||n.elements.thumb.imageContainer.clientWidth>20)&&(n.sizeSpecifiedInCSS=!0)})),Gr(this,"setThumbContainerSizeAndPos",(function(){if(n.sizeSpecifiedInCSS){if(n.elements.thumb.imageContainer.clientHeight>20&&n.elements.thumb.imageContainer.clientWidth<20){var e=Math.floor(n.elements.thumb.imageContainer.clientHeight*n.thumbAspectRatio);n.elements.thumb.imageContainer.style.width="".concat(e,"px")}else if(n.elements.thumb.imageContainer.clientHeight<20&&n.elements.thumb.imageContainer.clientWidth>20){var t=Math.floor(n.elements.thumb.imageContainer.clientWidth/n.thumbAspectRatio);n.elements.thumb.imageContainer.style.height="".concat(t,"px")}}else{var i=Math.floor(n.thumbContainerHeight*n.thumbAspectRatio);n.elements.thumb.imageContainer.style.height="".concat(n.thumbContainerHeight,"px"),n.elements.thumb.imageContainer.style.width="".concat(i,"px")}n.setThumbContainerPos()})),Gr(this,"setThumbContainerPos",(function(){var e=n.player.elements.progress.getBoundingClientRect(),t=n.player.elements.container.getBoundingClientRect(),i=n.elements.thumb.container,a=t.left-e.left+10,o=t.right-e.left-i.clientWidth-10,r=n.mousePosX-e.left-i.clientWidth/2;r<a&&(r=a),r>o&&(r=o),i.style.left="".concat(r,"px")})),Gr(this,"setScrubbingContainerSize",(function(){var e=Tp(n.thumbAspectRatio,{width:n.player.media.clientWidth,height:n.player.media.clientHeight}),t=e.width,i=e.height;n.elements.scrubbing.container.style.width="".concat(t,"px"),n.elements.scrubbing.container.style.height="".concat(i,"px")})),Gr(this,"setImageSizeAndOffset",(function(e,t){if(n.usingSprites){var i=n.thumbContainerHeight/t.h;e.style.height="".concat(e.naturalHeight*i,"px"),e.style.width="".concat(e.naturalWidth*i,"px"),e.style.left="-".concat(t.x*i,"px"),e.style.top="-".concat(t.y*i,"px")}})),this.player=t,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}return Rr(e,[{key:"enabled",get:function(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}},{key:"currentImageContainer",get:function(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}},{key:"usingSprites",get:function(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}},{key:"thumbAspectRatio",get:function(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}},{key:"thumbContainerHeight",get:function(){return this.mouseDown?Tp(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight}).height:this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}},{key:"currentImageElement",get:function(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement},set:function(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}}]),e}(),Pp={insertElements:function(e,t){var n=this;Su(t)?Uu(e,this.media,{src:t}):Mu(t)&&t.forEach((function(t){Uu(e,n.media,t)}))},change:function(e){var t=this;Nu(e,"sources.length")?(vd.cancelRequests.call(this),this.destroy.call(this,(function(){t.options.quality=[],Wu(t.media),t.media=null,Au(t.elements.container)&&t.elements.container.removeAttribute("class");var n=e.sources,i=e.type,a=Br(n,1)[0],o=a.provider,r=void 0===o?Xd.html5:o,s=a.src,l="html5"===r?i:"div",c="html5"===r?{}:{src:s};Object.assign(t,{provider:r,type:i,supported:id.check(i,r,t.config.playsinline),media:Vu(l,c)}),t.elements.container.appendChild(t.media),wu(e.autoplay)&&(t.config.autoplay=e.autoplay),t.isHTML5&&(t.config.crossorigin&&t.media.setAttribute("crossorigin",""),t.config.autoplay&&t.media.setAttribute("autoplay",""),xu(e.poster)||(t.poster=e.poster),t.config.loop.active&&t.media.setAttribute("loop",""),t.config.muted&&t.media.setAttribute("muted",""),t.config.playsinline&&t.media.setAttribute("playsinline","")),op.addStyleHook.call(t),t.isHTML5&&Pp.insertElements.call(t,"source",n),t.config.title=e.title,bp.setup.call(t),t.isHTML5&&Object.keys(e).includes("tracks")&&Pp.insertElements.call(t,"track",e.tracks),(t.isHTML5||t.isEmbed&&!t.supported.ui)&&op.build.call(t),t.isHTML5&&t.media.load(),xu(e.previewThumbnails)||(Object.assign(t.config.previewThumbnails,e.previewThumbnails),t.previewThumbnails&&t.previewThumbnails.loaded&&(t.previewThumbnails.destroy(),t.previewThumbnails=null),t.config.previewThumbnails.enabled&&(t.previewThumbnails=new Ip(t))),t.fullscreen.update()}),!0)):this.debug.warn("Invalid source format")}},Op=function(){function e(t,n){var i=this;if(Or(this,e),Gr(this,"play",(function(){return Lu(i.media.play)?(i.ads&&i.ads.enabled&&i.ads.managerPromise.then((function(){return i.ads.play()})).catch((function(){return pd(i.media.play())})),i.media.play()):null})),Gr(this,"pause",(function(){return i.playing&&Lu(i.media.pause)?i.media.pause():null})),Gr(this,"togglePlay",(function(e){return(wu(e)?e:!i.playing)?i.play():i.pause()})),Gr(this,"stop",(function(){i.isHTML5?(i.pause(),i.restart()):Lu(i.media.stop)&&i.media.stop()})),Gr(this,"restart",(function(){i.currentTime=0})),Gr(this,"rewind",(function(e){i.currentTime-=yu(e)?e:i.config.seekTime})),Gr(this,"forward",(function(e){i.currentTime+=yu(e)?e:i.config.seekTime})),Gr(this,"increaseVolume",(function(e){var t=i.media.muted?0:i.volume;i.volume=t+(yu(e)?e:0)})),Gr(this,"decreaseVolume",(function(e){i.increaseVolume(-e)})),Gr(this,"airplay",(function(){id.airplay&&i.media.webkitShowPlaybackTargetPicker()})),Gr(this,"toggleControls",(function(e){if(i.supported.ui&&!i.isAudio){var t=Qu(i.elements.container,i.config.classNames.hideControls),n=void 0===e?void 0:!e,a=Ku(i.elements.container,i.config.classNames.hideControls,n);if(a&&Mu(i.config.controls)&&i.config.controls.includes("settings")&&!xu(i.config.settings)&&Fd.toggleMenu.call(i,!1),a!==t){var o=a?"controlshidden":"controlsshown";cd.call(i,i.media,o)}return!a}return!1})),Gr(this,"on",(function(e,t){rd.call(i,i.elements.container,e,t)})),Gr(this,"once",(function(e,t){ld.call(i,i.elements.container,e,t)})),Gr(this,"off",(function(e,t){sd(i.elements.container,e,t)})),Gr(this,"destroy",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(i.ready){var n=function(){document.body.style.overflow="",i.embed=null,t?(Object.keys(i.elements).length&&(Wu(i.elements.buttons.play),Wu(i.elements.captions),Wu(i.elements.controls),Wu(i.elements.wrapper),i.elements.buttons.play=null,i.elements.captions=null,i.elements.controls=null,i.elements.wrapper=null),Lu(e)&&e()):(ud.call(i),vd.cancelRequests.call(i),Fu(i.elements.original,i.elements.container),cd.call(i,i.elements.original,"destroyed",!0),Lu(e)&&e.call(i.elements.original),i.ready=!1,setTimeout((function(){i.elements=null,i.media=null}),200))};i.stop(),clearTimeout(i.timers.loading),clearTimeout(i.timers.controls),clearTimeout(i.timers.resized),i.isHTML5?(op.toggleNativeControls.call(i,!0),n()):i.isYouTube?(clearInterval(i.timers.buffering),clearInterval(i.timers.playing),null!==i.embed&&Lu(i.embed.destroy)&&i.embed.destroy(),n()):i.isVimeo&&(null!==i.embed&&i.embed.unload().then(n),setTimeout(n,200))}})),Gr(this,"supports",(function(e){return id.mime.call(i,e)})),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=id.touch,this.media=t,Su(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||ku(this.media)||Mu(this.media))&&(this.media=this.media[0]),this.config=_u({},Qd,e.defaults,n||{},function(){try{return JSON.parse(i.media.getAttribute("data-plyr-config"))}catch(e){return{}}}()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new tp(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",id),!vu(this.media)&&Au(this.media))if(this.media.plyr)this.debug.warn("Target already setup");else if(this.config.enabled)if(id.check().api){var a=this.media.cloneNode(!0);a.autoplay=!1,this.elements.original=a;var o=this.media.tagName.toLowerCase(),r=null,s=null;switch(o){case"div":if(r=this.media.querySelector("iframe"),Au(r)){if(s=qd(r.getAttribute("src")),this.provider=function(e){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(e)?Xd.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(e)?Xd.vimeo:null}(s.toString()),this.elements.container=this.media,this.media=r,this.elements.container.className="",s.search.length){var l=["1","true"];l.includes(s.searchParams.get("autoplay"))&&(this.config.autoplay=!0),l.includes(s.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=l.includes(s.searchParams.get("playsinline")),this.config.youtube.hl=s.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(xu(this.provider)||!Object.values(Xd).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=Zd;break;case"video":case"audio":this.type=o,this.provider=Xd.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=id.check(this.type,this.provider,this.config.playsinline),this.supported.api?(this.eventListeners=[],this.listeners=new rp(this),this.storage=new _d(this),this.media.plyr=this,Au(this.elements.container)||(this.elements.container=Vu("div",{tabindex:0}),Bu(this.media,this.elements.container)),op.migrateStyles.call(this),op.addStyleHook.call(this),bp.setup.call(this),this.config.debug&&rd.call(this,this.elements.container,this.config.events.join(" "),(function(e){i.debug.log("event: ".concat(e.type))})),this.fullscreen=new np(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&op.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new yp(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",(function(){return pd(i.play())})),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Ip(this))):this.debug.error("Setup failed: no support")}else this.debug.error("Setup failed: no support");else this.debug.error("Setup failed: disabled by config");else this.debug.error("Setup failed: no suitable element passed")}return Rr(e,[{key:"toggleCaptions",value:function(e){Kd.toggle.call(this,e,!1)}},{key:"isHTML5",get:function(){return this.provider===Xd.html5}},{key:"isEmbed",get:function(){return this.isYouTube||this.isVimeo}},{key:"isYouTube",get:function(){return this.provider===Xd.youtube}},{key:"isVimeo",get:function(){return this.provider===Xd.vimeo}},{key:"isVideo",get:function(){return this.type===Zd}},{key:"isAudio",get:function(){return"audio"===this.type}},{key:"playing",get:function(){return Boolean(this.ready&&!this.paused&&!this.ended)}},{key:"paused",get:function(){return Boolean(this.media.paused)}},{key:"stopped",get:function(){return Boolean(this.paused&&0===this.currentTime)}},{key:"ended",get:function(){return Boolean(this.media.ended)}},{key:"currentTime",set:function(e){if(this.duration){var t=yu(e)&&e>0;this.media.currentTime=t?Math.min(e,this.duration):0,this.debug.log("Seeking to ".concat(this.currentTime," seconds"))}},get:function(){return Number(this.media.currentTime)}},{key:"buffered",get:function(){var e=this.media.buffered;return yu(e)?e:e&&e.length&&this.duration>0?e.end(0)/this.duration:0}},{key:"seeking",get:function(){return Boolean(this.media.seeking)}},{key:"duration",get:function(){var e=parseFloat(this.config.duration),t=(this.media||{}).duration,n=yu(t)&&t!==1/0?t:0;return e||n}},{key:"volume",set:function(e){var t=e;Su(t)&&(t=Number(t)),yu(t)||(t=this.storage.get("volume")),yu(t)||(t=this.config.volume),t>1&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!xu(e)&&this.muted&&t>0&&(this.muted=!1)},get:function(){return Number(this.media.volume)}},{key:"muted",set:function(e){var t=e;wu(t)||(t=this.storage.get("muted")),wu(t)||(t=this.config.muted),this.config.muted=t,this.media.muted=t},get:function(){return Boolean(this.media.muted)}},{key:"hasAudio",get:function(){return!this.isHTML5||!!this.isAudio||Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length)}},{key:"speed",set:function(e){var t=this,n=null;yu(e)&&(n=e),yu(n)||(n=this.storage.get("speed")),yu(n)||(n=this.config.speed.selected);var i=this.minimumSpeed,a=this.maximumSpeed;n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255;return Math.min(Math.max(e,t),n)}(n,i,a),this.config.speed.selected=n,setTimeout((function(){t.media.playbackRate=n}),0)},get:function(){return Number(this.media.playbackRate)}},{key:"minimumSpeed",get:function(){return this.isYouTube?Math.min.apply(Math,Hr(this.options.speed)):this.isVimeo?.5:.0625}},{key:"maximumSpeed",get:function(){return this.isYouTube?Math.max.apply(Math,Hr(this.options.speed)):this.isVimeo?2:16}},{key:"quality",set:function(e){var t=this.config.quality,n=this.options.quality;if(n.length){var i=[!xu(e)&&Number(e),this.storage.get("quality"),t.selected,t.default].find(yu),a=!0;if(!n.includes(i)){var o=function(e,t){return Mu(e)&&e.length?e.reduce((function(e,n){return Math.abs(n-t)<Math.abs(e-t)?n:e})):null}(n,i);this.debug.warn("Unsupported quality option: ".concat(i,", using ").concat(o," instead")),i=o,a=!1}t.selected=i,this.media.quality=i,a&&this.storage.set({quality:i})}},get:function(){return this.media.quality}},{key:"loop",set:function(e){var t=wu(e)?e:this.config.loop.active;this.config.loop.active=t,this.media.loop=t},get:function(){return Boolean(this.media.loop)}},{key:"source",set:function(e){Pp.change.call(this,e)},get:function(){return this.media.currentSrc}},{key:"download",get:function(){var e=this.config.urls.download;return $u(e)?e:this.source},set:function(e){$u(e)&&(this.config.urls.download=e,Fd.setDownloadUrl.call(this))}},{key:"poster",set:function(e){this.isVideo?op.setPoster.call(this,e,!1).catch((function(){})):this.debug.warn("Poster can only be set for video")},get:function(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}},{key:"ratio",get:function(){if(!this.isVideo)return null;var e=md(gd.call(this));return Mu(e)?e.join(":"):e},set:function(e){this.isVideo?Su(e)&&hd(e)?(this.config.ratio=e,fd.call(this)):this.debug.error("Invalid aspect ratio specified (".concat(e,")")):this.debug.warn("Aspect ratio can only be set for video")}},{key:"autoplay",set:function(e){var t=wu(e)?e:this.config.autoplay;this.config.autoplay=t},get:function(){return Boolean(this.config.autoplay)}},{key:"currentTrack",set:function(e){Kd.set.call(this,e,!1)},get:function(){var e=this.captions,t=e.toggled,n=e.currentTrack;return t?n:-1}},{key:"language",set:function(e){Kd.setLanguage.call(this,e,!1)},get:function(){return(Kd.getCurrentTrack.call(this)||{}).language}},{key:"pip",set:function(e){if(id.pip){var t=wu(e)?e:!this.pip;Lu(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(t?Jd:"inline"),Lu(this.media.requestPictureInPicture)&&(!this.pip&&t?this.media.requestPictureInPicture():this.pip&&!t&&document.exitPictureInPicture())}},get:function(){return id.pip?xu(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===Jd:null}}],[{key:"supported",value:function(e,t,n){return id.check(e,t,n)}},{key:"loadSprite",value:function(e,t){return Hd(e,t)}},{key:"setup",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null;return Su(t)?i=Array.from(document.querySelectorAll(t)):ku(t)?i=Array.from(t):Mu(t)&&(i=t.filter(Au)),xu(i)?null:i.map((function(t){return new e(t,n)}))}}]),e}();return Op.defaults=(xp=Qd,JSON.parse(JSON.stringify(xp))),Op}));class fLoader extends Hls.DefaultConfig.loader{constructor(e){super(e);var t=this.load.bind(this);this.load=function(n,i,a){if(e.proxy){let e=n.url;"https://api.allorigins.win/raw?url="==e.substring(0,35)&&(e=decodeURIComponent(e.substr(35))),n.url="https://api.allorigins.win/raw?url="+encodeURIComponent(e),n.frag._url="https://api.allorigins.win/raw?url="+encodeURIComponent(e),n.frag.relurl="https://api.allorigins.win/raw?url="+encodeURIComponent(e)}else{var o=a.onError;a.onError=function(t,n,i){0==t.code&&(e.proxy=!0),o(t,n,i)}}t(n,i,a)}}}